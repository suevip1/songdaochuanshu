---
layout: post
title: "[MAUI]æ¨¡ä»¿iOSå¤šä»»åŠ¡åˆ‡æ¢å¡ç‰‡æ»‘åŠ¨çš„äº¤äº’å®ç°"
date: "2023-05-03T01:07:03.317Z"
---
\[MAUI\]æ¨¡ä»¿iOSå¤šä»»åŠ¡åˆ‡æ¢å¡ç‰‡æ»‘åŠ¨çš„äº¤äº’å®ç°
===========================

@

ç›®å½•

*   [åŸç†](#åŸç†)
*   [åˆ›å»ºå¸ƒå±€](#åˆ›å»ºå¸ƒå±€)
*   [åˆ›å»ºåˆ†å¸ƒå‡½æ•°](#åˆ›å»ºåˆ†å¸ƒå‡½æ•°)
*   [åˆ›å»ºåŠ¨æ•ˆ](#åˆ›å»ºåŠ¨æ•ˆ)
*   [åˆ›å»ºç»‘å®šæ•°æ®](#åˆ›å»ºç»‘å®šæ•°æ®)
*   [ç»†èŠ‚è°ƒæ•´](#ç»†èŠ‚è°ƒæ•´)
    *   [é¦–å¼ å¡ç‰‡çš„å¤„ç†](#é¦–å¼ å¡ç‰‡çš„å¤„ç†)
    *   [ä¸ºå¡ç‰‡æ·»åŠ è£å‰ª](#ä¸ºå¡ç‰‡æ·»åŠ è£å‰ª)
    *   [è·³è½¬åˆ°æœ€åä¸€å¼ å¡ç‰‡](#è·³è½¬åˆ°æœ€åä¸€å¼ å¡ç‰‡)
*   [é¡¹ç›®åœ°å€](#é¡¹ç›®åœ°å€)

  
çœ‹äº†ä¸Šä¸€ç¯‡åšæ–‡çš„è¯„è®ºï¼Œå¤§å®¶å¯¹MAUIè¿˜æ˜¯æ¯”è¾ƒæ„Ÿå…´è¶£çš„ï¼Œéå¸¸æ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ï¼Œè¿™ä¸ªä¸“æ æˆ‘äº‰å–å‘¨æ›´ğŸ˜‰ã€‚

Appä¹‹é—´çš„å¤šä»»åŠ¡åˆ‡æ¢ç›¸ä¿¡ä½ ä»¬éƒ½å¾ˆç†Ÿæ‚‰ã€‚è‹¹æœè®¾å¤‡ä»iOS9å¼€å§‹ä½¿ç”¨æ°´å¹³æ’åˆ—çš„å å±‚å¡ç‰‡æ¥å±•ç°å¤šä»»åŠ¡

> ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528720-151476704.gif)  
> åŠ¨å›¾æ¥è‡ªiPhone ä½¿ç”¨æ‰‹å†Œ - åœ¨ iPhone ä¸Šçš„åº”ç”¨ä¹‹é—´åˆ‡æ¢

è¿™ä¸ªè®¾è®¡åˆ©ç”¨å±å¹•æ·±åº¦ï¼ˆzæ–¹å‘ï¼‰å’Œæ°´å¹³ç©ºé—´ï¼ˆxè½´æ–¹å‘ï¼‰çš„å¹³é¡ºç»“åˆï¼Œåœ¨æœ‰é™çš„å±å¹•ç©ºé—´å†…ï¼Œå±•ç°äº†æ›´å¤šçš„å¡ç‰‡ï¼Œæ»‘åŠ¨å±å¹•æ—¶ï¼Œæ¯ä¸€ä¸ªå¡ç‰‡åœ¨å±å¹•ä¸­å¤®çš„æ—¶å€™ä¹Ÿèƒ½å¾—åˆ°å¤§é¢ç§¯çš„å±•ç¤ºã€‚

ä»Šå¤©æˆ‘ä»¬åœ¨[.NET MAUI](https://learn.microsoft.com/zh-cn/dotnet/maui/fundamentals/gestures/pan?view=net-maui-7.0)ä¸­å®ç°è¿™ä¸ªä¼˜ç§€äº¤äº’æ•ˆæœ  
ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528578-165920705.gif)

ä½¿ç”¨[.NET MAU](https://dotnet.microsoft.com/en-us/apps/maui)å®ç°è·¨å¹³å°æ”¯æŒï¼Œæœ¬é¡¹ç›®å¯è¿è¡ŒäºAndroidã€iOSå¹³å°ã€‚

åŸç†
--

ä½¿ç”¨è¿‡çš„Appå°†ä»¥å±å¹•æˆªå›¾çš„å¡ç‰‡æ–¹å¼å±•ç°ï¼Œå¡ç‰‡ä»å³åˆ°å·¦ä¾æ¬¡æ’åˆ—ï¼Œæœ€è¿‘ä½¿ç”¨çš„appå¡ç‰‡å°†é å‰ï¼Œå¹¶å å±‚åœ¨å…¶ä»–ä¹…æœªä½¿ç”¨çš„appå¡ç‰‡ä¹‹ä¸Šã€‚

å¹³é“ºåˆ†å¸ƒ

å¹³é“ºåˆ†å¸ƒæ˜¯ç»å…¸çš„å¡ç‰‡å¸ƒå±€ï¼Œå®ƒçš„å¡ç‰‡åˆ†éƒ¨æ˜¯å‡åŒ€çš„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528340-531819264.png)

åœ¨æœ‰é™çš„å±å¹•å®½åº¦å†…å‘ˆç°6å¼ å¡ç‰‡ï¼Œå å±‚æ”¾ç½®åæ¯å¼ å¡ç‰‡å¯æ˜¾ç¤ºéƒ¨åˆ†çš„å®½åº¦ä¸ºå±å¹•å®½åº¦çš„1/6

å¡ç‰‡åœ¨å±å¹•æ¨ªè½´çš„ä½ç½®ä¸å…¶åç§»é‡æ˜¯ä¸€ä¸ªçº¿æ€§å…³ç³»ï¼Œå¦‚ä¸‹å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528337-15738949.png)

iOSå¤šä»»åŠ¡å¡ç‰‡åˆ†å¸ƒ

åœ¨iOSå¤šä»»åŠ¡å¡ç‰‡çš„å¸ƒå±€ä¸­ï¼Œå¡ç‰‡åœ¨å±å¹•èŒƒå›´å†…çš„å¸ƒå±€ç”±å·¦å‘å³çš„å¯†åº¦ä¾æ¬¡é™ä½ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528203-937368681.png)

å®ƒçš„å¸ƒå±€ä½ç½®æ˜¯ç”±4æ®µäºŒé˜¶è´å¡å°”æ›²çº¿æ‹¼æ¥æˆçš„å®Œæ•´æ›²çº¿å‡½æ•°è®¡ç®—è€Œæ¥çš„ã€‚

äºŒé˜¶è´å¡å°”æ›²çº¿ï¼Œå¯ä»¥é€šè¿‡ä¸‰ä¸ªç‚¹ï¼Œæ¥ç¡®å®šä¸€æ¡å¹³æ»‘çš„æ›²çº¿ã€‚è¯¦æƒ…è¯·å‚è€ƒ[è¿™é‡Œ](https://baike.baidu.com/item/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF)

å¡ç‰‡åœ¨å±å¹•æ¨ªè½´çš„ä½ç½®ä¸å…¶åç§»é‡å¦‚ä¸‹å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528323-1684978270.png)

åŒæ ·æ˜¯åœ¨é¡µé¢ä¸Šä»å·¦è‡³å³å‘ˆç°6å¼ å¡ç‰‡ã€‚åˆ©ç”¨è´å¡å°”æ›²çº¿å‡½æ•°çš„ç‰¹æ€§ï¼Œç¼–å·é å‰çš„å¡ç‰‡ï¼ˆ1,2,3ï¼‰çš„åç§»é‡â€œæ»åâ€ï¼Œç¼–å·é åçš„å¡ç‰‡ï¼ˆ4,5,6ï¼‰çš„åç§»é‡â€œè¿½èµ¶â€ï¼Œè¿™æ ·ä¿è¯äº†ç¼–å·é åçš„å¡ç‰‡ï¼ˆè¾ƒæ–°çš„Appä»»åŠ¡ï¼‰å¸ƒå±€å¯†åº¦é™ä½ï¼Œä»è€Œæœ‰æ›´å¤§é¢ç§¯çš„å±•ç¤ºã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528399-1265943498.png)

è®¡ç®—æ¯ä¸€ä¸ªå¡ç‰‡çš„åç§»é‡ï¼Œå¡ç‰‡çš„å¤§å°éšåç§»é‡æˆæ­£æ¯”ï¼Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528322-664245179.gif)

æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å‡ å¼ Appæˆªå›¾ä»£æ›¿é¢œè‰²äº¤æ›¿çš„å¡ç‰‡å¹¶èµ‹äºˆå…¶åŠ¨æ•ˆã€‚

åˆ›å»ºå¸ƒå±€
----

æ–°å»º.NET MAUIé¡¹ç›®ï¼Œå‘½å`MultitaskingCardList`ã€‚å°†ç•Œé¢å›¾ç‰‡èµ„æºæ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®\\Resources\\Imagesä¸­å¹¶å°†ä»–ä»¬åŒ…å«åœ¨MauiImageèµ„æºæ¸…å•ä¸­ã€‚

    <MauiImage Include="Resources\Images\*" />
    

åœ¨MainPage.xamlä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ¨ªå‘StackLayoutä½œä¸ºAppåå°ä»»åŠ¡å¡ç‰‡å®¹å™¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç»‘å®šé›†åˆçš„æ–¹å¼ï¼Œå°†Appåå°ä»»åŠ¡æ·»åŠ åˆ°è¿™ä¸ªå®¹å™¨ä¸­ã€‚

ä»£ç å¦‚ä¸‹ï¼š

    <StackLayout Orientation="Horizontal"
        BindingContextChanged="BoxLayout_BindingContextChanged"
        x:Name="BoxLayout"
        BindableLayout.ItemsSource="{Binding AppTombStones}">
    

å®ƒçš„DataTemplateä»£è¡¨ä¸€ä¸ªAppåå°ä»»åŠ¡ï¼Œä½¿ç”¨Gridå¸ƒå±€ï¼ŒAppçš„æˆªå›¾ä¸åç§°åˆ†åˆ«ä½äºGridçš„ç¬¬äºŒè¡Œå’Œç¬¬ä¸€è¡Œã€‚

    <BindableLayout.ItemTemplate>
        <DataTemplate>
            <Grid Style="{StaticResource BoxFrameStyle}" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>
                <Label Margin="25,0,0,0" TranslationY="30"  Text="{Binding AppName}" VerticalOptions="End"></Label>
                <Image  Aspect="AspectFill"
                        Grid.Row="1"
                        HeightRequest="550"
                        WidthRequest="250"
                        Source="{Binding AppScreen}">           
                </Image>
    
            </Grid>
        </DataTemplate>
    </BindableLayout.ItemTemplate>
    

å¯¹å¡ç‰‡Gridçš„æ ·å¼è¿›è¡Œå®šä¹‰ï¼š

å®½åº¦300ï¼Œé«˜åº¦550ï¼Œå·¦è¾¹è·-220ï¼Œè¿™ä½¿å¾—å±å¹•åŒºåŸŸèŒƒå›´å†…æœ‰å¤§æ¦‚5-6ä¸ªå¡ç‰‡å¯è§ã€‚

    <ContentPage.Resources>
        <Style TargetType="Grid"
                x:Key="BoxFrameStyle">
    
            <Setter Property="WidthRequest"
                    Value="300"></Setter>
            <Setter Property="Margin"
                    Value="0,0,-220,0"></Setter>
            <Setter Property="AnchorX"
                    Value="0"></Setter>
        </Style>
    </ContentPage.Resources>
    

æ•ˆæœå¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528491-526330436.png)

åˆ›å»ºåˆ†å¸ƒå‡½æ•°
------

ä¸ºäº†å¿«é€Ÿæ˜ å°„ä½ç½®ä¸åç§»é‡ï¼Œæˆ‘ä»¬åœ¨é¡µé¢åŠ è½½æ—¶è®¡ç®—å‡ºè´å¡å°”å‡½æ•°æ›²çº¿ä¸Šçš„ç¦»æ•£ç‚¹

äºŒé˜¶è´å¡å°”æ›²çº¿ç”±ä¸‰ä¸ªç‚¹ç¡®å®šï¼Œåˆ†åˆ«æ˜¯ï¼š  
èµ·å§‹ç‚¹ã€ç»ˆæ­¢ç‚¹ï¼ˆä¹Ÿç§°é”šç‚¹ï¼‰ã€æ§åˆ¶ç‚¹

BezierSegmentså¯¹è±¡å°†æè¿°4æ®µè¿ç»­çš„ï¼Œé¦–å°¾ç›¸è¿çš„äºŒé˜¶è´å¡å°”æ›²çº¿

åœ¨MainPage.xaml.csä¸­è®¢é˜…é¡µé¢åŠ è½½å®Œæ¯•äº‹ä»¶PageLoadedï¼Œåœ¨äº‹ä»¶æ–¹æ³•ä¸­ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š

    var p0 = new Point(0, 1);
    var p1 = new Point(0.1, 0.9988);
    var p2 = new Point(0.175, 0.9955);
    
    
    var p3 = new Point(0.4, 0.99);
    var p4 = new Point(0.575, 0.92);
    var p5 = new Point(0.7, 0.88);
    
    var p6 = new Point(0.775, 0.71);
    var p7 = new Point(0.9, 0.4);
    var p8 = new Point(1, 0);
    
    this.BezierSegments = new Point[][] {
    
        new Point[]{p0,p1,p2},
        new Point[]{p2,p3,p4},
        new Point[]{p4,p5,p6},
        new Point[]{p6,p7,p8}
    };
    

bezeirPointSubdivs,æ ‡ç¤ºè´å¡å°”æ›²çº¿ä¸Šç‚¹çš„æ•°é‡ï¼Œå€¼è¶Šå¤§ï¼Œæ›²çº¿è¶Šå¹³æ»‘ï¼Œä½†è®¡ç®—é‡ä¹Ÿè¶Šå¤§ï¼Œè¿™é‡Œå–999

    var bezeirPointSubdivs = 999;
    

æ ¹æ®äºŒé˜¶è´å¡å°”å‡½æ•°å¼ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528431-213552061.png)

å°†ç‚¹åæ ‡å¸¦å…¥è¡¨è¾¾å¼ï¼Œåˆ™å¯ä»¥å¾—å‡ºè¾“å…¥è¾“å‡ºå€¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œä»£ç å¦‚ä¸‹ï¼š

Xè½´åæ ‡

    var bezeirPointX = Math.Pow(1 - (double)j / bezeirPointSubdivs, 2) * BezierSegments[i][0].X + 2 * (double)j / bezeirPointSubdivs * (1 - (double)j / bezeirPointSubdivs) * BezierSegments[i][1].X + Math.Pow((double)j / bezeirPointSubdivs, 2) * BezierSegments[i][2].X;
    
    

Yè½´åæ ‡ï¼š

    var bezeirPointY = Math.Pow(1 - (double)j / bezeirPointSubdivs, 2) * BezierSegments[i][0].Y + 2 * (double)j / bezeirPointSubdivs * (1 - (double)j / bezeirPointSubdivs) * BezierSegments[i][1].Y + Math.Pow((double)j / bezeirPointSubdivs, 2) * BezierSegments[i][2].Y;
    
    

å¯¹æ¯ä¸€æ®µçš„è´å¡å°”æ›²çº¿è®¡ç®—ï¼Œæ‹Ÿåˆå‡ºä¸€æ¡å®Œæ•´æ›²çº¿  
è®¡ç®—è€Œå¾—çš„ç¦»æ•£ç‚¹å­˜å…¥`BezeirPoints`ï¼Œä»£ç å¦‚ä¸‹ï¼š

    for (int i = 0; i < this.BezierSegments.Length; i++)
        {
            for (int j = 0; j < bezeirPointSubdivs; j++)
            {
                var bezeirPointX = Math.Pow(1 - (double)j / bezeirPointSubdivs, 2) * BezierSegments[i][0].X + 2 * (double)j / bezeirPointSubdivs * (1 - (double)j / bezeirPointSubdivs) * BezierSegments[i][1].X + Math.Pow((double)j / bezeirPointSubdivs, 2) * BezierSegments[i][2].X;
                var bezeirPointY = Math.Pow(1 - (double)j / bezeirPointSubdivs, 2) * BezierSegments[i][0].Y + 2 * (double)j / bezeirPointSubdivs * (1 - (double)j / bezeirPointSubdivs) * BezierSegments[i][1].Y + Math.Pow((double)j / bezeirPointSubdivs, 2) * BezierSegments[i][2].Y;
                BezeirPoints.Add(new Point(bezeirPointX, bezeirPointY));
    
            }
        }
    

æˆ‘ä»¬ä½¿ç”¨çº¿æ€§æ’å€¼æ³•(linear interpolation)ï¼Œè®¡ç®—å¹³ç§»æ‰‹åŠ¿è¿›åº¦ï¼Œå¡ç‰‡çš„åˆ†å¸ƒåç§»é‡ä»¥åŠå¤§å°ç­‰å€¼ã€‚

çº¿æ€§æ’å€¼æ³•æ˜¯æŒ‡ä½¿ç”¨è¿æ¥ä¸¤ä¸ªå·²çŸ¥é‡çš„ç›´çº¿æ¥ç¡®å®šåœ¨è¿™ä¸¤ä¸ªå·²çŸ¥é‡ä¹‹é—´çš„ä¸€ä¸ªæœªçŸ¥é‡çš„å€¼çš„æ–¹æ³•ã€‚å…·ä½“è¯·å‚è€ƒ[è¿™é‡Œ](https://wiki.mbalib.com/wiki/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E6%B3%95)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528371-1369707238.jpg)

å‡è®¾æˆ‘ä»¬å·²çŸ¥åæ ‡(x0,y0)ä¸(x1,y1),è¦å¾—åˆ°\[x0,x1\]åŒºé—´å†…æŸä¸€ä½ç½®xåœ¨ç›´çº¿ä¸Šçš„å€¼ã€‚æ ¹æ®å›¾ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬å¾—åˆ°ä¸¤ç‚¹å¼ç›´çº¿æ–¹ç¨‹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528428-598099398.png)

åˆ›å»ºè°ƒåˆ¶æ–¹æ³•Modulateï¼Œä»£ç å¦‚ä¸‹

    public double Modulate(double value, double[] source, double[] target)
    {
        if (source.Length != 2 || target.Length != 2)
        {
            throw new ArgumentOutOfRangeException();
        }
    
        var start = source[0];
        var end = source[1];
        var targetStart = target[0];
        var targetEnd = target[1];
        if (value < start || value > end)
        {
            return value;
        }
        var k = (value - start) / (end - start);
        var result = k * (targetEnd - targetStart) + targetStart;
        return result;
    }
    

åˆ›å»ºåŠ¨æ•ˆ
----

æˆ‘ä»¬å°†ä¸ºAppåå°ä»»åŠ¡å®¹å™¨åˆ›å»ºå¹³ç§»æ‰‹åŠ¿ï¼Œå®ç°å„ä¸ªå¡ç‰‡çš„æ»šåŠ¨åŠ¨æ•ˆï¼Œå½“ç”¨æˆ·æŒ‡å°–åœ¨å±å¹•æ°´å¹³æ–¹å‘ä¸Šæ»‘åŠ¨æ—¶ï¼Œå¡ç‰‡å†…å®¹ä¹Ÿåº”è¯¥éšä¹‹æ¨ªå‘æ»šåŠ¨ã€‚

åŸæœ¬çš„å®ç°æ–¹å¼æ˜¯æ§ä»¶è‡ªç›‘å¬å¹³ç§»(Pan)äº‹ä»¶ï¼Œé€šè¿‡xè½´æ–¹å‘çš„å¹³ç§»åç§»é‡ï¼Œè®¡ç®—å¡ç‰‡å®¹å™¨ä¸­å„ä¸ªå¡ç‰‡çš„åç§»é‡ï¼Œä»è€Œå®ç°å¡ç‰‡æ»šåŠ¨åŠ¨æ•ˆã€‚ä½†å¹³ç§»è¿‡åçš„æƒ¯æ€§æ»‘åŠ¨è¦è‡ªè¡Œè®¡ç®—ï¼Œæ»‘åŠ¨æ‰‹æ„Ÿä¸å¤Ÿæµç•…ï¼Œæœ€ç»ˆæ•ˆæœå¹¶ä¸ç†æƒ³ï¼Œå› æ­¤æ”¹ç”¨MAUIçš„[ScrollViewæ§ä»¶](https://learn.microsoft.com/zh-cn/dotnet/maui/user-interface/controls/scrollview?view=net-maui-7.0)ä½œä¸ºæ»šåŠ¨æ¡†æ¶

å› æ­¤æ»šåŠ¨è¡Œä¸ºï¼ˆæ»šåŠ¨é˜»å°¼ï¼Œæ»šåŠ¨æƒ¯æ€§ç­‰ï¼‰ç”±å„å¹³å°çš„åŸç”Ÿä»£ç å®ç°ã€‚

    <ScrollView x:Name="MainScroller"
        Background="Transparent"
        Orientation="Horizontal"
        Scrolled="ScrollView_Scrolled">
    
        <!--Appåå°ä»»åŠ¡å¡ç‰‡å®¹å™¨-->
        <StackLayout>...</StackLayout>
    
    
    </ScrollView> 
    

æ•ˆæœå¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528617-1393854723.gif)

åˆ›å»ºRenderTransformæ–¹æ³•ï¼Œå®ç°å¡ç‰‡çš„å¹³ç§»ï¼Œç¼©æ”¾ï¼Œé€æ˜åº¦ç­‰åŠ¨æ•ˆã€‚  
relativeOffsetXä¸ºå¡ç‰‡å»é™¤äº†æ»šåŠ¨çš„å½±å“ï¼Œç›¸å¯¹äºå±å¹•çš„Xæ–¹å‘ä½ç½®ã€‚å³ç›¸ä½ç½®

é€šè¿‡éå†BoxLayoutä¸­çš„å„å¡ç‰‡ç›¸å¯¹ä½ç½®è®¡ç®—è¿›åº¦å€¼progress

å†é€šè¿‡è°ƒåˆ¶æ–¹æ³•Modulateï¼Œè®¡ç®—å¡ç‰‡çš„ç¼©æ”¾ï¼Œé€æ˜åº¦ï¼Œåç§»é‡ç­‰å€¼ã€‚

    private void RenderTransform(double scrollX)
    {
        var layoutWidth = this.MainLayout.DesiredSize.Width;
        if (this.BezeirPoints == null)
        {
            return;
        }
        foreach (var item in this.BoxLayout.Children)
        {
            if (item is VisualElement)
            {
                var relativeOffsetX = (item as VisualElement).X-scrollX;
                var progress = this.Modulate(relativeOffsetX, new double[] { 0, layoutWidth }, new double[] { 0, 1 });
                (item as VisualElement).ScaleTo(Modulate(progress, new double[] { 0, 1 }, new double[] { 0.72, 0.84 }), 0);
                (item as VisualElement).FadeTo(Modulate(progress, new double[] { 0.2, 0.54 }, new double[] { 0, 1 }), 0);
                var modulatedX = Modulate(1 - GetMappingY(progress), new double[] { 0, 1 }, new double[] { 0, layoutWidth });
                var offsetX = modulatedX - relativeOffsetX;
                (item as VisualElement).TranslateTo(offsetX, 0, 0);
            }
        }
    }
    
    

é™æ€æ•ˆæœå¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528444-684561099.png)

RenderTransformæ–¹æ³•çš„å½¢å‚scrollXä¸ºæ»šåŠ¨æ¡†æ¶çš„æ»šåŠ¨åç§»é‡ï¼Œå³MainScroller.ScrollXã€‚

è®¢é˜…æ»šåŠ¨äº‹ä»¶Scrolledï¼Œåœ¨äº‹ä»¶æ–¹æ³•ä¸­è°ƒç”¨RenderTransformã€‚ä»£ç å¦‚ä¸‹ï¼š

    private void ScrollView_Scrolled(object sender, ScrolledEventArgs e)
    {
        RenderTransform(e.ScrollX);
    }
    

åˆ›å»ºç»‘å®šæ•°æ®
------

åˆ›å»ºMainPageViewModel.csï¼Œç”¨äºç•Œé¢ç»‘å®šæ•°æ®æºã€‚

AppTombStoneæè¿°Appè¿›å…¥åå°æ—¶çš„çŠ¶æ€ï¼ˆå¢“ç¢‘æœºåˆ¶ï¼‰

    public class AppTombStone
    {
        public AppTombStone() { }
    
        public string AppName { get; set; }
        public string AppScreen { get; set; }
        public double TestOffset { get; set; }
    }
    

åœ¨MainPageViewModelæ„é€ å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–AppTombStoneåˆ—è¡¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

    public class MainPageViewModel : INotifyPropertyChanged
    {
        public MainPageViewModel()
        {
            var list = new List<AppTombStone>
            {
                new AppTombStone() { AppName="Edge", AppScreen= "p1.png",TestOffset=0},
                new AppTombStone() { AppName="Map", AppScreen= "p2.png",TestOffset=-10 },
                new AppTombStone() { AppName="Photo", AppScreen= "p3.png",TestOffset=-70 },
                new AppTombStone() { AppName="App Store", AppScreen= "p4.png" ,TestOffset=-90},
                new AppTombStone() { AppName="Calculator", AppScreen= "p5.png",TestOffset=-70 },
                new AppTombStone() { AppName="Music", AppScreen= "p6.png" ,TestOffset=-30},
                new AppTombStone() { AppName="File", AppScreen= "p7.png" },
                new AppTombStone() { AppName="Note", AppScreen= "p8.png" },
                new AppTombStone() { AppName="Paint", AppScreen= "p9.png" },
                new AppTombStone() { AppName="Weather", AppScreen= "p10.png" },
                new AppTombStone() { AppName="Chrome", AppScreen= "p11.png" },
                new AppTombStone() { AppName="Book", AppScreen= "p12.png" },
                new AppTombStone() { AppName="Browser", AppScreen= "p13.png" }
            };
    
            AppTombStones = new ObservableCollection<AppTombStone>(list);
        }
    

ç»†èŠ‚è°ƒæ•´
----

### é¦–å¼ å¡ç‰‡çš„å¤„ç†

è¿™é‡Œé‡åˆ°ä¸ªé—®é¢˜ï¼Œå½“æ»šåŠ¨æ¡†æ¶æ»šåŠ¨åˆ°æœ€å·¦ä¾§æ—¶ï¼Œæœ€ä¸‹æ–¹çš„å¡ç‰‡ä¼šè¢«å å±‚ä¸Šæ–¹çš„å¡ç‰‡è¦†ç›–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528467-1549333564.png)

å½“æ»šåŠ¨æ¡†æ¶æ»šåŠ¨åˆ°æœ€å·¦ä¾§æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é¦–å¼ å¡ç‰‡ä¸è¢«ä¸Šæ–¹çš„å¡ç‰‡è¦†ç›–ï¼Œé‚£ä¹ˆå®ƒè‡³å°‘åº”å½“æ»šåŠ¨åˆ°å±å¹•çš„ä¸­éƒ¨ï¼Œå› æ­¤éœ€è¦åŠ ä¸€ä¸ªè™šæ‹Ÿçš„BoxViewå°†é¦–å¼ å¡å‰çš„ç©ºé—´â€œæ’‘èµ·æ¥â€ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528748-1032018662.gif)

è®¢é˜…BoxViewçš„BindingContextChangedäº‹ä»¶ï¼Œåœ¨äº‹ä»¶æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 

    private void BoxLayout_BindingContextChanged(object sender, EventArgs e)
        {
            this.BoxLayout.Children.Insert(0, new BoxView()
            {
                WidthRequest=300,
                HeightRequest=500,
                BackgroundColor=Colors.Red
            });
        }
    

æ•ˆæœï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214528436-1503387327.png)

### ä¸ºå¡ç‰‡æ·»åŠ è£å‰ª

ä½¿ç”¨Image.Clipå’ŒImage.Shadowå±æ€§ï¼Œä¸ºå¡ç‰‡æ·»åŠ åœ†è§’è£å‰ªå’Œé˜´å½±æ•ˆæœã€‚

    <Image  Aspect="AspectFill"
            Grid.Row="1"
            HeightRequest="550"
            WidthRequest="250"
            Source="{Binding AppScreen}">
        <Image.Clip>
            <RoundRectangleGeometry
                CornerRadius="20"
                Rect="0,20,250,480">
            </RoundRectangleGeometry>
        </Image.Clip>
        <Image.Shadow>
            <Shadow Brush="Black"
                    Radius="40"
                    Offset="-20,0"
                    Opacity="0.3" />
        </Image.Shadow>
    </Image>
    

### è·³è½¬åˆ°æœ€åä¸€å¼ å¡ç‰‡

Appåå°ä»»åŠ¡æ˜¯ä»å³åˆ°å·¦æ’åˆ—çš„ï¼Œå› æ­¤åœ¨Appå¯åŠ¨æ—¶ï¼Œéœ€è¦å°†æ»šåŠ¨æ¡†æ¶æ»šåŠ¨åˆ°æœ€åä¸€å¼ å¡ç‰‡ï¼Œä»£ç å¦‚ä¸‹ï¼š

    private async void ContentPage_SizeChanged(object sender, EventArgs e)
    {
        var layoutWidth = this.MainLayout.DesiredSize.Width;
    
        var scrollY = this.MainScroller.ScrollY;
        var posX = this.MainScroller.ContentSize.Width-layoutWidth;
        await this.MainScroller.ScrollToAsync(posX, scrollY, false).ContinueWith((t) =>
        {
            RenderTransform(this.MainScroller.ScrollX);
        });
    
    }
    

æœ€ç»ˆæ•ˆæœï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/644861/202305/644861-20230502214529013-192197505.gif)

é¡¹ç›®åœ°å€
----

[Github:maui-samples](https://github.com/jevonsflash/maui-samples)

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[æ—æ™“lx](https://www.cnblogs.com/jevonsflash/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/jevonsflash/p/17368362.html](https://www.cnblogs.com/jevonsflash/p/17368362.html)