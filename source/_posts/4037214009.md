---
layout: post
title: "ã€vue3-element-admin ã€‘åŸºäº Vue3 + Vite4 + TypeScript + Element-Plus ä»0åˆ°1æ­å»ºåå°ç®¡ç†ç³»ç»Ÿï¼ˆå‰åç«¯å¼€æº@æœ‰æ¥å¼€æºç»„ç»‡ï¼‰"
date: "2023-04-21T01:05:18.895Z"
---
ã€vue3-element-admin ã€‘åŸºäº Vue3 + Vite4 + TypeScript + Element-Plus ä»0åˆ°1æ­å»ºåå°ç®¡ç†ç³»ç»Ÿï¼ˆå‰åç«¯å¼€æº@æœ‰æ¥å¼€æºç»„ç»‡ï¼‰
===========================================================================================

![ã€vue3-element-admin ã€‘åŸºäº Vue3 + Vite4 + TypeScript + Element-Plus ä»0åˆ°1æ­å»ºåå°ç®¡ç†ç³»ç»Ÿï¼ˆå‰åç«¯å¼€æº@æœ‰æ¥å¼€æºç»„ç»‡ï¼‰](https://img2023.cnblogs.com/blog/675291/202304/675291-20230419081927567-1500170041.png) æœ¬ç¯‡é€šè¿‡ä¸‡å­—é•¿æ–‡è¯¦ç»†ä»‹ç» vue3-element-admin v2 ç‰ˆæœ¬ä» 0 åˆ° 1ï¼Œç›¸è¾ƒäºv1ç‰ˆæœ¬å¢åŠ äº†å¯¹åŸå­CSS(UnoCSS)ã€æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ã€æš—é»‘æ¨¡å¼ç­‰åŠŸèƒ½çš„æ”¯æŒä»¥åŠé‡æ„ä¼˜åŒ–ã€‚v2 ç‰ˆæœ¬å‘å¸ƒä¹Ÿæ ‡å¿—ç€æœ‰æ¥å¼€æºç»„ç»‡çš„ SpringBoot3 + Vue3 å‰åç«¯åˆ†ç¦»å¼€æºé¡¹ç›®åˆ°è¾¾æ–°çš„é‡Œç¨‹ç¢‘ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å„ä½é“å‹ï¼

> [vue3-element-admin](https://gitee.com/youlaiorg/vue3-element-admin) æ˜¯åŸºäº [vue-element-admin](https://panjiachen.gitee.io/vue-element-admin/) å‡çº§çš„ Vue3 + Element Plus ç‰ˆæœ¬çš„åå°ç®¡ç†å‰ç«¯è§£å†³æ–¹æ¡ˆï¼ŒæŠ€æœ¯æ ˆä¸º Vue3 + Vite4 + TypeScript + Element Plus + Pinia + Vue Router ç­‰å½“å‰ä¸»æµæ¡†æ¶ã€‚
> 
> ç›¸è¾ƒäºå…¶ä»–ç®¡ç†å‰ç«¯æ¡†æ¶ï¼Œvue3-element-admin çš„ä¼˜åŠ¿åœ¨äº**ä¸€æœ‰ä¸€æ— ** (æœ‰é…å¥—åç«¯ã€æ— å¤æ‚å°è£…)ï¼š
> 
> *   é…å¥—å®Œæ•´ [Java åç«¯](https://gitee.com/youlaiorg/youlai-boot) æƒé™ç®¡ç†æ¥å£ï¼Œå¼€ç®±å³ç”¨ï¼Œæä¾› [OpenAPI æ–‡æ¡£](http://vapi.youlai.tech/v3/api-docs) æ­é… Apifox ç”Ÿæˆ Nodeã€Pythonã€Goç­‰å…¶ä»–æœåŠ¡ç«¯ä»£ç ï¼›
>     
> *   å®Œå…¨åŸºäº [vue-element-admin](https://panjiachen.gitee.io/vue-element-admin/) å‡çº§çš„ Vue3 ç‰ˆæœ¬ï¼Œæ²¡æœ‰å¯¹æ¡†æ¶(Element Plus)çš„ç»„ä»¶å†å°è£…ï¼Œä¸Šæ‰‹æˆæœ¬ä½å’Œæ‰©å±•æ€§é«˜ã€‚
>     

å‰è¨€
--

æœ¬ç¯‡æ˜¯ vue3-element-admin v2.x ç‰ˆæœ¬ä» 0 åˆ° 1ï¼Œç›¸è¾ƒäº [v1.x ç‰ˆæœ¬](https://blog.csdn.net/u013737132/article/details/124522947) ä¸»è¦å¢åŠ äº†å¯¹åŸå­CSS(UnoCSS)ã€æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ã€æš—é»‘æ¨¡å¼çš„æ”¯æŒã€‚

é˜…è¯»å‰çš„ä¸¤æ¡å£°æ˜ï¼š

*   åšå®¢æœ‰æ—¶æ•ˆæ€§ï¼Œæºä»£ç ä¼šä¸€ç›´æ›´æ–°ï¼Œæœ¬ç¯‡æºç  `tag` ç‰ˆæœ¬ [vue3-element-admin v2.2.0](https://gitee.com/youlaiorg/vue3-element-admin/releases/tag/v2.2.0) ï¼›
    
*   å„ç« èŠ‚ä¼šæœ‰å…ˆåé¡ºåºä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ï¼šå®‰è£… Element Plus éœ€è¦å…ˆå®‰è£…è‡ªåŠ¨å¯¼å…¥ç­‰ï¼Œå»ºè®®æŒ‰ç…§é¡ºåºå®Œæˆ0åˆ°1ï¼Œå½“ç„¶ä¹Ÿå¯å„å–æ‰€éœ€ã€‚
    

é¡¹ç›®é¢„è§ˆ
----

**åœ¨çº¿é¢„è§ˆ**

[http://vue3.youlai.tech/](http://vue3.youlai.tech/)

**é¦–é¡µæ§åˆ¶å°**

![æ˜äº®æ¨¡å¼](https://s2.loli.net/2023/03/26/oltnAHfFcbw18GL.png)

![æš—é»‘æ¨¡å¼](https://s2.loli.net/2023/04/21/eAqX7sFbgOzJHVC.png)

**æ¥å£æ–‡æ¡£**

![æ¥å£æ–‡æ¡£](https://s2.loli.net/2023/04/21/WDt7jTHnIyxkQvf.png)

**æƒé™ç®¡ç†ç³»ç»Ÿ**

![ç”¨æˆ·ç®¡ç†](https://s2.loli.net/2023/03/13/L9xgT5sSMVZukQj.png)

![è§’è‰²ç®¡ç†](https://s2.loli.net/2023/03/13/nQg6HmrtFUkPDYv.png)

![èœå•ç®¡ç†](https://s2.loli.net/2023/03/13/C4fDRJeTuUO7gPI.png)

![å­—å…¸ç®¡ç†](https://s2.loli.net/2023/03/13/BzqjHpa64wfeWhE.png)

**æ‰©å±•ç”Ÿæ€**

[youlai-mall](https://gitee.com/haoxr/collections/250451) æœ‰æ¥å¼€æºå•†åŸï¼šSpring Cloudå¾®æœåŠ¡+ vue3-element-admin+uni-app

youlai-mall å•†å“ç®¡ç†

mall-app ç§»åŠ¨ç«¯

![](https://s2.loli.net/2023/04/21/z8mCoyu3q4wXcBJ.png)

![](https://s2.loli.net/2023/04/21/3gGM2F9om4RkVtq.png)

é¡¹ç›®æŒ‡å—
----

### åŠŸèƒ½æ¸…å•

![](https://s2.loli.net/2023/02/24/djxsAKWqzJyl9BG.png)

### æŠ€æœ¯æ ˆ&å®˜ç½‘

**æŠ€æœ¯æ ˆ**

**æè¿°**

**å®˜ç½‘**

Vue3

æ¸è¿›å¼ JavaScript æ¡†æ¶

[https://cn.vuejs.org/](https://cn.vuejs.org/)

Element Plus

åŸºäº Vue 3ï¼Œé¢å‘è®¾è®¡å¸ˆå’Œå¼€å‘è€…çš„ç»„ä»¶åº“

[https://element-plus.gitee.io/zh-CN/](https://element-plus.gitee.io/zh-CN/)

Vite

å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·

[https://cn.vitejs.dev/](https://cn.vitejs.dev/guide/)

TypeScript

å¾®è½¯æ–°æ¨å‡ºçš„ä¸€ç§è¯­è¨€ï¼Œæ˜¯ JavaScript çš„è¶…é›†

[https://www.tslang.cn/](https://www.tslang.cn/)

Pinia

æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†å·¥å…·

https://pinia.vuejs.org/

Vue Router

Vue.js çš„å®˜æ–¹è·¯ç”±

[https://router.vuejs.org/zh/](https://router.vuejs.org/zh/)

wangEditor

Typescript å¼€å‘çš„ Web å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

[https://www.wangeditor.com/](https://www.wangeditor.com/)

Echarts

ä¸€ä¸ªåŸºäº JavaScript çš„å¼€æºå¯è§†åŒ–å›¾è¡¨åº“

[https://echarts.apache.org/zh/](https://echarts.apache.org/zh/)

vue-i18n

Vue å›½é™…åŒ–å¤šè¯­è¨€æ’ä»¶

[https://vue-i18n.intlify.dev/](https://vue-i18n.intlify.dev/)

VueUse

åŸºäºVueç»„åˆå¼APIçš„å®ç”¨å·¥å…·é›†(ç±»æ¯”HuToolå·¥å…·)

[http://www.vueusejs.com/](http://www.vueusejs.com/guide/)

### å‰/åç«¯æºç 

Gitee

Github

å‰ç«¯

[vue3-element-admin](https://gitee.com/youlaiorg/vue3-element-admin)

[vue3-element-admin](https://github.com/youlaitech/vue3-element-admin)

åç«¯

[youlai-boot](https://gitee.com/youlaiorg/youlai-boot)

[youlai-boot](https://github.com/hxrui/youlai-boot)

### æ¥å£æ–‡æ¡£

*   æ¥å£è°ƒç”¨åœ°å€ï¼š[https://vapi.youlai.tech](https://vapi.youlai.tech)
*   æ¥å£æ–‡æ¡£åœ°å€ï¼š[åœ¨çº¿æ¥å£æ–‡æ¡£](https://www.apifox.cn/apidoc/shared-195e783f-4d85-4235-a038-eec696de4ea5)
*   OpenAPI 3.0 æ–‡æ¡£åœ°å€ï¼š[http://vapi.youlai.tech/v3/api-docs](http://vapi.youlai.tech/v3/api-docs)

ç¯å¢ƒå‡†å¤‡
----

åç§°

å¤‡æ³¨

**å¼€å‘å·¥å…·**

VSCode [ä¸‹è½½](https://code.visualstudio.com/Download)

\-

**è¿è¡Œç¯å¢ƒ**

Node 16+ [ä¸‹è½½](http://nodejs.cn/download)

![image-20230224222640120](https://s2.loli.net/2023/02/24/bhL76JNxvKGCEVP.png)

**VSCodeæ’ä»¶(å¿…è£…)**

æ’ä»¶å¸‚åœºæœç´¢ `Vue Language Features (Volar)` å’Œ `TypeScript Vue Plugin (Volar)` å®‰è£…ï¼Œä¸”ç¦ç”¨ Vetur

![image-20230224222541797](https://s2.loli.net/2023/02/24/Qt4XDGHFOWqfsyB.png)

é¡¹ç›®åˆå§‹åŒ–
-----

æŒ‰ç…§ [ğŸƒVite å®˜æ–¹æ–‡æ¡£ - æ­å»ºç¬¬ä¸€ä¸ª Vite é¡¹ç›®](https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project) è¯´æ˜ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®Œæˆ `vue` ã€`typescirpt` æ¨¡æ¿é¡¹ç›®çš„åˆå§‹åŒ–

     npm init vite@latest vue3-element-admin --template vue-ts
    

*   **`vue3-element-admin`**: è‡ªå®šä¹‰çš„é¡¹ç›®åç§°
    
*   **`vue-ts`** ï¼š `vue` + `typescript` æ¨¡æ¿çš„æ ‡è¯†ï¼ŒæŸ¥çœ‹ [create-vite](https://github.com/vitejs/vite/tree/main/packages/create-vite) ä»¥è·å–æ¯ä¸ªæ¨¡æ¿çš„æ›´å¤šç»†èŠ‚ï¼švueï¼Œvue-tsï¼Œreactï¼Œreact-ts
    

![](https://s2.loli.net/2023/02/09/Hn6f84PMN9CJrso.png)

åˆå§‹åŒ–å®Œæˆé¡¹ç›®ä½äº `D:\project\demo\vue3-element-admin` , ä½¿ç”¨ VSCode å¯¼å…¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š

    npm install
    npm run dev
    

![](https://s2.loli.net/2023/02/09/J5oLj4Sf9hHDgPv.png)

æµè§ˆå™¨è®¿é—® [localhost:5173](http://localhost:5173) é¢„è§ˆ

![](https://s2.loli.net/2023/02/09/U7xGZeWbFIvEgQY.png)

è·¯å¾„åˆ«åé…ç½®
------

> ç›¸å¯¹è·¯å¾„åˆ«åé…ç½®ï¼Œä½¿ç”¨ @ ä»£æ›¿ src

**Vite é…ç½®**

![](https://s2.loli.net/2023/02/15/WrYa6gQG23fN14F.png)

**TypeScirpt ç¼–è¯‘å™¨é…ç½®**

    // tsconfig.json
    "compilerOptions": {
        ...
        "baseUrl": "./", // è§£æéç›¸å¯¹æ¨¡å—çš„åŸºåœ°å€ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•
        "paths": { // è·¯å¾„æ˜ å°„ï¼Œç›¸å¯¹äºbaseUrl
        	"@/*": ["src/*"] 
        }
    }
    

**è·¯å¾„åˆ«åä½¿ç”¨**

    // src/App.vue
    import HelloWorld from '/src/components/HelloWorld.vue'
    						â†“
    import HelloWorld from '@/components/HelloWorld.vue'
    

![](https://s2.loli.net/2023/02/14/zNsmC7erXwHDlMi.png)

å®‰è£…è‡ªåŠ¨å¯¼å…¥
------

> Element Plus å®˜æ–¹æ–‡æ¡£ä¸­æ¨è `æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥` çš„æ–¹å¼ï¼Œè€Œæ­¤éœ€è¦ä½¿ç”¨é¢å¤–çš„æ’ä»¶ `unplugin-auto-import` å’Œ `unplugin-vue-components` æ¥å¯¼å…¥è¦ä½¿ç”¨çš„ç»„ä»¶ã€‚æ‰€ä»¥åœ¨æ•´åˆ `Element Plus` ä¹‹å‰å…ˆäº†è§£ä¸‹`è‡ªåŠ¨å¯¼å…¥`çš„æ¦‚å¿µå’Œä½œç”¨

**æ¦‚å¿µ**

ä¸ºäº†é¿å…åœ¨å¤šä¸ªé¡µé¢é‡å¤å¼•å…¥ `API` æˆ– `ç»„ä»¶`ï¼Œç”±æ­¤è€Œäº§ç”Ÿçš„è‡ªåŠ¨å¯¼å…¥æ’ä»¶æ¥èŠ‚çœé‡å¤ä»£ç å’Œæé«˜å¼€å‘æ•ˆç‡ã€‚

æ’ä»¶

æ¦‚å¿µ

è‡ªåŠ¨å¯¼å…¥å¯¹è±¡

unplugin-auto-import

æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥API

refï¼Œreactive,watch,computed ç­‰API

unplugin-vue-components

æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ç»„ä»¶

Element Plus ç­‰ä¸‰æ–¹åº“å’ŒæŒ‡å®šç›®å½•ä¸‹çš„è‡ªå®šä¹‰ç»„ä»¶

çœ‹ä¸‹è‡ªåŠ¨å¯¼å…¥æ’ä»¶æœªä½¿ç”¨å’Œä½¿ç”¨çš„åŒºåˆ«ï¼š

æ’ä»¶å

æœªä½¿ç”¨è‡ªåŠ¨å¯¼å…¥

ä½¿ç”¨è‡ªåŠ¨å¯¼å…¥

unplugin-auto-import

![](https://s2.loli.net/2023/02/26/eXMRhF2iSGAj5ZL.png)

![](https://s2.loli.net/2023/02/26/IjcrXhKwHMesu3O.png)

unplugin-vue-components

![](https://s2.loli.net/2023/02/26/ePrtslLAFRK4Zdc.png)

![](https://s2.loli.net/2023/02/26/3dkYAPJC8V4SQFl.png)

**å®‰è£…æ’ä»¶ä¾èµ–**

    npm install -D unplugin-auto-import unplugin-vue-components 
    

**vite.config.ts - è‡ªåŠ¨å¯¼å…¥é…ç½®**

æ–°å»º `/src/types` ç›®å½•ç”¨äºå­˜æ”¾è‡ªåŠ¨å¯¼å…¥å‡½æ•°å’Œç»„ä»¶çš„TSç±»å‹å£°æ˜æ–‡ä»¶

    import AutoImport from "unplugin-auto-import/vite";
    import Components from "unplugin-vue-components/vite";
    
    plugins: [
      AutoImport({
        // è‡ªåŠ¨å¯¼å…¥ Vue ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šref, reactive, toRef ç­‰
        imports: ["vue"],
        eslintrc: {
          enabled: true, // æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ eslint è§„åˆ™ï¼Œå»ºè®®ç”Ÿæˆä¹‹åè®¾ç½® false 
          filepath: "./.eslintrc-auto-import.json", // æŒ‡å®šè‡ªåŠ¨å¯¼å…¥å‡½æ•° eslint è§„åˆ™çš„æ–‡ä»¶
        },
        dts: path.resolve(pathSrc, "types", "auto-imports.d.ts"), // æŒ‡å®šè‡ªåŠ¨å¯¼å…¥å‡½æ•°TSç±»å‹å£°æ˜æ–‡ä»¶è·¯å¾„
      }),
      Components({
        dts: path.resolve(pathSrc, "types", "components.d.ts"), // æŒ‡å®šè‡ªåŠ¨å¯¼å…¥ç»„ä»¶TSç±»å‹å£°æ˜æ–‡ä»¶è·¯å¾„
      }),
    ]
    

**.eslintrc.cjs - è‡ªåŠ¨å¯¼å…¥å‡½æ•° eslint è§„åˆ™å¼•å…¥**

    "extends": [
        "./.eslintrc-auto-import.json"
    ],
    

**tsconfig.json - è‡ªåŠ¨å¯¼å…¥TSç±»å‹å£°æ˜æ–‡ä»¶å¼•å…¥**

    {
      "include": ["src/**/*.d.ts"]
    }
    

**è‡ªåŠ¨å¯¼å…¥æ•ˆæœ**

è¿è¡Œé¡¹ç›® `npm run dev` è‡ªåŠ¨

![](https://s2.loli.net/2023/02/27/qYoTpIHuxrUV2CW.png)

æ•´åˆ Element Plus
---------------

å‚è€ƒï¼š [element plus æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥](https://element-plus.gitee.io/zh-CN/guide/quickstart.html#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5)

éœ€è¦å®Œæˆä¸Šé¢ä¸€èŠ‚çš„ **è‡ªåŠ¨å¯¼å…¥** çš„å®‰è£…å’Œé…ç½®

**å®‰è£… Element Plus**

    npm install element-plus
    

**å®‰è£…è‡ªåŠ¨å¯¼å…¥ Icon ä¾èµ–**

    npm i -D unplugin-icons
    

**vite.config.ts é…ç½®**

å‚è€ƒï¼š [element-plus-best-practices - vite.config.ts](https://github.com/sxzz/element-plus-best-practices/blob/main/vite.config.ts)

    // vite.config.ts
    import { ElementPlusResolver } from "unplugin-vue-components/resolvers";
    import Icons from "unplugin-icons/vite";
    import IconsResolver from "unplugin-icons/resolve
    
    export default ({ mode }: ConfigEnv): UserConfig => {
    
      return {
        plugins: [
          // ...
          AutoImport({
            // ...  
            resolvers: [
              // è‡ªåŠ¨å¯¼å…¥ Element Plus ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šElMessage, ElMessageBox... (å¸¦æ ·å¼)
              ElementPlusResolver(),
              // è‡ªåŠ¨å¯¼å…¥å›¾æ ‡ç»„ä»¶
              IconsResolver({}),
            ]
            vueTemplate: true, // æ˜¯å¦åœ¨ vue æ¨¡æ¿ä¸­è‡ªåŠ¨å¯¼å…¥
            dts: path.resolve(pathSrc, 'types', 'auto-imports.d.ts') // è‡ªåŠ¨å¯¼å…¥ç»„ä»¶ç±»å‹å£°æ˜æ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤æ ¹ç›®å½•
              
          }),
          Components({ 
            resolvers: [
              // è‡ªåŠ¨å¯¼å…¥ Element Plus ç»„ä»¶
              ElementPlusResolver(),
              // è‡ªåŠ¨æ³¨å†Œå›¾æ ‡ç»„ä»¶
              IconsResolver({
                enabledCollections: ["ep"] // element-pluså›¾æ ‡åº“ï¼Œå…¶ä»–å›¾æ ‡åº“ https://icon-sets.iconify.design/
              }),
            ],
            dts: path.resolve(pathSrc, "types", "components.d.ts"), //  è‡ªåŠ¨å¯¼å…¥ç»„ä»¶ç±»å‹å£°æ˜æ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤æ ¹ç›®å½•
          }),
          Icons({
            // è‡ªåŠ¨å®‰è£…å›¾æ ‡åº“
            autoInstall: true,
          }),
        ],
      };
    };
    
    

**ç¤ºä¾‹ä»£ç **

    <!-- src/components/HelloWorld.vue -->
    <div>
      <el-button type="success"><i-ep-SuccessFilled />Success</el-button>
      <el-button type="info"><i-ep-InfoFilled />Info</el-button>
      <el-button type="warning"><i-ep-WarningFilled />Warning</el-button>
      <el-button type="danger"><i-ep-WarnTriangleFilled />Danger</el-button>
    </div>
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/02/12/h9mYr1oxa2LgJpU.png)

æ•´åˆ SVG å›¾æ ‡
---------

> é€šè¿‡ [vite-plugin-svg-icons](https://github.com/vbenjs/vite-plugin-svg-icons) æ’ä»¶æ•´åˆ `Iconfont` ç¬¬ä¸‰æ–¹å›¾æ ‡åº“å®ç°æœ¬åœ°å›¾æ ‡

å‚è€ƒï¼š [vite-plugin-svg-icons å®‰è£…æ–‡æ¡£](https://github.com/vbenjs/vite-plugin-svg-icons/blob/main/README.zh_CN.md)

å®‰è£…ä¾èµ–

    npm install -D fast-glob@3.2.11 
    npm install -D vite-plugin-svg-icons@2.0.1 
    

åˆ›å»º `src/assets/icons` ç›®å½• , æ”¾å…¥ä» Iconfont å¤åˆ¶çš„ `svg` å›¾æ ‡

![](https://s2.loli.net/2023/02/16/mdjJaGFUsqKHknW.png)

main.ts å¼•å…¥æ³¨å†Œè„šæœ¬

    // src/main.ts
    import 'virtual:svg-icons-register';
    

vite.config.ts é…ç½®æ’ä»¶

    // vite.config.ts
    import { createSvgIconsPlugin } from 'vite-plugin-svg-icons';
    
    export default ({command, mode}: ConfigEnv): UserConfig => {
     return (
         {
             plugins: [
                 createSvgIconsPlugin({
                     // æŒ‡å®šéœ€è¦ç¼“å­˜çš„å›¾æ ‡æ–‡ä»¶å¤¹
                     iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
                     // æŒ‡å®šsymbolIdæ ¼å¼
                     symbolId: 'icon-[dir]-[name]',
                 })
             ]
         }
     )
    }
    

SVG ç»„ä»¶å°è£…

    <!-- src/components/SvgIcon/index.vue -->
    <script setup lang="ts">
    const props = defineProps({
      prefix: {
        type: String,
        default: "icon",
      },
      iconClass: {
        type: String,
        required: false,
      },
      color: {
        type: String,
      },
      size: {
        type: String,
        default: "1em",
      },
    });
    
    const symbolId = computed(() => `#${props.prefix}-${props.iconClass}`);
    </script>
    
    <template>
      <svg
        aria-hidden="true"
        class="svg-icon"
        :style="'width:' + size + ';height:' + size"
      >
        <use :xlink:href="symbolId" :fill="color" />
      </svg>
    </template>
    
    <style scoped>
    .svg-icon {
      display: inline-block;
      outline: none;
      width: 1em;
      height: 1em;
      vertical-align: -0.15em; /* å› iconå¤§å°è¢«è®¾ç½®ä¸ºå’Œå­—ä½“å¤§å°ä¸€è‡´ï¼Œè€Œspanç­‰æ ‡ç­¾çš„ä¸‹è¾¹ç¼˜ä¼šå’Œå­—ä½“çš„åŸºçº¿å¯¹é½ï¼Œæ•…éœ€è®¾ç½®ä¸€ä¸ªå¾€ä¸‹çš„åç§»æ¯”ä¾‹ï¼Œæ¥çº æ­£è§†è§‰ä¸Šçš„æœªå¯¹é½æ•ˆæœ */
      fill: currentColor; /* å®šä¹‰å…ƒç´ çš„é¢œè‰²ï¼ŒcurrentColoræ˜¯ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼å°±è¡¨ç¤ºå½“å‰å…ƒç´ çš„colorå€¼ï¼Œå¦‚æœå½“å‰å…ƒç´ æœªè®¾ç½®colorå€¼ï¼Œåˆ™ä»çˆ¶å…ƒç´ ç»§æ‰¿ */
      overflow: hidden;
    }
    </style>
    

ç»„ä»¶ä½¿ç”¨

    <!-- src/components/HelloWorld.vue -->
    <template>
     <el-button type="info"><svg-icon icon-class="block"/>SVG æœ¬åœ°å›¾æ ‡</el-button>
    </template>
    

![](https://s2.loli.net/2023/02/17/DeGXnwBRLH4hp8Z.png)

æ•´åˆ SCSS
-------

> ä¸€æ¬¾CSSé¢„å¤„ç†è¯­è¨€ï¼ŒSCSS æ˜¯ Sass 3 å¼•å…¥æ–°çš„è¯­æ³•ï¼Œå…¶è¯­æ³•å®Œå…¨å…¼å®¹ CSS3ï¼Œå¹¶ä¸”ç»§æ‰¿äº† Sass çš„å¼ºå¤§åŠŸèƒ½ã€‚

å®‰è£…ä¾èµ–

    npm i -D sass 
    

åˆ›å»º `variables.scss` å˜é‡æ–‡ä»¶ï¼Œæ·»åŠ å˜é‡ `$bg-color` å®šä¹‰ï¼Œæ³¨æ„è§„èŒƒå˜é‡ä»¥ `$` å¼€å¤´

    // src/styles/variables.scss
    $bg-color:#242424;
    

`Vite` é…ç½®å¯¼å…¥ `SCSS` å…¨å±€å˜é‡æ–‡ä»¶

    // vite.config.ts
    css: {
        // CSS é¢„å¤„ç†å™¨
        preprocessorOptions: {
            //define global scss variable
            scss: {
                javascriptEnabled: true,
                additionalData: `@use "@/styles/variables.scss" as *;`
            }
        }
    }
    

`style` æ ‡ç­¾ä½¿ç”¨`SCSS`å…¨å±€å˜é‡

    <!-- src/components/HelloWorld.vue -->
    <template>
      <div class="box" />
    </template>
    
    <style lang="scss" scoped>
    .box {
      width: 100px;
      height: 100px;
      background-color: $bg-color;
    }
    </style>
    

ä¸Šé¢å¯¼å…¥çš„ `SCSS` å…¨å±€å˜é‡åœ¨ `TypeScript` ä¸ç”Ÿæ•ˆçš„ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªä»¥ `.module.scss` ç»“å°¾çš„æ–‡ä»¶

    // src/styles/variables.module.scss
    
    // å¯¼å‡º variables.scss æ–‡ä»¶çš„å˜é‡
    :export{
        bgColor:$bg-color
    }
    

`TypeScript` ä½¿ç”¨ `SCSS` å…¨å±€å˜é‡

    <!-- src/components/HelloWorld.vue -->
    <script setup lang="ts">
      import variables from "@/styles/variables.module.scss";
      console.log(variables.bgColor)  
    </script>
    
    <template>
      <div style="width:100px;height:100px" :style="{ 'background-color': variables.bgColor }" />
    </template>
    

æ•´åˆ UnoCSS
---------

> UnoCSS æ˜¯ä¸€ä¸ªå…·æœ‰é«˜æ€§èƒ½ä¸”æå…·çµæ´»æ€§çš„å³æ—¶åŸå­åŒ– CSS å¼•æ“ ã€‚

å‚è€ƒï¼š[Vite å®‰è£… UnoCSS å®˜æ–¹æ–‡æ¡£](https://github.com/unocss/unocss/tree/main/packages/vite)

å®‰è£…ä¾èµ–

    npm install -D unocss
    

vite.config.ts é…ç½®

    // vite.config.ts
    import UnoCSS from 'unocss/vite'
    
    export default {
      plugins: [
        UnoCSS({ /* options */ }),
      ],
    }
    

`main.ts` å¼•å…¥ `uno.css`

    // src/main.ts
    import 'uno.css'
    

`VSCode` å®‰è£… `UnoCSS` æ’ä»¶

![](https://s2.loli.net/2023/02/22/L9WazROfvsIPqJB.png)

å†çœ‹ä¸‹å…·ä½“ä½¿ç”¨æ–¹å¼å’Œå®é™…æ•ˆæœï¼š

ä»£ç 

æ•ˆæœ

![](https://s2.loli.net/2023/02/22/IFdozf4xapyVEkj.png)

![image-20230222220856251](https://s2.loli.net/2023/02/22/AsL78ztlBFu5OHx.png)

å¦‚æœ`UnoCSS` æ’ä»¶æ™ºèƒ½æç¤ºä¸ç”Ÿæ•ˆï¼Œè¯·å‚è€ƒï¼š[VSCodeæ’ä»¶UnoCSSæ™ºèƒ½æç¤ºä¸ç”Ÿæ•ˆè§£å†³](https://blog.csdn.net/u013737132/article/details/129212770) ã€‚

æ•´åˆ Pinia
--------

> Pinia æ˜¯ Vue çš„ä¸“å±çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒå…è®¸ä½ è·¨ç»„ä»¶æˆ–é¡µé¢å…±äº«çŠ¶æ€ã€‚

å‚è€ƒï¼š[Pinia å®˜æ–¹æ–‡æ¡£](https://pinia.vuejs.org/zh/getting-started.html)

**å®‰è£…ä¾èµ–**

    npm install pinia
    

`main.ts` å¼•å…¥ `pinia`

    // src/main.ts
    import { createPinia } from "pinia";
    import App from "./App.vue";
    
    createApp(App).use(createPinia()).mount("#app");
    

**å®šä¹‰ Store**

æ ¹æ® [Pinia å®˜æ–¹æ–‡æ¡£-æ ¸å¿ƒæ¦‚å¿µ](https://pinia.vuejs.org/zh/core-concepts/) æè¿° ï¼ŒStore å®šä¹‰åˆ†ä¸º`é€‰é¡¹å¼`å’Œ`ç»„åˆå¼` , å…ˆæ¯”è¾ƒä¸‹ä¸¤ç§å†™æ³•çš„åŒºåˆ«ï¼š

é€‰é¡¹å¼ Option Store

ç»„åˆå¼ Setup Store

![](https://s2.loli.net/2023/02/25/nToq6WgSVvM1QxP.png)

![](https://s2.loli.net/2023/02/25/RuJ9SqtL6xCVg3Z.png)

è‡³äºå¦‚ä½•é€‰æ‹©ï¼Œå®˜æ–¹ç»™å‡ºçš„å»ºè®® ï¼š`é€‰æ‹©ä½ è§‰å¾—æœ€èˆ’æœçš„é‚£ä¸€ä¸ªå°±å¥½` ã€‚

è¿™é‡Œé€‰æ‹©ç»„åˆå¼ï¼Œæ–°å»ºæ–‡ä»¶ `src/store/counter.ts`

    // src/store/counter.ts
    import { defineStore } from "pinia";
    
    export const useCounterStore = defineStore("counter", () => {
      // refå˜é‡ â†’ state å±æ€§
      const count = ref(0);
      // computedè®¡ç®—å±æ€§ â†’ getters
      const double = computed(() => {
        return count.value * 2;
      });
      // functionå‡½æ•° â†’ actions
      function increment() {
        count.value++;
      }
    
      return { count, double, increment };
    });
    
    

**çˆ¶ç»„ä»¶**

    <!-- src/App.vue -->
    <script setup lang="ts">
    import HelloWorld from "@/components/HelloWorld.vue";
    
    import { useCounterStore } from "@/store/counter";
    const counterStore = useCounterStore();
    </script>
    
    <template>
      <h1 class="text-3xl">vue3-element-admin-çˆ¶ç»„ä»¶</h1>
      <el-button type="primary" @click="counterStore.increment">count++</el-button>
      <HelloWorld />
    </template>
    

**å­ç»„ä»¶**

    <!-- src/components/HelloWorld.vue -->
    <script setup lang="ts">
    import { useCounterStore } from "@/store/counter";
    const counterStore = useCounterStore();
    </script>
    
    <template>
      <el-card  class="text-left text-white border-white border-1 border-solid mt-10 bg-[#242424]" >
        <template #header> å­ç»„ä»¶ HelloWorld.vue</template>
        <el-form>
          <el-form-item label="æ•°å­—ï¼š"> {{ counterStore.count }}</el-form-item>
          <el-form-item label="åŠ å€ï¼š"> {{ counterStore.double }}</el-form-item>
        </el-form>
      </el-card>
    </template>
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/02/25/gPv7CyoYIJQSDWO.gif)

ç¯å¢ƒå˜é‡
----

> Vite ç¯å¢ƒå˜é‡ä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ç¯å¢ƒçš„å˜é‡

å‚è€ƒï¼š [Vite ç¯å¢ƒå˜é‡é…ç½®å®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/guide/env-and-mode.html)

**envé…ç½®æ–‡ä»¶**

é¡¹ç›®æ ¹ç›®å½•æ–°å»º `.env.development` ã€`.env.production`

*   å¼€å‘ç¯å¢ƒå˜é‡é…ç½®ï¼š.env.development
    
        # å˜é‡å¿…é¡»ä»¥ VITE_ ä¸ºå‰ç¼€æ‰èƒ½æš´éœ²ç»™å¤–éƒ¨è¯»å–
        VITE_APP_TITLE = 'vue3-element-admin'
        VITE_APP_PORT = 3000
        VITE_APP_BASE_API = '/dev-api'
        
    
*   ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®ï¼š.env.production
    
        VITE_APP_TITLE = 'vue3-element-admin'
        VITE_APP_PORT = 3000
        VITE_APP_BASE_API = '/prod-api'
        
    

**ç¯å¢ƒå˜é‡æ™ºèƒ½æç¤º**

æ–°å»º `src/types/env.d.ts`æ–‡ä»¶å­˜æ”¾ç¯å¢ƒå˜é‡TSç±»å‹å£°æ˜

    // src/types/env.d.ts
    interface ImportMetaEnv {
      /**
       * åº”ç”¨æ ‡é¢˜
       */
      VITE_APP_TITLE: string;
      /**
       * åº”ç”¨ç«¯å£
       */
      VITE_APP_PORT: number;
      /**
       * APIåŸºç¡€è·¯å¾„(åå‘ä»£ç†)
       */
      VITE_APP_BASE_API: string;
    }
    
    interface ImportMeta {
      readonly env: ImportMetaEnv;
    }
    

ä½¿ç”¨è‡ªå®šä¹‰ç¯å¢ƒå˜é‡å°±ä¼šæœ‰æ™ºèƒ½æç¤ºï¼Œç¯å¢ƒå˜é‡çš„è¯»å–å’Œä½¿ç”¨è¯·çœ‹ä¸‹ä¸€èŠ‚çš„è·¨åŸŸå¤„ç†ä¸­çš„ `vite.config.ts`çš„é…ç½®ã€‚

![](https://s2.loli.net/2023/02/15/Cu9KVtz7ghOrqZb.png)

è·¨åŸŸå¤„ç†
----

**è·¨åŸŸåŸç†**

æµè§ˆå™¨åŒæºç­–ç•¥: åè®®ã€åŸŸåå’Œç«¯å£éƒ½ç›¸åŒæ˜¯åŒæºï¼Œæµè§ˆå™¨ä¼šé™åˆ¶éåŒæºè¯·æ±‚è¯»å–å“åº”ç»“æœã€‚

æœ¬åœ°å¼€å‘ç¯å¢ƒé€šè¿‡ `Vite` é…ç½®åå‘ä»£ç†è§£å†³æµè§ˆå™¨è·¨åŸŸé—®é¢˜ï¼Œç”Ÿäº§ç¯å¢ƒåˆ™æ˜¯é€šè¿‡ `nginx` é…ç½®åå‘ä»£ç† ã€‚

**`vite.config.ts` é…ç½®ä»£ç†**

![](https://s2.loli.net/2023/03/17/7HwTFWXPCvVx9pO.png)

è¡¨é¢è‚‰çœ¼çœ‹åˆ°çš„è¯·æ±‚åœ°å€: `http://localhost:3000/dev-api/api/v1/users/me`

çœŸå®è®¿é—®çš„ä»£ç†ç›®æ ‡åœ°å€: `http://vapi.youlai.tech/api/v1/users/me`

![](https://s2.loli.net/2023/03/18/QZ3DiKtFuLJm68E.png)

æ•´åˆ Axios
--------

> Axios åŸºäºpromiseå¯ä»¥ç”¨äºæµè§ˆå™¨å’Œnode.jsçš„ç½‘ç»œè¯·æ±‚åº“

å‚è€ƒï¼š [Axios å®˜æ–¹æ–‡æ¡£](https://www.axios-http.cn/docs/intro)

**å®‰è£…ä¾èµ–**

    npm install axios
    

**Axios å·¥å…·ç±»å°è£…**

    //  src/utils/request.ts
    import axios, { InternalAxiosRequestConfig, AxiosResponse } from 'axios';
    import { useUserStoreHook } from '@/store/modules/user';
    
    // åˆ›å»º axios å®ä¾‹
    const service = axios.create({
      baseURL: import.meta.env.VITE_APP_BASE_API,
      timeout: 50000,
      headers: { 'Content-Type': 'application/json;charset=utf-8' }
    });
    
    // è¯·æ±‚æ‹¦æˆªå™¨
    service.interceptors.request.use(
      (config: InternalAxiosRequestConfig) => {
        const userStore = useUserStoreHook();
        if (userStore.token) {
          config.headers.Authorization = userStore.token;
        }
        return config;
      },
      (error: any) => {
        return Promise.reject(error);
      }
    );
    
    // å“åº”æ‹¦æˆªå™¨
    service.interceptors.response.use(
      (response: AxiosResponse) => {
        const { code, msg } = response.data;
        // ç™»å½•æˆåŠŸ
        if (code === '00000') {
          return response.data;
        }
    
        ElMessage.error(msg || 'ç³»ç»Ÿå‡ºé”™');
        return Promise.reject(new Error(msg || 'Error'));
      },
      (error: any) => {
        if (error.response.data) {
          const { code, msg } = error.response.data;
          // token è¿‡æœŸï¼Œè·³è½¬ç™»å½•é¡µ
          if (code === 'A0230') {
            ElMessageBox.confirm('å½“å‰é¡µé¢å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•', 'æç¤º', {
              confirmButtonText: 'ç¡®å®š',
              type: 'warning'
            }).then(() => {
              localStorage.clear(); // @vueuse/core è‡ªåŠ¨å¯¼å…¥
              window.location.href = '/';
            });
          }else{
              ElMessage.error(msg || 'ç³»ç»Ÿå‡ºé”™');
          }
        }
        return Promise.reject(error.message);
      }
    );
    
    // å¯¼å‡º axios å®ä¾‹
    export default service;
    
    

**ç™»å½•æ¥å£å®æˆ˜**

è®¿é—® [vue3-element-admin åœ¨çº¿æ¥å£æ–‡æ¡£](http://vue3.youlai.tech/#/api/apidoc)ï¼Œ æŸ¥çœ‹ç™»å½•æ¥å£è¯·æ±‚å‚æ•°å’Œå“åº”æ•°æ®ç±»å‹

![](https://s2.loli.net/2023/03/16/UQJhmX3aNb4rxiG.png)

ç‚¹å‡» **ç”Ÿæˆä»£ç ** è·å–ç™»å½•å“åº”æ•°æ® `TypeScript` ç±»å‹å®šä¹‰

![](https://s2.loli.net/2023/03/16/tDMe3hE5iwpZYmA.png)

å°†ç±»å‹å®šä¹‰å¤åˆ¶åˆ° `src/api/auth/types.ts` æ–‡ä»¶ä¸­

    /**
     * ç™»å½•è¯·æ±‚å‚æ•°
     */
    export interface LoginData {
      /**
       * ç”¨æˆ·å
       */
      username: string;
      /**
       * å¯†ç 
       */
      password: string;
    }
    
    /**
     * ç™»å½•å“åº”
     */
    export interface LoginResult {
      /**
       * è®¿é—®token
       */
      accessToken?: string;
      /**
       * è¿‡æœŸæ—¶é—´(å•ä½ï¼šæ¯«ç§’)
       */
      expires?: number;
      /**
       * åˆ·æ–°token
       */
      refreshToken?: string;
      /**
       * token ç±»å‹
       */
      tokenType?: string;
    }
    

ç™»å½• API å®šä¹‰

    // src/api/auth/index.ts
    import request from '@/utils/request';
    import { AxiosPromise } from 'axios';
    import { LoginData, LoginResult } from './types';
    
    /**
     * ç™»å½•API 
     * 
     * @param data {LoginData}
     * @returns
     */
    export function loginApi(data: LoginData): AxiosPromise<LoginResult> {
      return request({
        url: '/api/v1/auth/login',
        method: 'post',
        params: data
      });
    }
    

ç™»å½• API è°ƒç”¨

    // src/store/modules/user.ts
    import { loginApi } from '@/api/auth';
    import { LoginData } from '@/api/auth/types';
    
    /**
     * ç™»å½•è°ƒç”¨
     *
     * @param {LoginData}
     * @returns
     */
    function login(loginData: LoginData) {
      return new Promise<void>((resolve, reject) => {
        loginApi(loginData)
          .then(response => {
            const { tokenType, accessToken } = response.data;
            token.value = tokenType + ' ' + accessToken; // Bearer eyJhbGciOiJIUzI1NiJ9.xxx.xxx
            resolve();
          })
          .catch(error => {
            reject(error);
          });
      });
    }
    

åŠ¨æ€è·¯ç”±
----

**å®‰è£… vue-router**

    npm install vue-router@next
    

**è·¯ç”±å®ä¾‹**

åˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œé¡ºå¸¦åˆå§‹åŒ–é™æ€è·¯ç”±ï¼Œè€ŒåŠ¨æ€è·¯ç”±éœ€è¦ç”¨æˆ·ç™»å½•ï¼Œæ ¹æ®ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²è¿›è¡Œæƒé™æ ¡éªŒåè¿›è¡Œåˆå§‹åŒ–

    // src/router/index.ts
    import { createRouter, createWebHashHistory, RouteRecordRaw } from 'vue-router';
    
    export const Layout = () => import('@/layout/index.vue');
    
    // é™æ€è·¯ç”±
    export const constantRoutes: RouteRecordRaw[] = [
      {
        path: '/redirect',
        component: Layout,
        meta: { hidden: true },
        children: [
          {
            path: '/redirect/:path(.*)',
            component: () => import('@/views/redirect/index.vue')
          }
        ]
      },
    
      {
        path: '/login',
        component: () => import('@/views/login/index.vue'),
        meta: { hidden: true }
      },
    
      {
        path: '/',
        component: Layout,
        redirect: '/dashboard',
        children: [
          {
            path: 'dashboard',
            component: () => import('@/views/dashboard/index.vue'),
            name: 'Dashboard',
            meta: { title: 'dashboard', icon: 'homepage', affix: true }
          }
        ]
      }
    ];
    
    /**
     * åˆ›å»ºè·¯ç”±
     */
    const router = createRouter({
      history: createWebHashHistory(),
      routes: constantRoutes as RouteRecordRaw[],
      // åˆ·æ–°æ—¶ï¼Œæ»šåŠ¨æ¡ä½ç½®è¿˜åŸ
      scrollBehavior: () => ({ left: 0, top: 0 })
    });
    
    /**
     * é‡ç½®è·¯ç”±
     */
    export function resetRouter() {
      router.replace({ path: '/login' });
      location.reload();
    }
    
    export default router;
    

**å…¨å±€æ³¨å†Œè·¯ç”±å®ä¾‹**

    // main.ts
    import router from "@/router";
    
    app.use(router).mount('#app')
    

**åŠ¨æ€æƒé™è·¯ç”±**

è·¯ç”±å®ˆå« `src/permission.ts` ï¼Œè·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯è¿›è¡ŒåŠ¨æ€è·¯ç”±çš„åˆå§‹åŒ–

![](https://s2.loli.net/2023/03/18/CYWVvHZsKXRyEnj.png)

æœ€ç»ˆè°ƒç”¨ `permissionStore.generateRoutes(roles)` æ–¹æ³•ç”ŸæˆåŠ¨æ€è·¯ç”±

    // src/store/modules/permission.ts 
    import { listRoutes } from '@/api/menu';
    
    export const usePermissionStore = defineStore('permission', () => {
      const routes = ref<RouteRecordRaw[]>([]);
    
      function setRoutes(newRoutes: RouteRecordRaw[]) {
        routes.value = constantRoutes.concat(newRoutes);
      }
      /**
       * ç”ŸæˆåŠ¨æ€è·¯ç”±
       *
       * @param roles ç”¨æˆ·è§’è‰²é›†åˆ
       * @returns
       */
      function generateRoutes(roles: string[]) {
        return new Promise<RouteRecordRaw[]>((resolve, reject) => {
          // æ¥å£è·å–æ‰€æœ‰è·¯ç”±
          listRoutes()
            .then(({ data: asyncRoutes }) => {
              // æ ¹æ®è§’è‰²è·å–æœ‰è®¿é—®æƒé™çš„è·¯ç”±
              const accessedRoutes = filterAsyncRoutes(asyncRoutes, roles);
              setRoutes(accessedRoutes);
              resolve(accessedRoutes);
            })
            .catch(error => {
              reject(error);
            });
        });
      }
      // å¯¼å‡º store çš„åŠ¨æ€è·¯ç”±æ•°æ® routes 
      return { routes, setRoutes, generateRoutes };
    });
    
    

æ¥å£è·å–å¾—åˆ°çš„è·¯ç”±æ•°æ®

![](https://s2.loli.net/2023/03/21/ZNVAcKPfy8BvDSQ.png)

æ ¹æ®è·¯ç”±æ•°æ® (routes)ç”Ÿæˆèœå•çš„å…³é”®ä»£ç 

src/layout/componets/Sidebar/index.vue

src/layout/componets/Sidebar/SidebarItem.vue

![](https://s2.loli.net/2023/04/17/xQWsuCc87p16U2O.png)

![image-20230326145836872](https://s2.loli.net/2023/03/26/rl9kWv4hUuYBoSE.png)

æŒ‰é’®æƒé™
----

é™¤äº† Vue å†…ç½®çš„ä¸€ç³»åˆ—æŒ‡ä»¤ (æ¯”å¦‚ `v-model` æˆ– `v-show`) ä¹‹å¤–ï¼ŒVue è¿˜å…è®¸ä½ æ³¨å†Œè‡ªå®šä¹‰çš„æŒ‡ä»¤ (Custom Directives)ï¼Œä»¥ä¸‹å°±é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼å®ç°æŒ‰é’®æƒé™æ§åˆ¶ã€‚

å‚è€ƒï¼š[Vue å®˜æ–¹æ–‡æ¡£-è‡ªå®šä¹‰æŒ‡ä»¤](https://cn.vuejs.org/guide/reusability/custom-directives.html)

\*\*è‡ªå®šä¹‰æŒ‡ä»¤ \*\*

    // src/directive/permission/index.ts
    
    import { useUserStoreHook } from '@/store/modules/user';
    import { Directive, DirectiveBinding } from 'vue';
    
    /**
     * æŒ‰é’®æƒé™
     */
    export const hasPerm: Directive = {
      mounted(el: HTMLElement, binding: DirectiveBinding) {
        // ã€Œè¶…çº§ç®¡ç†å‘˜ã€æ‹¥æœ‰æ‰€æœ‰çš„æŒ‰é’®æƒé™
        const { roles, perms } = useUserStoreHook();
        if (roles.includes('ROOT')) {
          return true;
        }
        // ã€Œå…¶ä»–è§’è‰²ã€æŒ‰é’®æƒé™æ ¡éªŒ
        const { value } = binding;
        if (value) {
          const requiredPerms = value; // DOMç»‘å®šéœ€è¦çš„æŒ‰é’®æƒé™æ ‡è¯†
    
          const hasPerm = perms?.some(perm => {
            return requiredPerms.includes(perm);
          });
    
          if (!hasPerm) {
            el.parentNode && el.parentNode.removeChild(el);
          }
        } else {
          throw new Error(
            "need perms! Like v-has-perm=\"['sys:user:add','sys:user:edit']\""
          );
        }
      }
    };
    

**å…¨å±€æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤**

    // src/directive/index.ts
    import type { App } from 'vue';
    
    import { hasPerm } from './permission';
    
    // å…¨å±€æ³¨å†Œ directive æ–¹æ³•
    export function setupDirective(app: App<Element>) {
      // ä½¿ v-hasPerm åœ¨æ‰€æœ‰ç»„ä»¶ä¸­éƒ½å¯ç”¨
      app.directive('hasPerm', hasPerm);
    }
    

    // src/main.ts
    import { setupDirective } from '@/directive';
    
    const app = createApp(App);
    // å…¨å±€æ³¨å†Œ è‡ªå®šä¹‰æŒ‡ä»¤(directive)
    setupDirective(app);
    

**ç»„ä»¶ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤**

    // src/views/system/user/index.vue
    <el-button v-hasPerm="['sys:user:add']">æ–°å¢</el-button>
    <el-button v-hasPerm="['sys:user:delete']">åˆ é™¤</el-button>
    

å›½é™…åŒ–
---

> å›½é™…åŒ–åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼ŒElement Plus æ¡†æ¶å›½é™…åŒ–ï¼ˆå®˜æ–¹æä¾›äº†å›½é™…åŒ–æ–¹å¼ï¼‰å’Œè‡ªå®šä¹‰å›½é™…åŒ–ï¼ˆé€šè¿‡ vue-i18n å›½é™…åŒ–æ’ä»¶ï¼‰

### Element Plus å›½é™…åŒ–

ç®€å•çš„ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ [Element Plus å®˜æ–¹æ–‡æ¡£-å›½é™…åŒ–ç¤ºä¾‹](https://element-plus.gitee.io/zh-CN/guide/i18n.html#configprovider)ï¼Œä»¥ä¸‹ä»‹ç» `vue3-element-admin` æ•´åˆ `pinia` å®ç°å›½é™…åŒ–è¯­è¨€åˆ‡æ¢ã€‚

Element Plus æä¾›äº†ä¸€ä¸ª Vue ç»„ä»¶ [ConfigProvider](https://element-plus.gitee.io/en-US/component/config-provider.html) ç”¨äºå…¨å±€é…ç½®å›½é™…åŒ–çš„è®¾ç½®ã€‚

    <!-- src/App.vue -->
    <script setup lang="ts">
    import { ElConfigProvider } from 'element-plus';
    import { useAppStore } from '@/store/modules/app';
    const appStore = useAppStore();
    </script>
    
    <template>
      <el-config-provider :locale="appStore.locale" >
        <router-view />
      </el-config-provider>
    </template>
    
    

å®šä¹‰ `store`

    // src/store/modules/app.ts
    import { defineStore } from 'pinia';
    import { useStorage } from '@vueuse/core';
    import defaultSettings from '@/settings';
    
    // å¯¼å…¥ Element Plus ä¸­è‹±æ–‡è¯­è¨€åŒ…
    import zhCn from 'element-plus/es/locale/lang/zh-cn';
    import en from 'element-plus/es/locale/lang/en';
    
    // setup
    export const useAppStore = defineStore('app', () => {
        
      const language = useStorage('language', defaultSettings.language);
        
      /**
       * æ ¹æ®è¯­è¨€æ ‡è¯†è¯»å–å¯¹åº”çš„è¯­è¨€åŒ…
       */
      const locale = computed(() => {
        if (language?.value == 'en') {
          return en;
        } else {
          return zhCn;
        }
      });
    
      /**
       * åˆ‡æ¢è¯­è¨€
       */
      function changeLanguage(val: string) {
        language.value = val;
      }
    
      return {
        language,
        locale,
        changeLanguage
      };
    });
    
    

åˆ‡æ¢è¯­è¨€ç»„ä»¶è°ƒç”¨

    <!-- src/components/LangSelect/index.vue -->
    <script setup lang="ts">
    import { useI18n } from 'vue-i18n';
    import SvgIcon from '@/components/SvgIcon/index.vue';
    import { useAppStore } from '@/store/modules/app';
    
    const appStore = useAppStore();
    const { locale } = useI18n();
    
    function handleLanguageChange(lang: string) {
      locale.value = lang;
      appStore.changeLanguage(lang);
      if (lang == 'en') {
        ElMessage.success('Switch Language Successful!');
      } else {
        ElMessage.success('åˆ‡æ¢è¯­è¨€æˆåŠŸï¼');
      }
    }
    </script>
    
    <template>
      <el-dropdown trigger="click" @command="handleLanguageChange">
        <div>
          <svg-icon icon-class="language" />
        </div>
        <template #dropdown>
          <el-dropdown-menu>
            <el-dropdown-item
              :disabled="appStore.language === 'zh-cn'"
              command="zh-cn"
            >
              ä¸­æ–‡
            </el-dropdown-item>
            <el-dropdown-item :disabled="appStore.language === 'en'" command="en">
              English
            </el-dropdown-item>
          </el-dropdown-menu>
        </template>
      </el-dropdown>
    </template>
    

ä» `Element Plus` åˆ†é¡µç»„ä»¶çœ‹ä¸‹å›½é™…åŒ–çš„æ•ˆæœ

![](https://s2.loli.net/2023/03/25/ukwC3xniMhd6gTe.png)

![](https://s2.loli.net/2023/03/25/G4pFTioh5gUYbPt.png)

### vue-i18n è‡ªå®šä¹‰å›½é™…åŒ–

> i18n è‹±æ–‡å…¨æ‹¼ internationalization ,å›½é™…åŒ–çš„æ„æ€ï¼Œè‹±æ–‡ i å’Œ n ä¸­é—´18ä¸ªè‹±æ–‡å­—æ¯

å‚è€ƒï¼š[vue-i18n å®˜æ–¹æ–‡æ¡£ - installation](https://vue-i18n.intlify.dev/guide/installation.html)

**å®‰è£… vue-i18n**

    npm install vue-i18n@9
    

**è‡ªå®šä¹‰è¯­è¨€åŒ…**

åˆ›å»º `src/lang`/package è¯­è¨€åŒ…ç›®å½•ï¼Œå­˜æ”¾è‡ªå®šä¹‰çš„è¯­è¨€æ–‡ä»¶

ä¸­æ–‡è¯­è¨€åŒ… zh-cn.ts

è‹±æ–‡è¯­è¨€åŒ… en.ts

![](https://s2.loli.net/2023/03/25/FvOGjXaAsEHY6W1.png)

![](https://s2.loli.net/2023/03/25/2nHIlvEZcht6jgU.png)

**åˆ›å»º `i18n` å®ä¾‹**

    // src/lang/index.ts
    import { createI18n } from 'vue-i18n';
    import { useAppStore } from '@/store/modules/app';
    
    const appStore = useAppStore();
    // æœ¬åœ°è¯­è¨€åŒ…
    import enLocale from './package/en';
    import zhCnLocale from './package/zh-cn';
    
    const messages = {
      'zh-cn': {
        ...zhCnLocale
      },
      en: {
        ...enLocale
      }
    };
    // åˆ›å»º i18n å®ä¾‹
    const i18n = createI18n({
      legacy: false,
      locale: appStore.language,
      messages: messages
    });
    // å¯¼å‡º i18n å®ä¾‹
    export default i18n;
    

**i18n å…¨å±€æ³¨å†Œ**

    // main.ts
    
    // å›½é™…åŒ–
    import i18n from '@/lang/index';
    
    app.use(i18n).mount('#app');
    

**ç™»å½•é¡µé¢å›½é™…åŒ–ä½¿ç”¨**

> $t æ˜¯ i18n æä¾›çš„æ ¹æ® key ä»è¯­è¨€åŒ…ç¿»è¯‘å¯¹åº”çš„ value æ–¹æ³•

    <span>{{ $t("login.title") }}</span>
    

åœ¨ç™»å½•é¡µé¢ `src/view/login/index.vue` æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/03/25/dLWTNYzGnjwAmcJ.gif)

æš—é»‘æ¨¡å¼
----

Element Plus 2.2.0 ç‰ˆæœ¬å¼€å§‹æ”¯æŒæš—é»‘æ¨¡å¼ï¼Œå¯ç”¨æ–¹å¼å‚è€ƒ [Element Plus å®˜æ–¹æ–‡æ¡£ - æš—é»‘æ¨¡å¼](https://element-plus.gitee.io/zh-CN/guide/dark-mode.html)ï¼Œ å®˜æ–¹ä¹Ÿæä¾›äº†ç¤ºä¾‹ [element-plus-vite-starter æ¨¡ç‰ˆ](https://github.com/element-plus/element-plus-vite-starter) ã€‚

è¿™é‡Œæ ¹æ®å®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹è®²è¿° [vue3-element-admin](https://gitee.com/youlaiorg/vue3-element-admin) æ˜¯å¦‚ä½•ä½¿ç”¨ VueUse çš„ [useDark](https://vueuse.org/core/useDark/) æ–¹æ³•å®ç°æš—é»‘æ¨¡å¼çš„åŠ¨æ€åˆ‡æ¢ã€‚

**å¯¼å…¥ Element Plus æš—é»‘æ¨¡å¼å˜é‡**

    // src/main.ts
    import 'element-plus/theme-chalk/dark/css-vars.css'
    

**åˆ‡æ¢æš—é»‘æ¨¡å¼è®¾ç½®**

    <!-- src/layout/components/Settings/index.vue -->
    <script setup lang="ts">
    
    import IconEpSunny from '~icons/ep/sunny';
    import IconEpMoon from '~icons/ep/moon';
    
    /**
     * æš—é»‘æ¨¡å¼
     */
    const settingsStore = useSettingsStore();
    const isDark = useDark();
    const toggleDark = () => useToggle(isDark);
    
    </script>
    
    <template>
      <div class="settings-container">
        <h3 class="text-base font-bold">é¡¹ç›®é…ç½®</h3>
        <el-divider>ä¸»é¢˜</el-divider>
    
        <div class="flex justify-center" @click.stop>
          <el-switch
            v-model="isDark"
            @change="toggleDark"
            inline-prompt
            :active-icon="IconEpMoon"
            :inactive-icon="IconEpSunny"
            active-color="var(--el-fill-color-dark)"
            inactive-color="var(--el-color-primary)"
          />
        </div>
      </div>
    </template>
    

**è‡ªå®šä¹‰å˜é‡**

é™¤äº† Element Plus ç»„ä»¶æ ·å¼ä¹‹å¤–ï¼Œåº”ç”¨ä¸­è¿˜æœ‰å¾ˆå¤šè‡ªå®šä¹‰çš„ç»„ä»¶å’Œæ ·å¼ï¼Œåƒè¿™æ ·çš„:

![](https://s2.loli.net/2023/04/17/jFrM9s4egZaqTEv.png)

åº”å¯¹è‡ªå®šä¹‰ç»„ä»¶æ ·å¼å®ç°æš—é»‘æ¨¡å¼æ­¥éª¤å¦‚ä¸‹ï¼š

æ–°å»º `src/styles/dark.scss`

    html.dark {
      /* ä¿®æ”¹è‡ªå®šä¹‰å…ƒç´ çš„æ ·å¼ */   
      .navbar {
        background-color: #141414;
      }
    }
    

åœ¨ Element Plus çš„æ ·å¼ä¹‹åå¯¼å…¥å®ƒ

    // main.ts
    import 'element-plus/theme-chalk/dark/css-vars.css'
    import '@/styles/dark.scss';
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/03/25/lWnIAqSZdpBU5EP.gif)

ç»„ä»¶å°è£…
----

### wangEditor å¯Œæ–‡æœ¬

å‚è€ƒï¼š [wangEditor å®˜æ–¹æ–‡æ¡£](https://www.wangeditor.com/v5/for-frame.html#vue3)

**å®‰è£… wangEditor**

    npm install @wangeditor/editor @wangeditor/editor-for-vue@next 
    

**wangEditor ç»„ä»¶å°è£…**

    <!-- src/components/WangEditor/index.vue -->
    <template>
      <div style="border: 1px solid #ccc">
        <!-- å·¥å…·æ  -->
        <Toolbar
          :editor="editorRef"
          :defaultConfig="toolbarConfig"
          style="border-bottom: 1px solid #ccc"
          :mode="mode"
        />
        <!-- ç¼–è¾‘å™¨ -->
        <Editor
          :defaultConfig="editorConfig"
          v-model="defaultHtml"
          @onChange="handleChange"
          style="height: 500px; overflow-y: hidden"
          :mode="mode"
          @onCreated="handleCreated"
        />
      </div>
    </template>
    
    <script setup lang="ts">
    import { Editor, Toolbar } from "@wangeditor/editor-for-vue";
    
    // API å¼•ç”¨
    import { uploadFileApi } from "@/api/file";
    
    const props = defineProps({
      modelValue: {
        type: [String],
        default: "",
      },
    });
    
    const emit = defineEmits(["update:modelValue"]);
    
    const defaultHtml = useVModel(props, "modelValue", emit);
    
    const editorRef = shallowRef(); // ç¼–è¾‘å™¨å®ä¾‹ï¼Œå¿…é¡»ç”¨ shallowRef
    const mode = ref("default"); // ç¼–è¾‘å™¨æ¨¡å¼
    const toolbarConfig = ref({}); // å·¥å…·æ¡é…ç½®
    // ç¼–è¾‘å™¨é…ç½®
    const editorConfig = ref({
      placeholder: "è¯·è¾“å…¥å†…å®¹...",
      MENU_CONF: {
        uploadImage: {
          // è‡ªå®šä¹‰å›¾ç‰‡ä¸Šä¼ 
          async customUpload(file: any, insertFn: any) {
            uploadFileApi(file).then((response) => {
              const url = response.data.url;
              insertFn(url);
            });
          },
        },
      },
    });
    
    const handleCreated = (editor: any) => {
      editorRef.value = editor; // è®°å½• editor å®ä¾‹ï¼Œé‡è¦ï¼
    };
    
    function handleChange(editor: any) {
      emit("update:modelValue", editor.getHtml());
    }
    
    // ç»„ä»¶é”€æ¯æ—¶ï¼Œä¹ŸåŠæ—¶é”€æ¯ç¼–è¾‘å™¨
    onBeforeUnmount(() => {
      const editor = editorRef.value;
      if (editor == null) return;
      editor.destroy();
    });
    </script>
    
    <style src="@wangeditor/editor/dist/css/style.css"></style>
    
    

**ä½¿ç”¨æ¡ˆä¾‹**

    <!-- wangEditorå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç¤ºä¾‹ -->
    <script setup lang="ts">
    import Editor from '@/components/WangEditor/index.vue';
    const value = ref('åˆå§‹å†…å®¹');
    </script>
    
    <template>
      <div class="app-container">
        <editor v-model="value" style="height: 600px" />
      </div>
    </template>
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/03/25/du7sTl69h3I5bjx.png)

### Echarts å›¾è¡¨

å‚è€ƒï¼š[ğŸ“Š Echarts å®˜æ–¹ç¤ºä¾‹](https://echarts.apache.org/examples/zh/index.html)

**å®‰è£… Echarts**

    npm install echarts
    

**ç»„ä»¶å°è£…**

    <!-- src/views/dashboard/components/Chart/BarChart.vue --> 
    <template>
      <el-card>
        <template #header> çº¿ + æŸ±æ··åˆå›¾ </template>
        <div :id="id" :class="className" :style="{ height, width }" />
      </el-card>
    </template>
    
    <script setup lang="ts">
    import * as echarts from 'echarts';
    
    const props = defineProps({
      id: {
        type: String,
        default: 'barChart'
      },
      className: {
        type: String,
        default: ''
      },
      width: {
        type: String,
        default: '200px',
        required: true
      },
      height: {
        type: String,
        default: '200px',
        required: true
      }
    });
    
    const options = {
      grid: {
        left: '2%',
        right: '2%',
        bottom: '10%',
        containLabel: true
      },
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'cross',
          crossStyle: {
            color: '#999'
          }
        }
      },
      legend: {
        x: 'center',
        y: 'bottom',
        data: ['æ”¶å…¥', 'æ¯›åˆ©æ¶¦', 'æ”¶å…¥å¢é•¿ç‡', 'åˆ©æ¶¦å¢é•¿ç‡'],
        textStyle: {
          color: '#999'
        }
      },
      xAxis: [
        {
          type: 'category',
          data: ['æµ™æ±Ÿ', 'åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿ä¸œ', 'æ·±åœ³'],
          axisPointer: {
            type: 'shadow'
          }
        }
      ],
      yAxis: [
        {
          type: 'value',
          min: 0,
          max: 10000,
          interval: 2000,
          axisLabel: {
            formatter: '{value} '
          }
        },
        {
          type: 'value',
          min: 0,
          max: 100,
          interval: 20,
          axisLabel: {
            formatter: '{value}%'
          }
        }
      ],
      series: [
        {
          name: 'æ”¶å…¥',
          type: 'bar',
          data: [7000, 7100, 7200, 7300, 7400],
          barWidth: 20,
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#83bff6' },
              { offset: 0.5, color: '#188df0' },
              { offset: 1, color: '#188df0' }
            ])
          }
        },
        {
          name: 'æ¯›åˆ©æ¶¦',
          type: 'bar',
          data: [8000, 8200, 8400, 8600, 8800],
          barWidth: 20,
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#25d73c' },
              { offset: 0.5, color: '#1bc23d' },
              { offset: 1, color: '#179e61' }
            ])
          }
        },
        {
          name: 'æ”¶å…¥å¢é•¿ç‡',
          type: 'line',
          yAxisIndex: 1,
          data: [60, 65, 70, 75, 80],
          itemStyle: {
            color: '#67C23A'
          }
        },
        {
          name: 'åˆ©æ¶¦å¢é•¿ç‡',
          type: 'line',
          yAxisIndex: 1,
          data: [70, 75, 80, 85, 90],
          itemStyle: {
            color: '#409EFF'
          }
        }
      ]
    };
    
    onMounted(() => {
      // å›¾è¡¨åˆå§‹åŒ–
      const chart = echarts.init(
        document.getElementById(props.id) as HTMLDivElement
      );
      chart.setOption(options);
    
      // å¤§å°è‡ªé€‚åº”
      window.addEventListener('resize', () => {
        chart.resize();
      });
    });
    </script>
    

**ç»„ä»¶ä½¿ç”¨**

    <script setup lang="ts">
    import BarChart from './components/BarChart.vue';
    </script>
    
    <template>
      <BarChart id="barChart" height="400px"width="300px" />
    </template>
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/02/19/ZADo7kyIKeHVmtR.png)

### å›¾æ ‡é€‰æ‹©å™¨

**ç»„ä»¶å°è£…**

    <!-- src/components/IconSelect/index.vue -->
    <script setup lang="ts">
    const props = defineProps({
      modelValue: {
        type: String,
        require: false
      }
    });
    
    const emit = defineEmits(['update:modelValue']);
    const inputValue = toRef(props, 'modelValue');
    
    const visible = ref(false); // å¼¹çª—æ˜¾ç¤ºçŠ¶æ€
    
    const iconNames: string[] = []; // æ‰€æœ‰çš„å›¾æ ‡åç§°é›†åˆ
    
    const filterValue = ref(''); // ç­›é€‰çš„å€¼
    const filterIconNames = ref<string[]>([]); // è¿‡æ»¤åçš„å›¾æ ‡åç§°é›†åˆ
    
    const iconSelectorRef = ref(null);
    /**
     * åŠ è½½ ICON
     */
    function loadIcons() {
      const icons = import.meta.glob('../../assets/icons/*.svg');
      for (const icon in icons) {
        const iconName = icon.split('assets/icons/')[1].split('.svg')[0];
        iconNames.push(iconName);
      }
      filterIconNames.value = iconNames;
    }
    
    /**
     * ç­›é€‰å›¾æ ‡
     */
    function handleFilter() {
      if (filterValue.value) {
        filterIconNames.value = iconNames.filter(iconName =>
          iconName.includes(filterValue.value)
        );
      } else {
        filterIconNames.value = iconNames;
      }
    }
    
    /**
     * é€‰æ‹©å›¾æ ‡
     */
    function handleSelect(iconName: string) {
      emit('update:modelValue', iconName);
      visible.value = false;
    }
    
    /**
     * ç‚¹å‡»å®¹å™¨å¤–çš„åŒºåŸŸå…³é—­å¼¹çª— VueUse onClickOutside
     */
    onClickOutside(iconSelectorRef, () => (visible.value = false));
    
    onMounted(() => {
      loadIcons();
    });
    </script>
    
    <template>
      <div class="iconselect-container" ref="iconSelectorRef">
        <el-input
          v-model="inputValue"
          readonly
          @click="visible = !visible"
          placeholder="ç‚¹å‡»é€‰æ‹©å›¾æ ‡"
        >
          <template #prepend>
            <svg-icon :icon-class="inputValue" />
          </template>
        </el-input>
    
        <el-popover
          shadow="none"
          :visible="visible"
          placement="bottom-end"
          trigger="click"
          width="400"
        >
          <template #reference>
            <div
              @click="visible = !visible"
              class="cursor-pointer text-[#999] absolute right-[10px] top-0 height-[32px] leading-[32px]"
            >
              <i-ep-caret-top v-show="visible"></i-ep-caret-top>
              <i-ep-caret-bottom v-show="!visible"></i-ep-caret-bottom>
            </div>
          </template>
    
          <!-- ä¸‹æ‹‰é€‰æ‹©å¼¹çª— -->
          <el-input
            class="p-2"
            v-model="filterValue"
            placeholder="æœç´¢å›¾æ ‡"
            clearable
            @input="handleFilter"
          />
          <el-divider border-style="dashed" />
    
          <el-scrollbar height="300px">
            <ul class="icon-list">
              <li
                class="icon-item"
                v-for="(iconName, index) in filterIconNames"
                :key="index"
                @click="handleSelect(iconName)"
              >
                <el-tooltip :content="iconName" placement="bottom" effect="light">
                  <svg-icon
                    color="var(--el-text-color-regular)"
                    :icon-class="iconName"
                  />
                </el-tooltip>
              </li>
            </ul>
          </el-scrollbar>
        </el-popover>
      </div>
    </template>
    

**ç»„ä»¶ä½¿ç”¨**

    <!-- src/views/demo/IconSelect.vue -->
    <script setup lang="ts">
    const iconName = ref('edit');
    </script>
    
    <template>
      <div class="app-container">
        <icon-select v-model="iconName" />
      </div>
    </template>
    
    

**æ•ˆæœé¢„è§ˆ**

![](https://s2.loli.net/2023/03/25/v5URbkKNHzB3oaq.gif)

è§„èŒƒé…ç½®
----

### ä»£ç ç»Ÿä¸€è§„èŒƒ

[ã€vue3-element-adminã€‘ESLint+Prettier+Stylelint+EditorConfig çº¦æŸå’Œç»Ÿä¸€å‰ç«¯ä»£ç è§„èŒƒ](https://blog.csdn.net/u013737132/article/details/130190788)

*   Eslintï¼š JavaScript è¯­æ³•è§„åˆ™å’Œä»£ç é£æ ¼æ£€æŸ¥ï¼›
*   Stylelint: CSS ç»Ÿä¸€è§„èŒƒå’Œä»£ç æ£€æµ‹ï¼›
*   Prettierï¼šå…¨å±€ä»£ç æ ¼å¼åŒ–ã€‚

### Git æäº¤è§„èŒƒ

[ã€vue3-element-adminã€‘Husky + Lint-staged + Commitlint + Commitizen + cz-git é…ç½® Git æäº¤è§„èŒƒ](https://blog.csdn.net/u013737132/article/details/130191363)

*   Husky + Lint-staged æ•´åˆå®ç° Git æäº¤å‰ä»£ç è§„èŒƒæ£€æµ‹/æ ¼å¼åŒ–ï¼›
*   Husky + Commitlint + Commitizen + cz-git æ•´åˆå®ç°ç”Ÿæˆè§„èŒƒåŒ–ä¸”é«˜åº¦è‡ªå®šä¹‰çš„ Git commit messageã€‚

å¯åŠ¨éƒ¨ç½²
----

### é¡¹ç›®å¯åŠ¨

    # å®‰è£… pnpm
    npm install pnpm -g
    
    # å®‰è£…ä¾èµ–
    pnpm install
    
    # é¡¹ç›®è¿è¡Œ
    pnpm run dev
    

### é¡¹ç›®éƒ¨ç½²

    # é¡¹ç›®æ‰“åŒ…
    pnpm run build:prod
    

ç”Ÿæˆçš„é™æ€æ–‡ä»¶åœ¨å·¥ç¨‹æ ¹ç›®å½• dist æ–‡ä»¶å¤¹

FAQ
---

### 1: defineProps is not defined

*   **é—®é¢˜æè¿°**
    
    'defineProps' is not defined.eslint no-undef
    
    ![](https://s2.loli.net/2023/03/11/ur7Mpv3HK6Yjh2x.png)
    
*   **è§£å†³æ–¹æ¡ˆ**
    
    æ ¹æ® [Eslint å®˜æ–¹è§£å†³æ–¹æ¡ˆ](https://eslint.vuejs.org/user-guide/#compiler-macros-such-as-defineprops-and-defineemits-generate-no-undef-warnings)æè¿°ï¼Œè§£æå™¨ä½¿ç”¨ `vue-eslint-parser` v9.0.0 + ç‰ˆæœ¬
    
    ![](https://s2.loli.net/2023/03/11/bRkofHDOZW7aChe.png)
    
    å®‰è£… `vue-eslint-parser` è§£æå™¨
    
        npm install -D vue-eslint-parser
        
    
    ![](https://s2.loli.net/2023/03/11/UmV1xQXKoCHSwdD.png)
    
    `.eslintrc.js` å…³é”®é…ç½®( `v9.0.0` åŠä»¥ä¸Šç‰ˆæœ¬æ— éœ€é…ç½®ç¼–è¯‘å® `vue/setup-compiler-macros`)å¦‚ä¸‹ ï¼š
    
          parser: 'vue-eslint-parser',
          extends: [
            'eslint:recommended',
        	// ...		
          ],
        
    
    é‡å¯ `VSCode` å·²æ— æŠ¥é”™æç¤º
    
    ![](https://s2.loli.net/2023/03/11/47agxCwUoeE6VMn.png)
    

### 2: Vite é¦–å±åŠ è½½æ…¢(ç™½å±ä¹…)

*   **é—®é¢˜æè¿°**
    
    > Vite é¡¹ç›®å¯åŠ¨å¾ˆå¿«ï¼Œä½†é¦–æ¬¡æ‰“å¼€ç•Œé¢åŠ è½½æ…¢?
    
    å‚è€ƒæ–‡ç« ï¼š[ä¸ºä»€ä¹ˆæœ‰äººè¯´ vite å¿«ï¼Œæœ‰äººå´è¯´ vite æ…¢](https://juejin.cn/post/7129041114174062628)
    
    vite å¯åŠ¨æ—¶ï¼Œå¹¶ä¸åƒ webpack é‚£æ ·åšä¸€ä¸ªå…¨é‡çš„æ‰“åŒ…æ„å»ºï¼Œæ‰€ä»¥å¯åŠ¨é€Ÿåº¦éå¸¸å¿«ã€‚å¯åŠ¨ä»¥åï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œ `Dev Server` è¦æŠŠè¯·æ±‚éœ€è¦çš„èµ„æºå‘é€ç»™æµè§ˆå™¨ï¼Œä¸­é—´éœ€è¦ç»å†é¢„æ„å»ºã€å¯¹è¯·æ±‚æ–‡ä»¶åšè·¯å¾„è§£æã€åŠ è½½æºæ–‡ä»¶ã€å¯¹æºæ–‡ä»¶åšè½¬æ¢ï¼Œç„¶åæ‰èƒ½æŠŠå†…å®¹è¿”å›ç»™æµè§ˆå™¨ï¼Œè¿™ä¸ªæ—¶é—´è€—æ—¶è›®ä¹…çš„ï¼Œå¯¼è‡´ç™½å±æ—¶é—´è¾ƒé•¿ã€‚
    
*   **è§£å†³æ–¹æ¡ˆ1**
    
    [Vite å®˜æ–¹å¼ºåˆ¶é¢„æ„å»ºä¾èµ–é¡¹](https://cn.vitejs.dev/config/dep-optimization-options.html#optimizedeps-include)
    
        //vite.config.ts
        optimizeDeps: {
          include: [
        	'vue',
        	'vue-router',
        	'pinia',
        	'axios',
        	'element-plus/es/components/form/style/css',
        	'element-plus/es/components/form-item/style/css'
          ]
        }
        
    
*   **è§£å†³æ–¹æ¡ˆ2**
    
    å‚è€ƒæ–‡ç« ï¼š[æœåŠ¡å†·å¯åŠ¨æ€§èƒ½æå‡](https://youle.zhipin.com/articles/9422b11963266745qxB709y6Fg~~.html)
    
    `vite-plugin-optimize-persist`é€šè¿‡æŒä¹…åŒ–æ–¹å¼è®°å½• `Dev Server` è¿è¡Œæ—¶æ‰«æåˆ°çš„ä¾èµ–ï¼Œä»è€Œè®©é¦–æ¬¡æ„å»ºä¾¿å¯æ„ŸçŸ¥åˆ°ï¼Œé¿å…äºŒæ¬¡é¢„æ„å»ºçš„å‘ç”Ÿã€‚âš  vite 2.9.x æœ‰æ•ˆï¼Œvite 4.x éªŒè¯æ— æ•ˆ
    
        npm i -D vite-plugin-optimize-persist vite-plugin-package-config
        
    
        // vite.config.ts
        import OptimizationPersist from 'vite-plugin-optimize-persist'
        import PkgConfig from 'vite-plugin-package-config'
        
        export default {
          plugins: [
            PkgConfig(),
            OptimizationPersist()
          ]
        }
        
    
*   **è§£å†³æ–¹æ¡ˆ3**
    
    [åŒºåˆ†ç¯å¢ƒï¼Œå¼€å‘ç¯å¢ƒå…¨é‡å¯¼å…¥ï¼Œç”Ÿäº§ç¯å¢ƒæŒ‰éœ€å¯¼å…¥](https://github.com/hminghe/md-admin-element-plus/commit/be3cdf6999d3ae349f79e31d32b2a49de1239fcc)
    
*   **è§£å†³æ–¹æ¡ˆ4**
    
    æ”¾å¼ƒã€‚ä½ æ²¡çœ‹é”™ï¼Œå› ä¸ºåªæœ‰é¦–æ¬¡åŠ è½½ç•Œé¢æ…¢ï¼Œå¿ä¸€æ—¶é£å¹³æµªé™ï¼ŒVite çš„ä¼˜åŠ¿åœ¨äºå¿«é€Ÿçš„å†·å¯åŠ¨ã€å³æ—¶çƒ­æ›´æ–°å’ŒæŒ‰éœ€ç¼–è¯‘ï¼Œç‘•ä¸æ©ç‘œã€‚
    

å…³äºæˆ‘ä»¬
----

> å¦‚æœäº¤æµç¾¤äºŒç»´ç è¿‡æœŸï¼Œè¯·æ·»åŠ æˆ‘çš„å¾®ä¿¡å¤‡æ³¨ `å‰ç«¯`ã€`å…¨æ ˆ` æ‹‰ä½ è¿›ç¾¤

å¾®ä¿¡äº¤æµç¾¤

æˆ‘çš„å¾®ä¿¡

å¾®ä¿¡å…¬ä¼—å·

![](https://s2.loli.net/2023/04/16/FYKL3TRAWipGbwo.jpg)

![](https://s2.loli.net/2022/04/06/yRx8uzj4emA5QVr.jpg)

![](https://s2.loli.net/2022/11/19/OGjum9wr8f6idLX.png)