---
layout: post
title: "嵌入式无线网络应用与开发介绍"
date: "2023-07-31T01:09:14.740Z"
---
嵌入式无线网络应用与开发介绍
==============

![嵌入式无线网络应用与开发介绍](https://img2023.cnblogs.com/blog/555985/202307/555985-20230720150310651-1820464541.png) 无线网络是指通过无线电磁波进行数据传输的网络。其实我们每天都生活在各种电磁波的覆盖下，但是我们却很少能够感知到它。 嵌入式是一个很泛的专业，如果不是专门做底层通信开发或是通信专业人士，基本上也很少嵌入式开发人员会去关注无线通信的原理和机制。

前言
--

无线网络是指通过无线电磁波进行数据传输的网络。其实我们每天都生活在各种电磁波的覆盖下，但是我们却很少能够感知到它。

嵌入式是一个很泛的专业，如果不是专门做底层通信开发或是通信专业人士，基本上也很少嵌入式开发人员会去关注无线通信的原理和机制。

出现这一现象，我觉得主要的原因有：

*   **技术复杂**：通信涉及复杂的协议，标准，和底层技术，入门较难
*   **抽象层增加**：高级语言和框架的出现，开发者已不再需要详细了解底层通信原理
*   **专业化的需求**：通信与硬件，网络，底层系统之间交互密切，通信开发需要特定背景和经验

(一)无线网络介绍
---------

### (1)生活中的无线网络应用

生活中我们接触到的多数是消费级无线产品，比如广播，电视，手机，平板电脑，无线鼠标、无线键盘、无线耳机、家用遥控等等。

在工业或是特殊行业使用比较多的有：应急与救援中的对讲，智慧停车中的地磁车位状态检测，智能抄表，环境检测与监控，汽车胎压检测等等。  
![](https://img2023.cnblogs.com/blog/555985/202307/555985-20230720145236496-1123539398.png)

### (2)按覆盖范围分类

按照覆盖范围，无线网络可以分为广域网，城域网，局域网和个域网。

它们中间有些是重叠的。比如无线城域网中的WiMAX,它与LTE和5G有重叠部分，目前它只在韩国，俄罗斯，巴西等地方使用，随着LTE和5G的不断部署，WiMAX可能还会逐渐地减少。  
![](https://img2023.cnblogs.com/blog/555985/202307/555985-20230720145249059-690414051.png)

### (3)按频率分布分类

无线频率是一种稀缺资源，每个国家和地区允许使用的频段会存在一些差异。同样是4G模块，每个地方所使用的通信信道也存在一些差异。

我们的设备如果要出口到国外，都需要符合国外当地的无线规范。  
常见的认证有：

*   美国的FCC认证
*   欧洲的CE认证(RED认证)
*   中国的3C认证

无线网络信号，按频率高低可以划分为：

类型

频率范围

主要应用

超低频（ULF）

300 Hz - 3 kHz

地球与潜艇通信，地震监测，科学研究等

极低频（ELF）

3 Hz - 30 Hz

海底通信，地球与潜艇通信，科学研究等

低频（LF）

30 kHz - 300 kHz

无线电频率标准，感应式识别，军事通信等

中频（MF）

300 kHz - 3 MHz

AM广播，无线电导航，航空通信等

高频（HF）

3 MHz - 30 MHz

短波广播，海事通信，航空通信等

超高频（UHF）

300 MHz - 3 GHz

无线电广播，电视广播，手机通信等

极高频（VHF）

30 MHz - 300 MHz

航空通信，无线电广播，卫星通信等

甚高频（SHF）

3 GHz - 30 GHz

雷达，卫星通信，无线局域网（Wi-Fi）等

特高频（EHF）

30 GHz - 300 GHz

微波通信，无线电天文学，科学实验等

毫米波（Millimeter Wave）

30 GHz 及以上

5G移动通信，无线数据传输等

### (4)频率与波长的关系

无线通信，实际是通过电磁波进行信息交互的通信，其中频率与波长的关系为：

> 速度 = 频率 × 波长  
> **c = f × λ**

`c` 是光速，`f` 是电磁波的频率， `λ` 是电磁波的波长;

光速不变，频率与波长成反比。

在实际应用中，频率越高，穿透能力就越弱，传输距离就越短，但可以提供更大的带宽。传输距离与传输带宽之间存在较大制约。

比较直观的体验是家里的无线路由器，有些路由器它可以支持2.4G和5G频段。当只使用5G频段时，会发现WiFi的信号比使用2.4G频段较弱一些。

![](https://img2023.cnblogs.com/blog/555985/202307/555985-20230720160358381-92024076.png)

(二)以太网与无线网的区别
-------------

这里的以太网是指`Ethernet`，也就是有线网络。

### (1)无线网的优点

与以太网相比较，无线网的优点有：

*   移动性好，不受物理连接的限制
*   安装灵活便捷
*   可节省布线成本

### (2)无线网的难点

与以太网相比较，无线网需要面对的难点：

*   **信号强度和覆盖范围**:需要考虑距离，障碍物，电磁干扰等情况
*   **干扰和频段拥塞**：同频，多经干扰，电磁，天气等干扰
*   **数据传输速率限制**：难以同时兼顾距离和带宽
*   **设备兼容性**：需要适配不同的无线标准
*   **能耗和电池寿命**:低功耗物联网设备对能耗非常敏感

### (3)在开发上的区别

这里主要描述以太网和无线Wifi网络在开发上的区别。

以太网和无线Wifi网络，它们都是使用`TCP/IP`协议栈，它们主要的区别在于物理层和数据链路层。

它们在协议栈的网络层，传输层，应用层是一样的，如果你是做应用软件开发，那么基本上也感知不到它们有什么区别。

从应用软件开发的角度看，主要是需要注意**网络延迟**与**带宽限制**上的区别。

![](https://img2023.cnblogs.com/blog/555985/202307/555985-20230720145340495-1520819089.png)

(三)在嵌入式系统中的应用
-------------

无线电磁波除了可以作为通信使用，还可以在其它领域使用，比如激光，雷达测距测速等领域

在测距领域的应用，可以参考文章《超声波、毫米波、ToF激光雷达——在低功耗场景的应用选型》

这里我们主要介绍在无线网络通信上的使用。

### (1)移动蜂窝网络

这里说的移动蜂窝网络，指的是目前我们手机上使用的4G/5G网络，它属于广域无线网络。

4G是指第四代移动通信技术，LTE(Long-Term Evolution)是4G的一种实现方式，4G的另外一种实现方式是WiMAX。

目前使用比较广泛的还是LTE(4G)网络。除了在手机上使用，在物联网领域的使用也在逐渐的增加，比如4G摄像机，这里选择使用4G 模块进行通信，主要原因是需要传视频数据，需要的带宽比较大，另外是安装方便，不需要拉网线。

4G摄像机，根据所传输图像的码流大小，也可以选择不同的4G模块，常用的有CAT1 和CAT4。它们的带宽如下：

类型

上行带宽

下行带宽

**CAT1**

1.4Mbps左右

10Mbps左右

**CAT4**

5Mbps左右

150Mbps左右

**CAT6**

50Mbps左右

300Mbps左右

**CAT12**

100Mbps左右

600Mbps左右

**CAT16**

100Mbps左右

1Gbps左右

之所以称移动网络为**蜂窝网络**，是因为它的网络覆盖区域被划分为许多小区，每个小区之间彼此不重叠，类似于蜂窝状。  
它主要的特点有：

1.  **小区划分**：每个小区由一个基站负责服务
2.  **支持移动性**：用户在移动中可以保持通信连接，自动连接新基站。
3.  **频谱复用**：将频谱划分为多个子载波，在不同小区间分配，相邻小区使用不同频段，以降低同频干扰。
4.  **多代网络兼容**：一般同时支持2G 的GSM，3G的UMTS和CDMA2000，4G的LTE和WiMAX，以及5G 的NR（New Radio）

### (2)NB-IoT物联网应用

NB-IoT(Narrowband Internet of Things)是一种低功耗广域物联网技术。

它是LTE(4G)标准的一部分，它的主要技术特点是：

*   **低功耗**，PSM模式下一节电池可以做到用5年
*   **覆盖面积广**：能实现比 GSM 高20db的覆盖增益
*   **窄带宽**：标准带宽为180KHz
*   **支持大规模连接**:理论一个网络小区可以同时连接10万个设备
*   **与现有网络兼容**:LTE标准的一部分，可以利用已有的LTE网络基础设施进行部署。

基于它低带宽，高覆盖面，低功耗的特点，目前它主要的应用有：

*   **智能水、电表**:通过无线连接，发送水表，电表数值
*   **智能停车场**：实时监测车位状态，比如地磁停车监测
*   **智能农业**：用于土壤温湿度等数值监测
*   **智能物流**: 追踪货物位置，温度，震动等状态
*   **智慧城市**：灯光控制，环境检测等

### (3)zigbee 技术

zigbee 是运行在2.4GHz频段的一种通信技术，它与我们2.4G Wifi属于同一个频段，同时它也还可以运行在868 MHz和915 MHz频段。它使用的标准是IEEE 802.15.4。它的带宽只有250kbps。

它与NB-IOT的应用有些重叠，区别在于NB-IOT是属于广域无线网，zigbee是属于局域无线网，zigbee的覆盖范围一般在1~2000米。

**优点是**：低功耗，低成本，短延时，高容量，免执照频段，低复杂度

**缺点是**：低速率，近距离

目前比较多的是应用在智能家居中的智能灯具、智能插座、智能开关、智能门锁等等。

**因为zigbee与蓝牙，Wifi属于同一个工作频段，所以它们之间容易相互干扰**。

### (4)无线Wifi网络

无线Wifi属于局域网上的一个技术，它使用的是802.11标准。它是在以前以太网基础上发展出来的一个技术。

802.11 是Wifi技术的一个系列标准，常用的有802.11b、802.11g、802.11n、802.11ac和802.11ax等，后面为了更好的推广，将原来的标准直接改成了wifi名字。

名称

对应标准

发布年份

最大传输速率

频段

**Wi-Fi 1**

802.11b

1999年

11 Mbps

2.4 GHz

**Wi-Fi 2**

802.11a

1999年

54 Mbps

2.4 GHz

**Wi-Fi 3**

802.11g

2003年

54 Mbps

2.4 GHz

**Wi-Fi 4**

802.11n

2009年

600 Mbps

2.4 GHz和5 GHz

**Wi-Fi 5**

802.11ac

2014年

1.3 Gbps

5 GHz

**Wi-Fi 6**

802.11ax

2019年

10 Gbps

2.4 GHz和5 GHz

wifi在家庭，办公室，公共产所，智能家居等领域都有广泛的应用。

在嵌入式开发中，如果使用wifi无线网络，需要考虑的是路由器网络兼容性，以及在低功耗产品中的功耗控制等问题。

具体查看文章《嵌入式低功耗WiFi设备保活功耗分析》

### (5)Bluetooth 蓝牙网络

蓝牙属于个域网中的一个应用，适用于短距离间通信，一般距离在1~10m。相比比较于zigbee,蓝牙的功耗要高一些。

蓝牙又分为经典蓝牙(Classic Bluetooth) 和 低功耗蓝牙(Bluetooth Low Energy，BLE)

名称

带宽

频道

带宽

从设备数

**经典蓝牙**

1 Mbps左右

79个

1 MHz

7 个

**低能耗蓝牙**

1 Mbps以下

40个

2 MHz

几十个

相比较于其它无线技术，蓝牙有下面几点区别：

*   从设备只能与主设备通信
*   经典蓝牙只能连接7个从设备

### (6)各技术综合对比

在实际开发设计的时候，我们选择通信模块主要考虑的参数有:传输带宽，传输距离，功耗以及成本。

根据上面介绍的几种无线通信技术和标准，我们做个简单的对比。

其中蜂窝网络我们以4G为代表

类型

覆盖范围

工作频率

速率

功耗

成本

**蜂窝网络(4G)**

广泛覆盖整个  
城市和城镇

FDD-LTE：  
上行1.8-2.1 GHz  
下行2.1-2.6 GHz

5-80Mbps

高

高

**NB-IOT**

大于4G网络

LTE Band 8：  
上行:880 MHz-915 MHz  
下行:925 MHz-960 MHz

180Kbps

低

低

**Zigbee**

1-2000m

2.4GHz

11Mbps

低

低

**wifi**

1-100m

2.4GHz

11M-10Gbps

高

中

**Bluetooth**

1-10m

2.4GHz

1M-2Mbps

较低

低

(四)问题与分析
--------

这里主要介绍无线wifi设备在开发中遇到的问题，比如wifi摄像机以及同技术类型的可视门铃，可视猫眼，baby monitor等设备，它们使用的都是wifi网络进行数据通信。

### (1)问题现象

*   在距离路由器比较远或是有障碍物遮挡(如墙体)的情况，wifi信号会比较弱，在传输视频数据的时候，经常会出现卡顿或是离线的问题。
*   有些设备在距离路由器比较近的情况下，网络状态也不好。

### (2)原因分析

可能存在的原因：

*   设备wifi天线与设备结构未进行匹配。
*   设备所在的空间，有其它的同频率无线信号干扰。
*   传输的视频流码流较大，导致网络拥塞。

### (3)解决方案

主要的问题解决方向有：

*   测试天线与设备的匹配情况，比如传导，增益，阻抗等。
*   使用跳频技术，尽量选择干扰较少的信道进行通信。
*   使用压缩比更高的视频压缩技术，比如H.265,以降低视频码流。

结尾
--

所有的技术和标准都在不断地更新与迭代，无线通信技术也不例外。

以上内容，如有错误，欢迎批评指正~

\---------------------------End---------------------------

如需获取更多内容

请关注 liwen01 公众号

![](https://img2023.cnblogs.com/blog/555985/202212/555985-20221229171054114-894213487.jpg)