---
layout: post
title: "Redash å¯è§†åŒ–BIç³»ç»Ÿéƒ¨ç½²å®‰è£…åŠç®€å•ä½¿ç”¨"
date: "2023-05-29T01:09:49.557Z"
---
Redash å¯è§†åŒ–BIç³»ç»Ÿéƒ¨ç½²å®‰è£…åŠç®€å•ä½¿ç”¨
-----------------------

è¿™ç¯‡æ–‡ç« ä¸»è¦ä¸ºä»‹ç»ä¸€ä¸‹Redashçš„ä½¿ç”¨å’Œå®‰è£…

æ¦‚è§ˆ
--

Redash ä¸»è¦ä½¿ç”¨çš„è¯­è¨€ä¸º Python å’Œ TypeScript

è¿™ä¸ªå®‰è£…ä¸»è¦æ˜¯åŸºäºDocker æ¥å®‰è£…çš„ï¼Œå®˜ç½‘æ•™ç¨‹åŸºæœ¬æ²¡æœ‰ä¸æ˜¯åŸºäºDocker é•œåƒå®‰è£…çš„ï¼Œå¦‚æœæ˜¯å•å•ä½¿ç”¨å®ƒçš„æä¾›çš„ docker é•œåƒæ¥å®‰è£…è¿˜éœ€è¦è‡ªå·±å®‰è£…Rediså’ŒPostgreSQLç¯å¢ƒçš„ï¼Œè¿™é‡Œå°±ä½¿ç”¨ docker swarm å°†ä½œä¸ºdockeré›†ç¾¤å»å®‰è£…ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰æ‰€éœ€ç¯å¢ƒï¼Œä½ è‡ªå·±ä¹Ÿå¯ä»¥ä½¿ç”¨ Docker Compose å»å®‰è£…ã€‚ï¼ˆä¸€å¼€å§‹æ˜¯æƒ³é€šè¿‡docker é•œåƒå®‰è£…ï¼Œå‘ç°å®˜ç½‘æ²¡æä¾›è¿™ä¸ªæ•™ç¨‹ï¼Œè‡ªå·±å®‰è£…åªèƒ½ä»docker é•œåƒä¸­åæŸ¥å‡ºå®‰è£…å‘½ä»¤ï¼ŒåŒæ—¶è¿˜éœ€è¦å®‰è£…redis å’ŒPostgreSQLç¯å¢ƒï¼Œå®åœ¨æœ‰ç‚¹éº»çƒ¦ï¼Œåæ¥ä¸å¾—ä¸æ”¾å¼ƒğŸ˜ªğŸ˜ª ï¼‰

> Redashæ—¨åœ¨è®©ä»»ä½•äººï¼Œæ— è®ºæŠ€æœ¯æˆç†Ÿç¨‹åº¦å¦‚ä½•ï¼Œéƒ½èƒ½åˆ©ç”¨å¤§å¤§å°å°çš„æ•°æ®ã€‚SQLç”¨æˆ·åˆ©ç”¨Redashæ¥æ¢ç´¢ã€æŸ¥è¯¢ã€å¯è§†åŒ–å’Œå…±äº«æ¥è‡ªä»»ä½•æ•°æ®æºçš„æ•°æ®ã€‚ä»–ä»¬çš„å·¥ä½œåè¿‡æ¥ä½¿ç»„ç»‡ä¸­çš„ä»»ä½•äººéƒ½èƒ½ä½¿ç”¨è¿™äº›æ•°æ®ã€‚æ¯å¤©ï¼Œå…¨ä¸–ç•Œæ•°åƒä¸ªç»„ç»‡çš„æ•°ç™¾ä¸‡ç”¨æˆ·éƒ½åœ¨ä½¿ç”¨Redashæ¥å¼€å‘è§è§£å¹¶åšå‡ºæ•°æ®é©±åŠ¨çš„å†³ç­–ã€‚  
> from [https://github.com/getredash/redash](https://github.com/getredash/redash)

å®˜ç½‘æ˜¯ç”¨å®‰è£…æ•™ç¨‹ï¼Œä¸»è¦æ˜¯æ ¹æ®[å®˜ç½‘çš„å®‰è£…æ•™ç¨‹](https://redash.io/help/open-source/setup#docker)æ¥å®‰è£…çš„

1.  AWS EC2 AMI
2.  DigitalOcean
3.  Google Compute Engine Image
4.  Other
5.  Docker

> For basic deployments we recommend a minimum of 4GB of RAM and reasonable amount of CPU allocation. As usage grows you might need additional RAM and CPU power to support increased number of background workers and API processes.  
> To create an instance, you have the following options:
> 
> 1.  AWS EC2 AMI
> 2.  DigitalOcean
> 3.  Google Compute Engine Image
> 4.  Other
> 5.  Docker

å‰ä¸‰ç§éƒ½æ˜¯çš„å›½å¤–çš„æœåŠ¡å™¨äº‘æœåŠ¡æ¥çš„ï¼Œä¸€èˆ¬åœ¨å›½å†…éƒ½ç”¨ä¸ä¸Šï¼Œè€Œä¸”å‰ä¸‰ç§éƒ½æ˜¯åŸºäº äº‘æœåŠ¡ä¸Šæä¾›çš„é•œåƒæ„å»ºï¼Œä¸å®ƒä»¬å¼ºå…³è”ï¼Œæˆ‘ä»¬å°±ä¸ç”¨çœ‹äº†ã€‚ç¬¬å››ç§otheræ˜¯è‡ªå·±åŸºäº`Ubuntu 18.04 server`æœåŠ¡å™¨ ï¼Œå®‰è£… Dockerå’Œ Docker Compose ï¼ŒåŸºäº æä¾›çš„docker-compose æ–‡ä»¶å»å¯åŠ¨ã€‚ç¬¬äº”ä¸­docker æ˜¯ å»ºç«‹åœ¨è‡ªå·±æœ‰äº†docker ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œå»ä½¿ç”¨å®ƒä»¬çš„é•œåƒæ„å»ºæˆ–è€…è‡ªå·±æ ¹æ®å®ƒä»¬çš„docker-compose æ–‡ä»¶ çœ‹çœ‹éœ€è¦å“ªäº›æœåŠ¡ï¼Œç„¶åè‡ªå·±å¯åŠ¨ï¼ˆå…¶å®è¿˜æ˜¯åªèƒ½ä½¿ç”¨å®ƒä»¬çš„dockeré•œåƒï¼Œå…¶ä¸­éœ€è¦çš„Redis and PostgreSQLç¯å¢ƒéœ€è¦è‡ªå·±å®‰è£…å®ƒçš„é•œåƒé‡Œå¹¶ä¸æä¾›ï¼Œå®ƒæ²¡æœ‰æä¾›åŸå§‹docker é•œåƒçš„æ„å»ºå‘½ä»¤ğŸ˜ªï¼Œé™¤éè‡ªå·±æ ¹æ®dockeré•œåƒåç¼–è¯‘å‡ºdockerfile æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯å¯ä»¥ï¼Œä½†æ˜¯æœ‰äº›éº»çƒ¦ï¼‰ã€‚

ä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥æ ¹æ®dockeré•œåƒï¼Œç”Ÿæˆdockerfileï¼Œå…¶ä¸­ `redash/redash:8.0.2.b37747` æ˜¯redash çš„dockeré•œåƒä¹‹ä¸€

    sudo docker run -v /var/run/docker.sock:/var/run/docker.sock --rm alpine/dfimage  -sV=1.36  redash/redash:8.0.2.b37747
    

å®‰è£…éƒ¨ç½²
----

### æ–¹æ¡ˆ1 ä½¿ç”¨docker + docker compose ï¼ˆæ¨èï¼‰

å‚è€ƒè¿™ä¸ªé¡¹ç›®éƒ¨ç½²ï¼š [https://github.com/KANLON/setup](https://github.com/KANLON/setup)

ä»…æ”¯æŒUbuntu ç³»ç»Ÿï¼ŒåŸºæœ¬ç›¸å½“äºä¸€é”®éƒ¨ç½²

    echo "ä¸‹è½½æ‰§è¡Œè„šæœ¬å’Œdocker-composeé…ç½®æ–‡ä»¶"
    git clone https://github.com/KANLON/setup.git 
    cd setup
    sudo chmod +x ./setup.sh
    echo "å¼€å§‹æ‰§è¡Œï¼Œå¦‚æœè¦å¼‚æ­¥æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ nohup ./setup.sh & è¿™æ ·æ¥æ‰§è¡Œ"
    ./setup.sh
    

### æ–¹æ¡ˆ2 ä½¿ç”¨docker + docker swarm

é¦–å…ˆéœ€è¦å®‰è£… docker swarm é›†ç¾¤ï¼Œç„¶åè¿è¡Œè¿™ä¸ªçš„ docker-compose æ–‡ä»¶æ¥å®‰è£…redashå®¹å™¨é•œåƒã€‚

    version: '3.6'
    services:
      server:
        image: redash/redash:8.0.2.b37747
        command: server
        depends_on:
          - redash_postgres
          - redash_redis
        ports:
          - "5001:5000"
        deploy:
          mode: replicated
          replicas: 1
          endpoint_mode: vip
          update_config:
            parallelism: 1
            delay: 3s
            order: start-first
        environment:
          PYTHONUNBUFFERED: 0
          REDASH_LOG_LEVEL: "INFO"
          REDASH_REDIS_URL: "redis://redash_redis:6379/0"
          REDASH_DATABASE_URL: "postgresql://postgres:123456@redash_postgres/postgres"
          REDASH_COOKIE_SECRET: "123456"
          REDASH_WEB_WORKERS: 4
          #é‚®ç®± 
          REDASH_MAIL_SERVER: "smtp.exmail.qq.com"
          REDASH_MAIL_PORT: 465
          REDASH_MAIL_USE_TLS: "false"
          REDASH_MAIL_USE_SSL: "true"
          REDASH_MAIL_USERNAME: "no-reply@yoursite.com"
          REDASH_MAIL_PASSWORD: "111111"
          REDASH_MAIL_DEFAULT_SENDER: "no-reply@yoursite.com"
          REDASH_HOST: "http://redash.mysite.com"
      worker:
        image: redash/redash:8.0.2.b37747
        command: scheduler
        deploy:
          mode: replicated
          replicas: 1
          endpoint_mode: vip
          update_config:
            parallelism: 1
            delay: 3s
            order: start-first
        environment:
          PYTHONUNBUFFERED: 0
          REDASH_LOG_LEVEL: "INFO"
          REDASH_REDIS_URL: "redis://redash_redis:6379/0"
          REDASH_DATABASE_URL: "postgresql://postgres:123456@redash_postgres/postgres"
          QUEUES: "queries,scheduled_queries,celery"
          REDASH_COOKIE_SECRET: "123456"
          WORKERS_COUNT: 2
          #é‚®ç®± 
          REDASH_MAIL_SERVER: "smtp.exmail.qq.com"
          REDASH_MAIL_PORT: 465
          REDASH_MAIL_USE_TLS: "false"
          REDASH_MAIL_USE_SSL: "true"
          REDASH_MAIL_USERNAME: "no-reply@yoursite.com"
          REDASH_MAIL_PASSWORD: "111111"
          REDASH_MAIL_DEFAULT_SENDER: "no-reply@yoursite.com"
          REDASH_HOST: "http://redash.mysite.com"
      redis:
        image: redis:5.0-alpine
        deploy:
          mode: replicated
          replicas: 1
          endpoint_mode: vip
          update_config:
            parallelism: 1
            delay: 3s
            order: start-first
      postgres:
        image: postgres:9.6-alpine
        volumes:
          - postgres-data:/data/postgresql/data
        environment:
          POSTGRES_PASSWORD: 123456
        deploy:
          mode: replicated
          replicas: 1
          endpoint_mode: vip
          update_config:
            parallelism: 1
            delay: 3s
            order: start-first
    volumes:
      postgres-data:
        name: postgres-data
    networks:
      default:
        external:
          name: default_overlay
    

redash å®¹å™¨é•œåƒdocker-composeä¸‹è½½åœ°å€ä¸ºï¼š [https://raw.githubusercontent.com/KANLON/setup/master/data/docker-compose-docker-swarm.yml](https://raw.githubusercontent.com/KANLON/setup/master/data/docker-compose-docker-swarm.yml)

å¯åŠ¨å‘½ä»¤`sudo docker stack deploy -c redash8.0.yml --with-registry-auth redash-service`

æ‰§è¡Œå®Œdocker å®¹å™¨ä¹‹åçš„ï¼Œè¿›å…¥ redash server å®¹å™¨ä¸­ï¼Œåˆ° /app ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ `./manage.py database create_tables` åˆ›å»ºè¡¨ã€‚

redash ç®€å•ä½¿ç”¨
-----------

å…¶å®å®˜ç½‘æœ¬èº«å°±æœ‰ä¸€ä¸ªåŠ¨å›¾ä»‹ç»ï¼Œå‚è€ƒè¯¥åŠ¨å›¾å±•ç¤ºï¼ŒåŸºæœ¬å¯ä»¥å¿«é€Ÿä½¿ç”¨redashä¸Šæ‰‹åˆ›å»ºå¯è§†åŒ–æ•°æ®å±•ç¤ºï¼š

[https://redash.io/](https://redash.io/)  
![redashå®˜ç½‘ä½¿ç”¨](https://img-blog.csdnimg.cn/6e4e641885004a98a098226394395c5a.png)

æˆ–è€…å‚è€ƒæˆ‘åœ¨bç«™ä¸­çš„è§†é¢‘

[https://www.bilibili.com/video/BV1vq4y1L7tE/?spm\_id\_from=333.999.0.0&vd\_source=9d0c39c2f33c7d68ba4b01e4303dc8c1](https://www.bilibili.com/video/BV1vq4y1L7tE/?spm_id_from=333.999.0.0&vd_source=9d0c39c2f33c7d68ba4b01e4303dc8c1)

æµ‹è¯•åœ°å€
----

è‡ªå·±æ­å»ºçš„ä¸€ä¸ª redash ç³»ç»Ÿåœ°å€ï¼š [http://redash.kanlon.top](http://redash.kanlon.top)

è´¦å·å’Œå¯†ç è·å–ï¼Œå…³æ³¨ CrudBoys å…¬ä¼—å· å›å¤ â€œredashç³»ç»Ÿâ€ è·å–

å‚è€ƒ
--

1\. [Redash ä½¿ç”¨æµç¨‹](https://jerrytechblog.com/2020/07/31/redash-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/)  
2\. [æ•°æ®å¯è§†åŒ–çš„å¼€æºæ–¹æ¡ˆ: Superset vs Redash vs Metabase (äºŒ)](https://cloud.tencent.com/developer/article/1464171)  
3\. [é€šè¿‡ Docker å®‰è£… Redash](https://www.isky.wang/notes/docker-swarm-install-redash/)  
4\. [redash å®˜ç½‘](https://redash.io/)  
5\. [å®˜ç½‘å®‰è£…æ•™ç¨‹](https://redash.io/help/open-source/setup)  
6\. [dockerfile æ–‡ä»¶](https://raw.githubusercontent.com/getredash/redash/07f047c36b681eed559bbc45c9ad4dd77081c2e3/Dockerfile)  
7\. [æ ¹æ®é•œåƒç”Ÿæˆdockerfile](https://hub.docker.com/r/alpine/dfimage)

posted on 2023-05-28 23:18Â  [kanlon](https://www.cnblogs.com/kanlon2015/)Â  é˜…è¯»(8)Â  è¯„è®º(0)Â  [ç¼–è¾‘](https://i.cnblogs.com/EditPosts.aspx?postid=17439147)Â  [æ”¶è—](javascript:void(0))Â  [ä¸¾æŠ¥](javascript:void(0))