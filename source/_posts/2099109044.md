---
layout: post
title: "Electron-ChatGPTæ¡Œé¢ç«¯ChatGPTå®ä¾‹|electron25+vue3èŠå¤©AIæ¨¡æ¿EXE"
date: "2023-06-09T01:21:17.733Z"
---
Electron-ChatGPTæ¡Œé¢ç«¯ChatGPTå®ä¾‹|electron25+vue3èŠå¤©AIæ¨¡æ¿EXE
=====================================================

åŸºäºelectron25+vite4+vue3ä»¿åˆ¶chatgptå®¢æˆ·ç«¯èŠå¤©æ¨¡æ¿_ElectronChatGPT_ã€‚

**electron-chatgpt** ä½¿ç”¨æœ€æ–°æ¡Œé¢ç«¯æŠ€æœ¯Electron25.xç»“åˆVite4.xå…¨å®¶æ¡¶æŠ€æœ¯å¼€å‘è·¨ç«¯æ¨¡ä»¿ChatGPTæ™ºèƒ½èŠå¤©ç¨‹åºæ¨¡æ¿ã€‚æ”¯æŒç»å…¸+åˆ†æ ä¸¤ç§å¸ƒå±€ã€æš—é»‘+æ˜äº®ä¸»é¢˜æ¨¡å¼ï¼Œé›†æˆelectronå°è£…å¤šçª—å£åŠé€šè®¯åŠŸèƒ½ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608224710969-1190809543.png)

### æŠ€æœ¯æ ˆ

*   ç¼–ç å·¥å…·ï¼švscode
*   æ¡†æ¶æŠ€æœ¯ï¼šelectron25+vite4+vue3+pinia2
*   ç»„ä»¶åº“ï¼šveplus (åŸºäºvue3è‡ªå®šä¹‰ç»„ä»¶åº“)
*   æ‰“åŒ…å·¥å…·ï¼šelectron-builder^23.6.0
*   è°ƒè¯•å·¥å…·ï¼šelectron-devtools-installer^3.2.0
*   ä»£ç é«˜äº®ï¼šhighlight.js^11.7.0
*   markdownç»„ä»¶ï¼švue3-markdown-it
*   æœ¬åœ°ç¼“å­˜ï¼špinia-plugin-persistedstate^3.1.0
*   electronç»“åˆviteæ’ä»¶ï¼švite-plugin-electron^0.11.2

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608225838314-575528340.gif)

### é¡¹ç›®ç»“æ„

åŸºäºelectronæœ€æ–°ç‰ˆæœ¬èåˆvite4.xæŠ€æœ¯æ­å»ºæ¨¡ä»¿chatgptæ¡Œé¢ç«¯ç¨‹åºã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608230224370-316497642.png)

å¦‚æœå¯¹electron+vite4åˆ›å»ºè·¨ç«¯åº”ç”¨åŠå¤šå¼€çª—å£æ„Ÿå…´è¶£ï¼Œå¯ä»¥å»çœ‹çœ‹ä¹‹å‰çš„è¿™ä¸¤ç¯‡åˆ†äº«æ–‡ç« ã€‚

[https://www.cnblogs.com/xiaoyan2017/p/17436076.html](https://www.cnblogs.com/xiaoyan2017/p/17436076.html)

[https://www.cnblogs.com/xiaoyan2017/p/17442502.html](https://www.cnblogs.com/xiaoyan2017/p/17442502.html)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608230458346-124179030.gif)

éšç€electronå¿«é€Ÿè¿­ä»£æ›´æ–°ï¼ŒåŠ ä¸Šviteæé€Ÿç¼–è¯‘ï¼ŒäºŒè€…é…åˆåˆ›å»ºçš„åº”ç”¨è¿è¡Œé€Ÿåº¦è¶…å¿«ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231021946-576189488.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231053317-1139545999.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231119856-1370726645.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231214565-532964826.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231136235-1003809361.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231307472-1340277945.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231406421-1845756714.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231423521-754250777.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231443629-541350801.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231457087-189807409.png)

### Vue3æ¡Œé¢UIç»„ä»¶åº“

è€ƒè™‘åˆ°é¡¹ç›®æ¯”è¾ƒè½»é‡çº§ï¼Œæ‰€ä»¥é‡‡ç”¨è‡ªç ”vue3ç»„ä»¶åº“**ve-plus**ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608231825503-393487283.png)

å…³äºveplusç»„ä»¶åº“è¿™é‡Œä¸ä½œè¿‡å¤šä»‹ç»ï¼Œä¹‹å‰æœ‰è¿‡ä¸€ç¯‡åˆ†äº«æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥å»çœ‹çœ‹ã€‚

[https://www.cnblogs.com/xiaoyan2017/p/17170454.html](https://www.cnblogs.com/xiaoyan2017/p/17170454.html)

### é¡¹ç›®å¸ƒå±€

é¡¹ç›®æ•´ä½“å¤§è‡´åˆ†ä¸º**é¡¶éƒ¨å¯¼èˆªå·¥å…·æ +å·¦ä¾§ä¼šè¯è®°å½•/æ“ä½œé“¾æ¥+å³ä¾§ä¼šè¯åŒº/ç¼–è¾‘æ¡†**ç­‰æ¨¡å—ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608232629328-179120759.png)

<template\>
    <div class\="vegpt\_\_layout flexbox flex-col"\>
        <!-- //é¡¶éƒ¨å·¥å…·æ  \-->
        <Toolbar />
        
        <div class\="ve\_\_layout-body flex1 flexbox"\>
            <!-- //ä¾§è¾¹æ  \-->
            <div class\="ve\_\_layout-menus flexbox" :class\="{'hidden': store.config.collapse}"\>
                <aside class\="ve\_\_layout-aside flexbox flex-col"\>
                    <ChatNew />
                    <Scrollbar class\="flex1" autohide size\="4" gap\="1"\>
                        <ChatList />
                    </Scrollbar\>
                    <ExtraLink />
                    <Collapse />
                </aside\>
            </div\>

            <!-- //ä¸»ä½“åŒºåŸŸ \-->
            <div class\="ve\_\_layout-main flex1 flexbox flex-col"\>
                <Main />
            </div\>
        </div\>
    </div\>
</template\>

### Electronä¸»è¿›ç¨‹å…¥å£

æ ¹ç›®å½•ä¸‹æ–°å»º electron-main.js ä½œä¸ºä¸»è¿›ç¨‹å…¥å£æ–‡ä»¶ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608233336790-2044861380.png)

/\*\*
 \* ä¸»è¿›ç¨‹å…¥å£
 \* @author YXY
 \*/

const { app, BrowserWindow } \= require('electron')

const MultiWindow \= require('./src/multiwindow')

// å±è”½å®‰å…¨è­¦å‘Š
// ectron Security Warning (Insecure Content-Security-Policy)
process.env\['ELECTRON\_DISABLE\_SECURITY\_WARNINGS'\] = 'true'

const createWindow \= () => {
    let win \= new MultiWindow()
    win.createWin({isMainWin: true})
}

app.whenReady().then(() \=> {
    createWindow()
    app.on('activate', () => {
        if(BrowserWindow.getAllWindows().length === 0) createWindow()
    })
})

app.on('window-all-closed', () => {
    if(process.platform !== 'darwin') app.quit()
})

ä½¿ç”¨electronçš„viteæ’ä»¶ï¼Œåœ¨**vite.config.js**ä¸­é…ç½®å…¥å£ã€‚

import { defineConfig, loadEnv } from 'vite'
import vue from '@vitejs/plugin-vue'
import electron from 'vite-plugin-electron'
import { resolve } from 'path'
import { parseEnv } from './src/utils/env'

export default defineConfig(({ command, mode }) => {
  const viteEnv \= loadEnv(mode, process.cwd())
  const env \= parseEnv(viteEnv)

  return {
    plugins: \[
      vue(),
      electron({
        // ä¸»è¿›ç¨‹å…¥å£æ–‡ä»¶
        entry: 'electron-main.js'
      })
    \],
    
    /\*æ„å»ºé€‰é¡¹\*/
    build: {
      /\* minify: 'esbuild', // æ‰“åŒ…æ–¹å¼ esbuild(æ‰“åŒ…å¿«)|terser
      chunkSizeWarningLimit: 2000, // æ‰“åŒ…å¤§å°è­¦å‘Š
      rollupOptions: {
          output: {
              chunkFileNames: 'assets/js/\[name\]-\[hash\].js',
              entryFileNames: 'assets/js/\[name\]-\[hash\].js',
              assetFileNames: 'assets/\[ext\]/\[name\]-\[hash\].\[ext\]',
          }
      } \*/
      
      // å¦‚æœæ‰“åŒ…æ–¹å¼æ˜¯terserï¼Œåˆ™é…ç½®å¦‚ä¸‹
      /\* minify: "terser",
      terserOptions: {
        compress: {
          // å»æ‰æ‰€æœ‰consoleå’Œdebugger
          // drop\_console: true,
          // drop\_debugger: true,

          drop\_console: command !== 'serve',
          drop\_debugger: command !== 'serve',
          //pure\_funcs:\['console.log'\] // ç§»é™¤console.log
        }
      } \*/
    },
    esbuild: {
      // æ‰“åŒ…å»é™¤ console.log å’Œ debugger
      drop: env.VITE\_DROP\_CONSOLE && command === 'build' ? \["console", "debugger"\] : \[\]
    },

    /\*å¼€å‘æœåŠ¡å™¨é€‰é¡¹\*/
    server: {
      // ç«¯å£
      port: env.VITE\_PORT,
      // ...
    },

    resolve: {
      // è®¾ç½®åˆ«å
      alias: {
        '@': resolve(\_\_dirname, 'src'),
        '@assets': resolve(\_\_dirname, 'src/assets'),
        '@components': resolve(\_\_dirname, 'src/components'),
        '@views': resolve(\_\_dirname, 'src/views')
      }
    }
  }
})

_**éœ€è¦æ³¨æ„**_ï¼šç”±äºç›®å‰Electron å°šæœªæ”¯æŒ "type": "module"ï¼Œéœ€è¦åœ¨package.jsonä¸­å»æ‰ï¼Œå¹¶ä¸”é…ç½®Â "main": "electron-main.js",Â å…¥å£ã€‚

### Electronè‡ªå®šä¹‰æ— è¾¹æ¡†çª—å£å·¥å…·æ 

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608234325036-1289405919.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608234342040-724570157.png)

åˆ›å»ºçª—å£çš„æ—¶å€™é…ç½®Â frame: falseÂ å‚æ•°ï¼Œåˆ›å»ºçš„çª—å£åˆ™æ²¡æœ‰ç³»ç»Ÿé¡¶éƒ¨å¯¼èˆªæ åŠè¾¹æ¡†ã€‚æ‹–æ‹½åŒºåŸŸ/æœ€å¤§åŒ–/æœ€å°åŒ–åŠå…³é—­æŒ‰é’®å‡éœ€è¦è‡ªå®šä¹‰æ“ä½œã€‚

é€šè¿‡è®¾ç½®css3å±æ€§Â \-webkit-app-region: dragÂ ï¼Œåˆ™å¯å¯¹è‡ªå®šä¹‰åŒºåŸŸè¿›è¡Œæ‹–æ‹½æ“ä½œï¼Œè®¾ç½®åæŒ‰é’®/é“¾æ¥ç‚¹å‡»åˆ™ä¼šå¤±æ•ˆï¼Œè¿™æ—¶é€šè¿‡å¯¹æŒ‰é’®æˆ–é“¾æ¥è®¾ç½®-webkit-app-region: no-dragå°±å¯æ¢å¤äº‹ä»¶å“åº”ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608235458516-920087621.png)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230608235539208-47626868.png)

ä¸è¿‡è®¾ç½®-webkit-app-region: dragï¼Œç‚¹å‡»é¼ æ ‡å³é”®ï¼Œä¼šå‡ºç°ä¸Šå›¾ç³»ç»Ÿèœå•ï¼Œç»è¿‡ä¸€ç•ªè°ƒè¯•ï¼Œwindowsä¸‹å¯ä»¥æš‚æ—¶é€šè¿‡å¦‚ä¸‹æ–¹æ³•å±è”½å³é”®èœå•ã€‚

// å±è”½ç³»ç»Ÿå³é”®èœå•
win.hookWindowMessage(278, () => {
    win.setEnabled(false)
    setTimeout(() \=> {
        win.setEnabled(true)
    }, 100)

    return true
})

åœ¨**_components/titlebar_**ç›®å½•è‡ªå®šä¹‰å·¥å…·æ æ¡ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609000107716-1174498649.png)

control.vueè‡ªå®šä¹‰æœ€å¤§åŒ–/æœ€å°åŒ–/å…³é—­æŒ‰é’®

<template\>
    <div class\="vegpt\_\_control ve\_\_nodrag"\>
        <div class\="vegpt\_\_control-btns" :style\="{'color': color}"\>
            <slot />
            <div v-if\="isTrue(minimizable)" class\="btn win-btn win-min" @click\="handleMin"\><i class\="iconfont ve-icon-minimize"\></i\></div\>
            <div v-if\="isTrue(maximizable) && winCfg.window.resizable" class\="btn win-btn win-maxmin" @click\="handleRestore"\>
                <i class\="iconfont" :class\="isMaximized ? 've-icon-maxrestore' : 've-icon-maximize'"\></i\>
            </div\>
            <div v-if\="isTrue(closable)" class\="btn win-btn win-close" @click\="handleQuit"\><i class\="iconfont ve-icon-close"\></i\></div\>
        </div\>
    </div\>
</template\>

<template>
    <div class="vegpt\_\_control ve\_\_nodrag">
        <div class="vegpt\_\_control-btns" :style="{'color': color}">
            <slot />
            <div v-if\="isTrue(minimizable)" class="btn win-btn win-min" @click="handleMin"><i class="iconfont ve-icon-minimize"></i></div>
            <div v-if\="isTrue(maximizable) && winCfg.window.resizable" class="btn win-btn win-maxmin" @click="handleRestore">
                <i class="iconfont" :class="isMaximized ? 've-icon-maxrestore' : 've-icon-maximize'"></i>
            </div>
            <div v-if\="isTrue(closable)" class="btn win-btn win-close" @click="handleQuit"><i class="iconfont ve-icon-close"></i></div>
        </div>
    </div>
</template>


<script setup>
    import { onMounted, ref } from 'vue'
    import { winCfg, setWin } from '@/multiwindow/actions'
    import { appStore } from '@/pinia/modules/app'
    import { isTrue } from '@/utils'

    const appState \= appStore()

    const props \= defineProps({
        // æ ‡é¢˜é¢œè‰²
        color: String,

        // çª—å£æ˜¯å¦å¯ä»¥æœ€å°åŒ–
        minimizable: { type: \[Boolean, String\], default: true },
        // çª—å£æ˜¯å¦å¯ä»¥æœ€å¤§åŒ–
        maximizable: { type: \[Boolean, String\], default: true },
        // çª—å£æ˜¯å¦å¯ä»¥å…³é—­
        closable: { type: \[Boolean, String\], default: true }
    })

    // æ˜¯å¦æœ€å¤§åŒ–
    let isMaximized = ref(false)

    onMounted(() \=> {
        window.electronAPI.invoke('win\_\_isMaximized').then(data => {
            console.log(data)
            isMaximized.value \= data
        })
        window.electronAPI.receive('win\_\_hasMaximized', (e, data) => {
            console.log(data)
            isMaximized.value \= data
        })
    })

    // æœ€å°åŒ–
    const handleMin = () => {
        window.electronAPI.send('win\_\_minimize')
    }
    // æœ€å¤§åŒ–/è¿˜åŸ
    const handleRestore = () => {
        window.electronAPI.invoke('win\_\_max2min').then(data => {
            console.log(data)
            isMaximized.value \= data
        })
    }
    // å…³é—­çª—ä½“
    const handleQuit = () => {
        if(winCfg.window.isMainWin) {
            MessageBox.confirm('åº”ç”¨æç¤º', 'æ˜¯å¦æœ€å°åŒ–åˆ°æ‰˜ç›˜, ä¸é€€å‡ºç¨‹åº?', {
                type: 'warning',
                cancelText: 'æœ€å°åŒ–è‡³æ‰˜ç›˜',
                confirmText: 'æ®‹å¿é€€å‡º',
                confirmType: 'danger',
                width: 300,
                callback: action \=> {
                    if(action == 'confirm') {
                        appState.$reset()
                        setWin('close')
                    }else if(action == 'cancel') {
                        setWin('hide', winCfg.window.id)
                    }
                }
            })
        }else {
            setWin('close', winCfg.window.id)
        }
    }
</script>

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609000918418-1409688373.png)

åœ¨ index.vue ä¸­å¼•å…¥ control.vue æ“ä½œæŒ‰é’®ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰å·¦ä¾§ã€æ ‡é¢˜ç­‰åŠŸèƒ½ã€‚

<template\>
    <div class\="vegpt\_\_titlebar" :class\="{'fixed': isTrue(fixed), 'transparent fixed': isTrue(transparent)}"\>
        <div class\="vegpt\_\_titlebar-wrapper flexbox flex-alignc ve\_\_drag" :style\="{'background': bgcolor, 'color': color, 'z-index': zIndex}"\>
            <slot name\="left"\>
                <img src\="/logo.png" height\="20" style\="margin-left: 10px;" />
            </slot\>
            <div class\="vegpt\_\_titlebar-title" :class\="{'center': isTrue(center)}"\>
                <slot name\="title"\>{{ title || winCfg.window.title || env.VITE\_APPTITLE }}</slot\>
            </div\>

            <!-- æ§åˆ¶æŒ‰é’® \-->
            <Control :minimizable\="minimizable" :maximizable\="maximizable" :closable\="closable"\>
                <slot name\="btn" />
            </Control\>
        </div\>
    </div\>
</template\>

### Electronåˆ›å»ºç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609001028382-1067066057.png)

// åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
createTray() {
    console.log('â€”â€”+â€”â€”+â€”â€”Start Create Trayï¼')
    console.log(\_\_dirname)
    console.log(join(process.env.ROOT, 'resource/tray.ico'))
    
    const trayMenu \= Menu.buildFromTemplate(\[
        {
            label: 'æ‰“å¼€ä¸»ç•Œé¢',
            icon: join(process.env.ROOT, 'resource/home.png'),
            click: () \=> {
                try {
                    for(let i in this.group) {
                        let win \= this.getWin(i)
                        if(!win) return
                        // æ˜¯å¦ä¸»çª—å£
                        if(this.group\[i\].isMainWin) {
                            if(win.isMinimized()) win.restore()
                            win.show()
                        }
                    }
                } catch (error) {
                    console.log(error)
                }
            }
        },
        {
            label: 'è®¾ç½®ä¸­å¿ƒ',
            icon: join(process.env.ROOT, 'resource/setting.png'),
            click: () \=> {
                for(let i in this.group) {
                    let win \= this.getWin(i)
                    if(win) win.webContents.send('win\_\_ipcData', { type: 'CREATE\_WIN\_SETTING', value: null })
                }
            },
        },
        {
            label: 'é”å±',
            icon: join(process.env.ROOT, 'resource/lock.png'),
            click: () \=> null,
        },
        {
            label: 'å…³é—­æ‰˜ç›˜é—ªçƒ',
            click: () \=> {
                this.flashTray(false)
            }
        },
        {type: 'separator'},
        /\* {
            label: 'é‡å¯',
            click: () => {
                // app.relaunch({ args: process.argv.slice(1).concat(\['--relaunch'\]) })
                // app.exit(0)
            }
        }, \*/
        {
            label: 'å…³äº',
            click: () \=> {
                for(let i in this.group) {
                    let win \= this.getWin(i)
                    if(win) win.webContents.send('win\_\_ipcData', { type: 'CREATE\_WIN\_ABOUT', value: null })
                }
            }
        },
        {
            label: 'å…³é—­åº”ç”¨å¹¶é€€å‡º',
            icon: join(process.env.ROOT, 'resource/quit.png'),
            click: () \=> {
                dialog.showMessageBox(this.main, {
                    title: 'è¯¢é—®',
                    message: 'ç¡®å®šè¦é€€å‡ºåº”ç”¨ç¨‹åºå—ï¼Ÿ',
                    buttons: \['å–æ¶ˆ', 'æœ€å°åŒ–æ‰˜ç›˜', 'é€€å‡ºåº”ç”¨'\],
                    type: 'error',
                    noLink: false,  // trueä¼ ç»ŸæŒ‰é’®æ ·å¼  falseé“¾æ¥æ ·å¼
                    cancelId: 0
                }).then(res \=> {
                    console.log(res)

                    const index \= res.response
                    if(index == 0) {
                        console.log('å–æ¶ˆ')
                    }if(index == 1) {
                        console.log('æœ€å°åŒ–æ‰˜ç›˜')
                        for(let i in this.group) {
                            let win \= this.getWin(i)
                            if(win) win.hide()
                        }
                    }else if(index == 2) {
                        console.log('é€€å‡ºåº”ç”¨')

                        try {
                            for(let i in this.group) {
                                let win \= this.getWin(i)
                                if(win) win.webContents.send('win\_\_ipcData', { type: 'WIN\_LOGOUT', value: null })
                            }
                            // app.quit å’Œ app.exit(0) éƒ½å¯é€€å‡ºåº”ç”¨ã€‚
                            // å‰è€…å¯ä»¥è¢«æ‰“æ–­å¹¶è§¦å‘ä¸€äº›äº‹ä»¶ï¼Œè€Œåè€…å°†å¼ºåˆ¶åº”ç”¨ç¨‹åºé€€å‡ºè€Œä¸è§¦å‘ä»»ä½•äº‹ä»¶æˆ–å…è®¸åº”ç”¨ç¨‹åºå–æ¶ˆæ“ä½œã€‚
                            app.quit()
                        } catch (error) {
                            console.log(error)
                        }
                    }
                })
            }
        }
    \])
    this.tray = new Tray(this.trayIco1)
    this.tray.setContextMenu(trayMenu)
    this.tray.setToolTip(app.name)
    this.tray.on('double-click', () => {
        console.log('double clicked')
    })

    // å¼€å¯æ‰˜ç›˜é—ªçƒ
    // this.flashTray(true)
}

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609001455948-251017760.png)

æ‰˜ç›˜å›¾æ ‡ã€å³é”®èœå•å›¾æ ‡åŠæ‰“åŒ…å›¾æ ‡å‡åœ¨resourceç›®å½•ä¸‹ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609001802427-1978733379.png)

### Electronæ‰“åŒ…è„šæœ¬electron-builder

åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªelectronæ‰“åŒ…é…ç½®æ–‡ä»¶electron-builder.jsonã€‚

{
    "productName": "Electron-ChatGPT",
    "appId": "com.yxy.electron-chatgpt-vue3",
    "copyright": "Copyright Â© 2023-present Andy",
    "compression": "maximum",
    "asar": true,
    "directories": {
        "output": "release/${version}"
    },
    "nsis": {
        "oneClick": false,
        "allowToChangeInstallationDirectory": true,
        "perMachine": true,
        "deleteAppDataOnUninstall": true,
        "createDesktopShortcut": true,
        "createStartMenuShortcut": true,
        "shortcutName": "ElectronVite4Vue3"
    },
    "win": {
        "icon": "./resource/shortcut.ico",
        "artifactName": "${productName}-v${version}-${platform}-${arch}-setup.${ext}",
        "target": \[
            {
                "target": "nsis",
                "arch": \["ia32"\]
            }
        \]
    },
    "mac": {
        "icon": "./resource/shortcut.icns",
        "artifactName": "${productName}-v${version}-${platform}-${arch}-setup.${ext}"
    },
    "linux": {
        "icon": "./resource",
        "artifactName": "${productName}-v${version}-${platform}-${arch}-setup.${ext}"
    }
}

### Electronä¸»æ¸²æŸ“è¿›ç¨‹é€šè®¯ä¼ å€¼

ç”±äºelectronä¸»æ¸²æŸ“è¿›ç¨‹ä¸€èˆ¬éƒ½æ˜¯å•çª—å£ä¹‹é—´è¿›è¡Œä¼ å€¼ã€‚å¦‚æœéœ€è¦åœ¨å¤šä¸ªçª—å£é—´ä¼ å€¼ï¼Œå¦‚åˆ‡æ¢ä¸»é¢˜åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨æ¸²æŸ“è¿›ç¨‹å‘é€è¯·æ±‚ï¼Œä¸»è¿›ç¨‹ç›‘å¬åå†å‘é€è¯·æ±‚ç»™æ¸²æŸ“è¿›ç¨‹(App.vueä¸­ç›‘å¬)ã€‚

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609004024304-1540244928.gif)

<div
    class\="toolbar\_\_item"
    :title\="\`åˆ‡æ¢ æš—é»‘/æ˜äº® æ¨¡å¼ï¼ˆå½“å‰ ${appState.config.isDark ? 'æš—é»‘' : 'æ˜äº®'}æ¨¡å¼ï¼‰\`"
    @click\="changeMode"
\>
    <Icon :name\="appState.config.isDark ? 've-icon-sunny' : 've-icon-yewan'" />
</div\>

// ä¸»é¢˜åˆ‡æ¢
const changeMode = () => {
    appState.config.isDark = !appState.config.isDark
    ipcRenderer.send('win\_\_postData', appState.config.isDark)
}

åœ¨ä¸»è¿›ç¨‹ä¸­ä½¿ç”¨ipcMain.onç›‘å¬ã€‚

// ä¸»/æ¸²æŸ“è¿›ç¨‹ä¼ å‚
ipcMain.on('win\_\_postData', (event, args) => {
    mainWin.webContents.send('win\_\_postData', args)
})

ç„¶ååœ¨æ¸²æŸ“è¿›ç¨‹App.vueé¡µé¢ç›‘å¬å¹¶å¤„ç†é€šè®¯ä¼ å€¼ã€‚

/\*\*
 \* æ¥æ”¶ä¸»è¿›ç¨‹å‘é€çš„äº‹ä»¶
 \*/
ipcRenderer.on('win\_\_postData', (e, data) => {
    console.log('â€”â€”+â€”â€”+â€”â€”receive multiwin dataï¼š', data)

    switch(data.type) {
        // é€€å‡ºç™»å½•
        case 'WIN\_LOGOUT':
            appState.$reset()
            break;
        // å¸ƒå±€åˆ‡æ¢
        case 'CHANGE\_LAYOUT':
            appState.config.layout \= data.value
            break;
        // åˆ‡æ¢ä¸»é¢˜
        case 'CHANGE\_MODE':
            appState.config.isDark \= data.value
            appState.changeDark()
            break;
        // ä¾§è¾¹æ æ”¶ç¼©
        case 'CHANGE\_COLLAPSE':
            appState.config.collapse \= data.value
            break;
      }
})

è¿™æ ·å°±èƒ½ç®€å•å®ç°å¤šçª—å£ä¼ å€¼äº†ã€‚å¦‚æœå¤§å®¶æœ‰å…¶ä»–æ–¹æ³•ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ å“ˆ~

Okï¼ŒåŸºäºelectron25+vue3å¼€å‘æ¡Œé¢ç«¯ä»¿chatgptèŠå¤©å®ä¾‹å°±å…ˆåˆ†äº«åˆ°è¿™é‡Œï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ğŸ˜

**æœ€åé™„ä¸Šä¸€ä¸ªVue3+Tauriè·¨ç«¯èŠå¤©é¡¹ç›®**

[https://www.cnblogs.com/xiaoyan2017/p/16830689.html](https://www.cnblogs.com/xiaoyan2017/p/16830689.html)

![](https://img2023.cnblogs.com/blog/1289798/202306/1289798-20230609005225022-26772944.gif)

æœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµ QQï¼ˆ282310962ï¼‰ wxï¼ˆxy190310ï¼‰