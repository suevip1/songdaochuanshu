---
layout: post
title: "ä¸€æ¬¡redisä¸»ä»åˆ‡æ¢å¯¼è‡´çš„æ•°æ®ä¸¢å¤±ä¸é™·å…¥åªè¯»çŠ¶æ€æ•…éšœ"
date: "2023-05-22T01:10:22.950Z"
---
ä¸€æ¬¡redisä¸»ä»åˆ‡æ¢å¯¼è‡´çš„æ•°æ®ä¸¢å¤±ä¸é™·å…¥åªè¯»çŠ¶æ€æ•…éšœ
===========================

èƒŒæ™¯
--

æœ€è¿‘ä¸€ç»„ä¸šåŠ¡redisæ•°æ®ä¸æ–­å¢é•¿éœ€è¦æ‰©å®¹å†…å­˜ï¼Œè€Œæ‰©å®¹å†…å­˜åˆ™éœ€è¦é‡å¯äº‘ä¸»æœºï¼Œåœ¨æŒ‰è®¡åˆ’æ‰©å®¹å‡çº§æ‰§è¡Œä¸»ä»åˆ‡æ¢æ—¶æ„å¤–å‘ç”Ÿäº†æ•°æ®ä¸¢å¤±ä¸masterè¿›å…¥åªè¯»çŠ¶æ€çš„æ•…éšœï¼Œè¿™é‡Œè®°å½•åˆ†äº«ä¸€ä¸‹ã€‚

ä¸šåŠ¡redisé«˜å¯ç”¨æ¶æ„
------------

è¯¥ç»„ä¸šåŠ¡redisä½¿ç”¨çš„æ˜¯ä¸€ä¸»ä¸€ä»ï¼Œé€šè¿‡sentinelé›†ç¾¤å®ç°æ•…éšœæ—¶çš„è‡ªåŠ¨ä¸»ä»åˆ‡æ¢ï¼Œè¿™å¥—æ¶æ„å·²ç»å¹³ç¨³è¿è¡Œæ•°å¹´ï¼Œç»å†ä½äº†å¤šæ¬¡å®æˆ˜çš„è€ƒéªŒã€‚  
é«˜å¯ç”¨æ¶æ„å¤§ä½“å¦‚ä¸‹å›¾æ‰€ç¤º:  
![image](https://img2023.cnblogs.com/blog/577651/202305/577651-20230521235830713-989739941.png)  
ç®€å•è¯´ä¸€ä¸‹sentinelå®ç°é«˜å¯ç”¨çš„åŸç†ï¼š  
é›†ç¾¤çš„å¤šä¸ª(2n+1,N>1)å“¨å…µä¼šå®šæœŸè½®è¯¢redisçš„æ‰€æœ‰master/slaveèŠ‚ç‚¹ï¼Œå¦‚æœsentinelé›†ç¾¤ä¸­è¶…è¿‡ä¸€åŠçš„å“¨å…µåˆ¤å®šredisæŸä¸ªèŠ‚ç‚¹å·²ç»ä¸»è§‚ä¸‹çº¿ï¼Œå°±ä¼šå°†å…¶åˆ¤å®šä¸ºå®¢è§‚ä¸‹çº¿è¿›è¡Œç›¸åº”å¤„ç†ï¼š

1.  å¦‚æœä¸‹çº¿èŠ‚ç‚¹æ˜¯masterï¼Œé€‰å®šä¸€ä¸ªæ­£å¸¸workçš„slaveå°†å…¶é€‰å®šä¸ºæ–°çš„masterèŠ‚ç‚¹ã€‚
2.  å¦‚æœä¸‹çº¿èŠ‚ç‚¹æ˜¯slaveï¼Œå°†å…¶ä»slaveèŠ‚ç‚¹ä¸­ç§»é™¤ã€‚

å¦‚æœå·²ç»è¢«å®¢è§‚ä¸‹çº¿çš„èŠ‚ç‚¹æ¢å¤äº†æ­£å¸¸ï¼Œsentinelä¸­è¶…è¿‡ä¸€åŠå“¨å…µç¡®è®¤ååˆ™å°†å…¶åŠ å›å¯ç”¨çš„slaveèŠ‚ç‚¹ã€‚  
æ‰€æœ‰éœ€è¦è¯»å†™redisçš„serverå¹¶ä¸éœ€è¦ç›´æ¥å†™æ­»redis ä¸»ä»é…ç½®ï¼Œè€Œæ˜¯é€šè¿‡è®¿é—®sentinelè·å–å½“å‰redisçš„ä¸»ä»å¯ç”¨çŠ¶æ€ï¼Œå…·ä½“å®ç°æ–¹å¼å¯ä»¥å®šæ—¶æŸ¥è¯¢sentinelè¯¢é—®æ›´æ–°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¢é˜…æœºåˆ¶è®©sentinelåœ¨ä¸»ä»å˜åŠ¨æ—¶ä¸»åŠ¨é€šçŸ¥è®¢é˜…æ–¹æ›´æ–°ã€‚  
sentinelå®ç°é«˜å¯ç”¨çš„è¯¦ç»†åŸç†è¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç§»æ­¥å‚è€ƒæ–‡çŒ®ä¸­çš„ç›¸å…³èµ„æ–™ã€‚

å…·ä½“å†…å­˜æ‰©å®¹æµç¨‹
--------

sentinelå¯ä»¥åœ¨æ£€æµ‹åˆ°æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢redisä¸»ä»ï¼Œä¹Ÿå¯ä»¥ä¸»åŠ¨æ‰§è¡Œsentinel failover mastername å‘½ä»¤å®ç°æ‰‹åŠ¨åˆ‡æ¢ä¸»ä»ï¼Œæ‰€ä»¥è¿™æ¬¡çš„å†…å­˜æ‰©å®¹é‡å¯æµç¨‹è®¾è®¡å¦‚ä¸‹(Aä»£è¡¨åˆå§‹masteræ‰€åœ¨äº‘ä¸»æœºï¼ŒBä»£è¡¨åˆå§‹slaveæ‰€åœ¨äº‘ä¸»æœº)ï¼š

1.  å‡çº§ä¸»æœºBå†…å­˜é…ç½®ï¼Œé‡å¯ä¸»æœºB
2.  æ£€æŸ¥Bé‡å¯åå…¶ä¸Šçš„redis slaveæ˜¯å¦é‡æ–°åŒæ­¥masteræ•°æ®å®Œæˆï¼ŒåŒ…æ‹¬:  
    2.1 æŸ¥çœ‹slave redis logæ˜¯å¦å¼‚å¸¸ï¼Œæ— å¼‚å¸¸pass  
    2.2 ä½¿ç”¨info keyspaceå‘½ä»¤check masterã€slave å„db keyæ•°é‡æ˜¯å¦ä¸€è‡´ï¼Œæ— å¼‚å¸¸pass  
    2.3 åœ¨masterå†™å…¥ä¸€ä¸ªæµ‹è¯•keyï¼Œåœ¨slaveä¸Šcheckæ˜¯å¦åŒæ­¥æˆåŠŸ  
    2.4 è§‚å¯Ÿä¾èµ–server logæ˜¯å¦æœ‰å¼‚å¸¸
3.  ä½¿ç”¨sentinel failover masternameå‘½ä»¤æ‰‹åŠ¨ä¸»ä»åˆ‡æ¢ï¼Œä¸»æœºAå˜æˆæ–°slaveï¼Œä¸»æœºBå˜æˆæ–°masterï¼Œæ ¹æ®ä»¥å‰æ‰‹åŠ¨åˆ‡æ¢çš„ç»éªŒèµ°åˆ°è¿™ä¸€æ­¥åŸºæœ¬ä¸Šå°±ç¨³äº†--å› ä¸ºè¿™é‡Œæœ¬è´¨ä¸Šå’Œä¸€æ¬¡æ™®é€šä¸»ä»åˆ‡æ¢å·²ç»æ²¡æœ‰åŒºåˆ«äº†ã€‚
4.  å‡çº§ä¸»æœºAå†…å­˜é…ç½®ï¼Œé‡å¯ä¸»æœºAï¼Œæ‰§è¡Œä»¥ä¸‹check:  
    4.1 æŸ¥çœ‹æ–°slave redis logæ˜¯å¦å¼‚å¸¸  
    4.2 ä½¿ç”¨info keyspaceå‘½ä»¤check æ–°masterã€æ–°slave å„db keyæ•°é‡æ˜¯å¦ä¸€è‡´ï¼Œæ— å¼‚å¸¸pass  
    4.3 åœ¨æ–°masterå†™å…¥æµ‹è¯•keyï¼Œåœ¨æ–°slaveä¸Šcheckæ˜¯å¦åŒæ­¥æˆåŠŸ  
    4.4 è§‚å¯Ÿä¾èµ–server logæ˜¯å¦æœ‰å¼‚å¸¸

è‡³æ­¤ï¼Œè‹¥ä»¥ä¸Šæ­¥éª¤éƒ½æ­£å¸¸é€šè¿‡ï¼Œä¸€ä¸ªå®Œç¾çš„rediså†…å­˜å‡çº§å·¥ä½œå°±å®Œæˆäº†ã€‚

ä¸»ä»åˆ‡æ¢åæ•°æ®ä¸¢å¤±
---------

ç»“æœæ­£æ˜¯æ²¡æœ‰æƒ³è¿‡å¯èƒ½ä¼šå‡ºé—®é¢˜çš„æ­¥éª¤3åè€Œå‡ºç°äº†é—®é¢˜ï¼Œç›´æ¥å¯¼è‡´äº†ä¸»ä»åˆ‡æ¢åä¸¢æ‰äº†éƒ¨åˆ†æ•°æ®ï¼Œå¹¶ä¸”æ–°masterè¿›å…¥åªè¯»çŠ¶æ€å°†è¿‘ååˆ†é’Ÿã€‚  
å½“æ—¶çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š  
åœ¨æ‰§è¡Œå®Œæ­¥éª¤3åï¼Œcheck æ–°slave redis logæ— å¼‚å¸¸ï¼Œæ­£åœ¨è€ƒè™‘è§‚å¯Ÿä¸€ä¼šå„¿åæ‰§è¡Œä¸»æœºAçš„å‡çº§é‡å¯æ“ä½œï¼Œapiçš„åˆ†é’Ÿçº§åˆ«å¼‚å¸¸ç›‘æ§è§¦å‘äº†ä¸€å°æ³¢redisç›¸å…³æŠ¥è­¦ã€‚ç¬¬ä¸€ååº”åœ¨æ–°masterä¸æ–°slaveä¸Šæ‰§è¡Œäº†info keyspaceæŸ¥çœ‹keyæ•°é‡æ˜¯å¦å·²ç»ä¸ä¸€è‡´ï¼Œç»“æœå‘ç°master/slaveçš„keyæ•°é‡æ˜¯ä¸€è‡´çš„--ä½†æ˜¯å†ä»”ç»†ä¸€çœ‹ï¼šå’Œåˆ‡æ¢å‰çš„keyæ€»æ•°ç™¾ä¸‡çº§ç›¸æ¯”åˆ‡æ¢åkeyæ€»æ•°é™åˆ°äº†åä¸‡çº§--å¤§éƒ¨åˆ†keyæ•°æ®è¢«ä¸¢å¤±äº†ã€‚  
æŸ¥çœ‹æ–°masterã€æ–°slave logéƒ½æ²¡æœ‰å‘ç°æ˜æ˜¾logå¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆä¸»ä»åˆ‡æ¢åä¼šä¸¢å¤±ä¸€å¤§åŠæ•°æ®è¿™ä¸€ç°è±¡ï¼Œè¿™æ—¶å°ä¼™ä¼´ç¬¬ä¸€æ¬¡æåˆ°äº†æ˜¯ä¸æ˜¯å†…å­˜ä¸å¤Ÿäº†ï¼Œå½“æ—¶è‡ªå·±ç•¥ä¸€æ€è€ƒé©¬ä¸Šå›å¤åˆ°ï¼šæ–°masteråˆšå‡çº§äº†å†…å­˜ï¼Œä¸å¯èƒ½å†…å®¹æ‰©å¤§ååè€Œå†…å­˜ä¸è¶³çš„ï¼Œæ‰€ä»¥åº”è¯¥ä¸æ˜¯è¿™ä¸ªé—®é¢˜ã€‚  
nåˆ†é’Ÿå...  
å°ä¼™ä¼´å†ä¸€æ¬¡æå‡ºäº†æ˜¯ä¸æ˜¯maxmemoryé—®é¢˜ï¼Œè¿™ä¸€ä¸‹å­ç‚¹ä¸­äº†å…³é”®ç‚¹ï¼Œé©¬ä¸Šæƒ³åˆ°ä¸»æœºBå‡çº§äº†å†…å­˜æ˜¯ä¸ä¼šæœ‰ç³»ç»Ÿå±‚é¢å†…å­˜ä¸è¶³çš„é—®é¢˜ï¼Œä½†æ˜¯redisçš„å†…å­˜ä½¿ç”¨å®é™…ä¸Šè¿˜ä¼šå—åˆ°maxmemoryå‚æ•°é™åˆ¶ï¼Œé©¬ä¸Šåœ¨æ–°masterä¸Šæ‰§è¡Œconfig get maxmemory, åªæœ‰3GBï¼Œè€Œå‡çº§å‰æ•°æ®å®é™…ä½¿ç”¨å†…å­˜è¶…è¿‡äº†6GBï¼  
ç«‹åˆ»è°ƒå¤§äº†æ–°masterçš„maxmemoryå‚æ•°ï¼Œrediså¾ˆå¿«æ¢å¤äº†å¯è¯»å†™æ­£å¸¸çŠ¶æ€ï¼Œä¸€å¤§æ³¢redisåªè¯»å¼•å‘çš„å‘Šè­¦é€šçŸ¥å¼€å§‹å¿«é€Ÿä¸‹é™ã€‚

åŸå› å®šä½
----

ç´§å¼ åˆåˆºæ¿€çš„æ•…éšœå¤„ç†å°±è¿™ä¹ˆè¿‡å»äº†ï¼Œåœ¨ä¼˜å…ˆå¤„ç†å®Œä¸¢å¤±keyæ•°æ®æ¢å¤å·¥ä½œä¹‹åï¼Œå¼€å§‹å›é¡¾æ•´ç†æ•…éšœçš„è¯¦ç»†åŸå› ï¼Œæ€»å…±æœ‰å¦‚ä¸‹å‡ ä¸ªç–‘é—®ï¼š

1.  æ˜ç¡®è®°å¾—ä¸Šä¸ªæœˆç»™ä¸»æœºAã€Bä¸Šçš„rediséƒ½é€šè¿‡config set maxmemoryè®¾ç½®ä¸ºäº†7GBï¼Œä¸ºä»€ä¹ˆå‡ºç°é—®é¢˜æ—¶æŸ¥è¯¢Bä¸Šredis çš„maxmemoryé…ç½®å´å˜æˆäº†3GBï¼Ÿ
2.  å¦‚æœä¸»æœºBçš„maxmemoryæ˜¯3GBï¼Œå…¶ä½œä¸ºslaveæ—¶ä¸ºä»€ä¹ˆä»masteråŒæ­¥è¶…è¿‡6GBçš„æ•°æ®æ—¶ä¸ä¼šæœ‰é—®é¢˜ï¼Ÿ--åœ¨ä¸»ä»åˆ‡æ¢å‰æ— è®ºæ˜¯æŸ¥çœ‹info keyspaceè¿˜æ˜¯åœ¨masterä¸Šå†™å…¥æµ‹è¯•keyåŒæ­¥checkéƒ½æ˜¯OKçš„ã€‚
3.  ä¸ºä»€ä¹ˆä¸»ä»åˆ‡æ¢åä¸»æœºBä¸Šçš„keyæ•°æ®ä¼šä¸¢å¤±ï¼Ÿè¿™ä¸ªæ˜¯å› ä¸ºmaxmemoryè®¾ç½®è¿‡å°ï¼Œæ˜¯æ•…éšœçš„ç›´æ¥åŸå› ã€‚
4.  ä¸ºä»€ä¹ˆæ–°masterç”±äºmaxmemoryå‚æ•°è¶…é™è¿›å…¥åªè¯»çŠ¶æ€ä¸”åˆ é™¤éƒ¨åˆ†æ•°æ®åï¼Œæ–°masterä¸­å®é™…æ•°æ®å ç”¨çš„å¤§å°ä¾ç„¶è¶…è¿‡>3GB?

å¦‚ä¸Šå››ä¸ªç–‘é—®é™¤äº†é—®é¢˜3å·²ç»æ˜ç¡®äº†ï¼Œå‰©ä¸‹ä¸‰ä¸ªé—®é¢˜éƒ½è®©äººç–‘æƒ‘--äº‹å‡ºè¯¡å¼‚å¿…æœ‰å¦–ï¼Œç»è¿‡ä¸€ç•ªæ¢å¯»å¾—å‡ºå…¶ç­”æ¡ˆï¼š

1.  ä¸Šä¸ªæœˆä¿®æ”¹redis maxmemoryæ—¶ï¼Œåªé€šè¿‡config setå‘½ä»¤ä¿®æ”¹äº†å…¶è¿è¡Œæ—¶é…ç½®ï¼Œè€Œæ²¡æœ‰ä¿®æ”¹å¯¹åº”é…ç½®redis.confä¸Šmaxmemoryçš„å€¼ï¼Œä¸»æœºBä¸Šredisåœ¨é‡å¯åå°±ä¼šä»redis.confä¸Šè½½å…¥è¯¥maxmemoryï¼Œè¯¥é…ç½®æ­£æ˜¯3GBï¼ŒåŒæ—¶maxmemoryå‚æ•°æ˜¯redisèŠ‚ç‚¹ç‹¬ç«‹çš„é…ç½®ï¼Œslaveå¹¶ä¸ä¼šä»masteråŒæ­¥è¯¥å€¼ã€‚
2.  åœ¨redis5.0ç‰ˆæœ¬ä¹‹åï¼Œrediså¼•å…¥äº†ä¸€ä¸ªæ–°çš„å‚æ•°replica-ignore-maxmemoryï¼Œå…¶å®˜æ–¹æ–‡æ¡£å®šä¹‰å¦‚ä¸‹ï¼š

    Maxmemory on replicas
    By default, a replica will ignore maxmemory (unless it is promoted to master after a failover or manually). It means that the eviction of keys will be handled by the master, sending the DEL commands to the replica as keys evict in the master side.
    This behavior ensures that masters and replicas stay consistent, which is usually what you want. However, if your replica is writable, or you want the replica to have a different memory setting, and you are sure all the writes performed to the replica are idempotent, then you may change this default (but be sure to understand what you are doing).
    Note that since the replica by default does not evict, it may end up using more memory than what is set via maxmemory (since there are certain buffers that may be larger on the replica, or data structures may sometimes take more memory and so forth). Make sure you monitor your replicas, and make sure they have enough memory to never hit a real out-of-memory condition before the master hits the configured maxmemory setting.
    To change this behavior, you can allow a replica to not ignore the maxmemory. The configuration directives to use is:
    replica-ignore-maxmemory no
    

å¤§æ„æ˜¯redisä½œä¸ºslaveæ—¶é»˜è®¤ä¼šæ— è§†maxmemoryå‚æ•°ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä¸»ä»çš„æ•°æ®å§‹ç»ˆä¿æŒä¸€è‡´ã€‚å½“master/slaveå®é™…æ•°æ®å¤§å°å‡å°äºå…¶maxmemoryè®¾ç½®æ—¶ï¼Œè¿™ä¸ªå‚æ•°æ²¡æœ‰ä»»ä½•å½±å“ï¼Œè€Œè¿™æ¬¡ä¸¢å¤±æ•°æ®çš„åŸå› æ­£æ˜¯å› ä¸ºä¸»æœºBé‡å¯åä½œä¸ºslaveæ—¶maxmemory(3GB)å°äºå®é™…æ•°æ®å¤§å°(6GB+)ï¼Œæ­¤æ—¶replica-ignore-maxmemory é»˜è®¤å¼€å¯ä¿è¯ä½œä¸ºslaveæ—¶ç›´æ¥æ— è§†maxmemoryçš„é™åˆ¶ï¼Œè€Œå½“æ‰§è¡Œsentinel failover masternameå°†ä¸»æœºBåˆ‡æ¢ä¸ºæ–°masteråï¼Œæ–°masterä¸ä¼šå—replica-ignore-maxmemoryå½±å“ï¼Œå‘ç°è‡ªèº«maxmemory<å®é™…æ•°æ®å¤§å°åç›´æ¥å¼€å§‹ä¸»åŠ¨æ·˜æ±°keyï¼Œä»è€Œå¯¼è‡´äº†æ•°æ®ä¸¢å¤±ã€‚  
4\. è‡³äºä¸»æœºBä½œä¸ºmasteræ‰§è¡Œæ·˜æ±°keyç­–ç•¥å¹¶æœ€ç»ˆè¿›å…¥åªè¯»çŠ¶æ€åï¼Œå…¶å®é™…æ•°æ®å¤§å°ä¾ç„¶>3GBçš„åŸå› ï¼Œåˆ™æ˜¯ç”±äºçº¿ä¸Šredisé…ç½®çš„ç­–ç•¥æ˜¯volatile-lruç­–ç•¥ï¼Œè¯¥ç­–ç•¥åªä¼šæ·˜æ±°æœ‰è¿‡æœŸæ—¶é—´çš„keyï¼Œå¯¹äºä¸è¿‡æœŸçš„keyæ˜¯ä¸æ·˜æ±°çš„ã€‚

æ€»ç»“
--

æ€»çš„æ¥çœ‹è¿™æ¬¡æ•…éšœçš„æ ¹æœ¬åŸå› è¿˜æ˜¯ä¸ªäººå¯¹äºredisçš„é…ç½®ã€æ“ä½œç»éªŒä¸è¶³ï¼Œå¦‚æœåœ¨è°ƒæ•´è¿è¡Œæ—¶maxmemoryæ—¶èƒ½åšåˆ°ä»¥ä¸‹äºŒè€…ä¹‹ä¸€ï¼Œè¿™æ¬¡æ•…éšœå°±ä¸ä¼šå‡ºç°äº†ï¼š

1.  è°ƒæ•´è¿è¡Œæ—¶maxmemoryæ—¶åŒæ—¶è°ƒæ•´é…ç½®æ–‡ä»¶maxmemoryä¿æŒä¸€è‡´ã€‚
2.  å°†é…ç½®æ–‡ä»¶maxmemoryè®¾ç½®ä¸º0--è¡¨ç¤ºä¸é™åˆ¶å†…å­˜ä½¿ç”¨ã€‚

æ­£æ˜¯å› ä¸ºå¯¹redisçš„è®¤è¯†å’Œç»éªŒä¸è¶³ï¼Œæ²¡æœ‰æƒ³è¿‡åˆ°è¿è¡Œæ—¶é…ç½®ä¸é™æ€é…ç½®ä¸ä¸€è‡´å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼Œè¿™æ¬¡ä¸å¯é¿å…çš„è¸©å‘äº†ã€‚  
ä½†æ˜¯ï¼Œä½œä¸ºä¸€ä¸ªæœ¬èŒRDï¼ŒåŠè·¯æ¥æ‰‹åŸºæœ¬é è‡ªå­¦çš„å…¼èŒè¿ç»´ï¼Œè¦è€ƒè™‘åˆ°maxmemoryçš„è¿è¡Œé…ç½®ä¸é™æ€é…ç½®ä¸€è‡´æ€§é—®é¢˜å¥½åƒä¹Ÿç¡®å®ä¸æ˜¯é‚£ä¹ˆçš„ç†æ‰€å½“ç„¶ğŸ¤”ã€‚  
å¤„ç†å®Œè¿™æ¬¡æ•…éšœåï¼Œç‰¹æ„åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ç•ªredisä¸»ä»åˆ‡æ¢çš„æ³¨æ„äº‹é¡¹ã€è¸©å‘æ–‡ç« ï¼Œæƒ³çœ‹çœ‹æœ‰æ²¡æœ‰äººæåˆ°ç±»ä¼¼çš„å‘ï¼Œä½†æ˜¯å¹¶æ— æ‰€è·ï¼Œéš¾é“è¿™ä¸ªå‘çœŸçš„æ²¡å…¶ä»–äººè¸©(åˆ†äº«)è¿‡ï¼Ÿé™·å…¥æ€è€ƒ...  
å¦‚æœæœ‰ç»éªŒä¸°å¯Œçš„å°ä¼™ä¼´çœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿæ¬¢è¿ä¸åèµæ•™æŒ‡å¯¼ä¸€ä¸‹redisä¸»ä»çš„åˆ‡æ¢çš„å„ç±»å¸¸è¯†ä¸å¸¸è§å¤§å‘ï¼

è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ŒåŸæ–‡åœ°å€ï¼š[https://www.cnblogs.com/AcAc-t/p/redis\_master\_switch\_failure.html](https://www.cnblogs.com/AcAc-t/p/redis_master_switch_failure.html)

å‚è€ƒ
--

[https://redis.io/docs/management/replication/](https://redis.io/docs/management/replication/)  
[https://www.cnblogs.com/buttercup/p/14051301.html](https://www.cnblogs.com/buttercup/p/14051301.html)  
[https://zhuanlan.zhihu.com/p/151740247](https://zhuanlan.zhihu.com/p/151740247)  
[https://www.cnblogs.com/AcAc-t/p/redis\_master\_switch\_failure.html](https://www.cnblogs.com/AcAc-t/p/redis_master_switch_failure.html)  
[https://zhuanlan.zhihu.com/p/320651292](https://zhuanlan.zhihu.com/p/320651292)

ç­¾åï¼šæ‹¥æŠ±å¼€æºï¼Œæ‹¥æŠ±è‡ªç”±