---
layout: post
title: "逍遥自在学C语言 | 多级指针探秘"
date: "2023-06-24T01:23:13.834Z"
---
逍遥自在学C语言 | 多级指针探秘
=================

前言
--

多级指针在C语言中是一种特殊的指针类型，它可以指向其他指针的指针。

通过多级指针，我们可以间接地访问或修改存储在内存中的数据。

在本文中，我们将讨论多级指针的概念、使用方法、使用场景以及常见错误及其避免方法。

一、人物简介
------

*   第一位闪亮登场，有请今后会一直教我们C语言的老师 —— 自在。

![](https://img2023.cnblogs.com/blog/1511464/202306/1511464-20230606224237924-1818889158.gif)

*   第二位上场的是和我们一起学习的小白程序猿 —— 逍遥。

![](https://img2023.cnblogs.com/blog/1511464/202306/1511464-20230606224258922-622567244.gif)

二、指针及多级指针的概念
------------

指针是一个变量，它存储着内存地址。通过指针，我们可以直接或间接地访问内存中的数据。

多级指针是指指针的指针，它们用于存储指向其他指针的地址。多级指针的级数表示了指向指针的数量。

在C语言中，我们使用星号（\*）来声明指针变量，而多级指针则通过在星号前添加额外的星号来声明。

例如，`int *ptr` 声明了一个指向整数的指针，而 `int **pptr` 则声明了一个指向指向整数的指针的指针。

三、多级指针的使用方法
-----------

使用多级指针需要注意以下几个步骤：

*   1️⃣: 声明指针变量和多级指针变量。例如，`int *ptr` 声明了一个指向整数的指针，`int **pptr` 声明了一个指向指向整数的指针的指针。
    
*   2️⃣: 为指针分配内存空间。使用 `malloc` 或 `calloc` 函数为指针和多级指针分配内存空间。例如，`ptr = (int*)malloc(sizeof(int))` 分配了一个整数大小的内存空间给指针 `ptr`。
    
*   3️⃣: 使用 `&` 运算符获取变量的地址。例如，`int a = 10`，我们可以通过 `ptr = &a` 将 `a` 的地址赋值给指针 `ptr`。
    
*   4️⃣: 使用 `*` 运算符访问指针所指向的值。例如，`printf("%d", *ptr)` 将打印指针 `ptr` 所指向的整数值。
    
*   5️⃣: 使用多级指针时，使用额外的 `*` 运算符来访问指向指针的指针所指向的值。例如，`printf("%d", **pptr)` 将打印指向指针的指针 `pptr` 所指向的整数值。
    

下面是一个简单的示例代码，演示了如何使用多级指针：

    #include <stdio.h>
    #include <stdlib.h>
    
    int main() {
        int a = 10;
        int *ptr;
        int **pptr;
    
        ptr = &a;
        pptr = &ptr;
    
        printf("Value of a: %d\n", a);       // 输出：Value of a: 10
        printf("Value of *ptr: %d\n", *ptr); // 输出：Value of *ptr: 10
        printf("Value of **pptr: %d\n", **pptr); // 输出：Value of **pptr: 10
    
        return 0;
    }
    
    

*   在上述示例代码中，我们使用了指针 `ptr` 和多级指针 `pptr` 来访问变量 `a` 的值。
    
*   通过 `ptr` 和 `pptr`，我们可以间接地访问并修改 `a` 的值。
    

四、多级指针的使用场景
-----------

多级指针在某些情况下非常有用，特别是当我们需要在函数中修改指针的值或者传递指针的地址时。

以下是一些常见的使用场景：

*   动态内存分配：多级指针可以用于在运行时动态分配内存，并在函数间传递指向分配内存的指针。
*   函数参数传递：多级指针可以用于将指针的地址作为参数传递给函数，以便在函数中修改指针的值。
*   多维数组：多级指针可以用于访问和操作多维数组中的元素。

五、多级指针的常见错误及避免方法
----------------

在使用多级指针时，可能会遇到一些常见的错误。

以下是一些常见错误以及如何避免它们：

*   未初始化指针：在使用指针之前，务必将其初始化为有效的内存地址。未初始化的指针可能会导致程序崩溃或未定义的行为。
*   内存泄漏：当使用动态内存分配函数（如 `malloc` 或 `calloc`）分配内存时，确保在使用完内存后释放它。否则会导致内存泄漏，浪费系统资源。
*   指针越界访问：在使用多级指针时，确保不要超出分配的内存范围进行访问，否则可能导致程序崩溃或数据损坏。
*   指针悬空引用：在使用多级指针时，确保指针所指向的内存仍然有效。避免在指针指向的内存被释放后继续访问它，否则会导致悬空引用错误。

为避免上述错误，建议在使用指针之前进行有效性检查，使用合适的内存管理函数进行内存分配和释放，并遵循良好的编程实践。

小结
--

通过这篇文章，我们学会了

> 1、多级指针的概念
> 
> 2、多级指针的使用方法和使用场景
> 
> 3、多级指针的常见错误和避免方法

> 📢欢迎各位 👍点赞 ⭐收藏 📝评论，如有错误请留言指正，非常感谢！