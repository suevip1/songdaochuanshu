---
layout: post
title: "AntV L7 å¿«é€Ÿå…¥é—¨ç¤ºä¾‹"
date: "2023-05-31T01:16:55.223Z"
---
AntV L7 å¿«é€Ÿå…¥é—¨ç¤ºä¾‹
==============

![AntV L7 å¿«é€Ÿå…¥é—¨ç¤ºä¾‹](https://img2023.cnblogs.com/blog/2393708/202305/2393708-20230530180522047-753823796.png) æœ¬æ–‡ä¸»è¦æè¿°AntV L7çš„åŸºç¡€åŠŸèƒ½ä½¿ç”¨

1\. å¼•è¨€
------

L7 åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼•æ“æ˜¯ä¸€ç§åŸºäº WebGL æŠ€æœ¯çš„åœ°ç†ç©ºé—´æ•°æ®å¯è§†åŒ–å¼•æ“ï¼Œå¯ä»¥ç”¨äºå®ç°å„ç§åœ°ç†ç©ºé—´æ•°æ®å¯è§†åŒ–åº”ç”¨ã€‚L7 å¼•æ“æ”¯æŒå¤šç§æ•°æ®æºå’Œæ•°æ®æ ¼å¼ï¼ŒåŒ…æ‹¬ GeoJSONã€CSVç­‰ï¼Œå¯ä»¥å¿«é€ŸåŠ è½½å’Œæ¸²æŸ“å¤§è§„æ¨¡åœ°ç†ç©ºé—´æ•°æ®ã€‚L7 å¼•æ“è¿˜æä¾›äº†ä¸°å¯Œçš„å¯è§†åŒ–æ•ˆæœå’Œäº¤äº’åŠŸèƒ½ï¼ŒåŒ…æ‹¬çƒ­åŠ›å›¾ã€ç­‰é«˜çº¿å›¾ã€é¼ æ ‡äº¤äº’ç­‰ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œåˆ†æåœ°ç†ç©ºé—´æ•°æ®ã€‚

L7 å®˜ç½‘ï¼š[èš‚èšåœ°ç†ç©ºé—´æ•°æ®å¯è§†åŒ– | AntV (antgroup.com)](https://l7.antv.antgroup.com/)

L7 GitHub ä»“åº“ï¼š[antvis/L7: ğŸŒ Large-scale WebGL-powered Geospatial Data Visualization analysis engine (github.com)](https://github.com/antvis/L7)

L7 å®˜æ–¹æ•™ç¨‹ï¼š[ç®€ä»‹ | L7 (antgroup.com)](https://l7.antv.antgroup.com/tutorial/l7)

L7 å®˜æ–¹ç¤ºä¾‹ï¼š[æ‰€æœ‰å›¾è¡¨ | L7 (antgroup.com)](https://l7.antv.antgroup.com/examples)

L7 APIæ–‡æ¡£ï¼š[åœºæ™¯ Scene | L7 (antgroup.com)](https://l7.antv.antgroup.com/api/scene)

2\. å¿«é€Ÿä¸Šæ‰‹
--------

L7çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä½¿ç”¨WebGLç»˜åˆ¶åœ°å›¾æ•°æ®ï¼Œæ­¤å¤„ä¸»è¦æè¿°çš„æ˜¯åŸºç¡€åŠŸèƒ½ä½¿ç”¨

é€šè¿‡CDNçš„æ–¹å¼å¯ä»¥å¿«é€Ÿå¼•å…¥L7ï¼š

    <script src = 'https://unpkg.com/@antv/l7'></script>
    

é€šè¿‡NPMçš„æ–¹å¼å¼•å…¥L7å¯å‚è€ƒï¼š

    npm install @antv/l7
    

### 2.1 åŠ è½½åœ°å›¾

åŠ è½½åœ°å›¾ï¼š

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            style: 'dark',
            center: [110.770672, 34.159869]
          }),
        });
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530160526639](https://s2.loli.net/2023/05/30/CnQ3EMAd5HqiZkt.png)

L7å†…ç½®äº†é«˜å¾·åº•å›¾å’ŒMapboxåº•å›¾APIï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨

### 2.2 åŠ è½½åº•å›¾

é€šå¸¸ï¼Œä½¿ç”¨æ …æ ¼ç“¦ç‰‡ä½œä¸ºåº•å›¾ï¼Œ`L7` çš„æ …æ ¼å›¾å±‚æ”¯æŒåŠ è½½ `TMS`ã€`WMS`ã€`WMTS` ç­‰å¤šç§æ ¼å¼çš„å›¾ç‰‡ç“¦ç‰‡

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
      <style>
        body,
        #map {
          height: 100vh;
          width: 100vw;
          margin: 0;
        }
      </style>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.Map({
            center: [110.770672, 34.159869],
            zoom: 4
          }),
        });
    
        const url1 =
          'https://t0.tianditu.gov.cn/img_w/wmts?tk=b72aa81ac2b3cae941d1eb213499e15e&';
        const layer1 = new L7.RasterLayer({
          zIndex: 1,
        }).source(url1, {
          parser: {
            type: 'rasterTile',
            tileSize: 256,
            wmtsOptions: {
              layer: 'img',
              tileMatrixset: 'w',
              format: 'tiles',
            },
          },
        });
    
        scene.on('loaded', () => {
          scene.addLayer(layer1);
        });
      </script>
    </body>
    
    </html>
    

*   æ³¨æ„ï¼šL7ç›®å‰åªæ”¯æŒ 3857 åæ ‡ç³»

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530164635434](https://s2.loli.net/2023/05/30/DcxwjZ98WtVIbNM.png)

### 2.3 åŠ è½½çŸ¢é‡æ•°æ®

L7æ”¯æŒ `GeoJSON`æ•°æ®

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
      <style>
        body,
        #map {
          height: 100vh;
          width: 100vw;
          margin: 0;
        }
      </style>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            center: [116.3956, 39.9392],
            zoom: 10,
            style: 'dark'
          })
        });
        scene.on('loaded', () => {
          fetch(
            'https://gw.alipayobjects.com/os/basement_prod/0d2f0113-f48b-4db9-8adc-a3937243d5a3.json'
          )
            .then(res => res.json())
            .then(data => {
              const layer = new L7.LineLayer({})
                .source(data)
              scene.addLayer(layer);
            });
        });
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530174539998](https://s2.loli.net/2023/05/30/oqOgsBEYwxtfkmA.png)

### 2.4 Markeræ ‡æ³¨

Markeræ ‡æ³¨æ˜¯åœ°å›¾ä¸Šç”¨æ¥æ ‡è®°ä¿¡æ¯çš„å¸¸ç”¨ç»„ä»¶

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            style: 'light',
            center: [110.770672, 34.159869]
          }),
        });
    
        const marker = new L7.Marker({
          color: '#f00'
        }).setLnglat([110.770672, 34.159869]);
        
        scene.addMarker(marker);
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530170134233](https://s2.loli.net/2023/05/30/edHvPBZ2rLuEFzw.png)

### 2.5 Popupå¼¹çª—

Popupå¼¹çª—æ˜¯åœ°å›¾ä¸Šç”¨æ¥æ˜¾ç¤ºä¿¡æ¯çš„å¸¸ç”¨ç»„ä»¶

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            style: 'light',
            center: [110.770672, 34.159869]
          }),
        });
    
        const popup = new L7.Popup({
          title: 'è‡ªå®šä¹‰æ ‡é¢˜',
          html: '<p>Popup ç¤ºä¾‹çš„è‡ªå®šä¹‰å†…å®¹</p>',
          lngLat: {
            lng: 110.770672,
            lat: 34.159869,
          },
        });
    
        scene.addPopup(popup);
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530165325005](https://s2.loli.net/2023/05/30/8Nx7zKSy4LG1sub.png)

### 2.6 äº‹ä»¶ç›‘å¬

L7æ”¯æŒäº‹ä»¶é¼ æ ‡ç‚¹å‡»ã€åŒå‡»ç­‰äº‹ä»¶ç›‘å¬

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            style: 'light',
            center: [110.770672, 34.159869]
          }),
        });
    
        setTimeout(() => {
          scene.on('click', (e) => {
            console.log(e) // é¼ æ ‡å·¦é”®ç‚¹å‡»äº‹ä»¶
            const marker = new L7.Marker({
              color: '#f00'
            }).setLnglat([e.lnglat.lng, e.lnglat.lat]);
            scene.addMarker(marker);
          });
        }, 1000);
        // scene.on('click', (e) => {console.log(e)}); // ç›´æ¥ç›‘å¬clickäº‹ä»¶ä¼šæŠ¥é”™
    
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530173837195](https://s2.loli.net/2023/05/30/ZbAx2J3SYzTvcX4.png)

### 2.7 åœ°å›¾æ§ä»¶

åœ¨ä½¿ç”¨åœ°å›¾æ—¶ï¼Œå¸¸å¸¸éœ€è¦ä½¿ç”¨ç¼©æ”¾ã€æ¯”ä¾‹å°ºç­‰æ§ä»¶

    <!DOCTYPE html>
    <html lang="en">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Document</title>
      <script src='https://unpkg.com/@antv/l7'></script>
      <style>
        body,
        #map {
          height: 100vh;
          width: 100vw;
          margin: 0;
        }
      </style>
    </head>
    
    <body>
      <div id="map"></div>
      <script>
        const scene = new L7.Scene({
          id: 'map',
          map: new L7.GaodeMap({
            center: [116.3956, 39.9392],
            zoom: 10,
            style: 'light'
          })
        });
        
        scene.on('loaded', () => {
          const zoom = new L7.Zoom();
          scene.addControl(zoom);
          const scale = new L7.Scale();
          scene.addControl(scale);
        });
    
      </script>
    </body>
    
    </html>
    

ç»“æœå¦‚ä¸‹ï¼š

![image-20230530175039617](https://s2.loli.net/2023/05/30/E1NXWMndQmBkv63.png)

3\. å‚è€ƒèµ„æ–™
--------

\[1\] [ç®€ä»‹ | L7 (antgroup.com)](https://l7.antv.antgroup.com/tutorial/l7)

\[2\] [æ‰€æœ‰å›¾è¡¨ | L7 (antgroup.com)](https://l7.antv.antgroup.com/examples)

\[3\] [åœºæ™¯ Scene | L7 (antgroup.com)](https://l7.antv.antgroup.com/api/scene)

ä½œè€…ï¼š[å½“æ—¶æ˜æœˆåœ¨æ›¾ç…§å½©äº‘å½’](https://www.cnblogs.com/jiujiubashiyi/)

å‡ºå¤„ï¼š[https://www.cnblogs.com/jiujiubashiyi/p/17444013.html](https://www.cnblogs.com/jiujiubashiyi/p/17444013.html)