---
layout: post
title: "【Linux】详解六种配置Linux环境变量的方法（以centos为例）"
date: "2023-05-20T01:05:14.419Z"
---
【Linux】详解六种配置Linux环境变量的方法（以centos为例）
====================================

> 本文时间 2023-05-19  
> 作者：sugerqube漆瓷

本文重理解，！！忽略环境变量加载原理！！

**本文目标**：理解六大环境变量配置，选择合适的配置文件进行配置

配置环境的理由
=======

以**shell**编程为例

![image](https://img2023.cnblogs.com/blog/2924373/202305/2924373-20230519140445750-1269720675.png)

现在我们想要运行名为"sugerqube.sh"的脚本需要运行的命令是  
`./sugerqube.sh` 即在命令行输入脚本的地址  
注：`./`是当前目录的意思

![image](https://img2023.cnblogs.com/blog/2924373/202305/2924373-20230519141010526-178100917.png)

同理当我们再其他目录想要运行它的时候需要打的命令就会**变化**。

**操作系统**为我们提供管理名为环境变量的东西，环境变量中配置了放置这些命令的文件夹。

这样我们就能在**任意地方**直接使用命令完成。

类似`vi`,`mv`等常见命令其实就是  
/usr/local/sbin:  
/usr/local/bin:  
/sbin:/bin:  
/usr/sbin:  
/usr/bin  
等下的命令文件，所以当这些常见命令用不了的时候，大概率说明环境便量配置出问题了。

可以创建临时变量：来进行抢救，后文还会再提及。  
`export PATH=$PATH:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin`

![image](https://img2023.cnblogs.com/blog/2924373/202305/2924373-20230519141625176-2061899678.png)

引入一种解释方法
========

接下来我会用**魔法咒语**的概念来简述Linux如何寻找环境变量。

现在想要发动名为“watherboom”的魔法。（自定linux命令）  
![image](https://img2023.cnblogs.com/blog/2924373/202305/2924373-20230519144716829-1965236053.png)

1.  你问法杖会不会（查看**临时环境变量**）  
    会（存在临时环境变量），咒语生效  
    换跟不会的法杖（新的bash窗口），咒语失效
    
2.  魔杖不会，你思索自己会不会（查看**用户环境变量/home/user/.bash\_profile**）  
    会（存在环境），咒语生效  
    其他人不会（切换用户），咒语无法发动
    
3.  你不会，你问老大会不会（查看**root环境变量/etc/profile**）  
    会（存在环境），咒语生效  
    老大也不会（未配置文件），咒语无法发动
    
4.  老大不会，问老天爷（查看**系统环境变量/etc/environment**）  
    会（存在环境），咒语生效  
    老天爷也不会（未配置文件），咒语无法发动
    

**因为是先问法杖，再层层向上，所以如果法杖直接回答了，无论他是否正确，都会采取法杖的方案。**

以上是四个环境变量会存在的地址，那还有两个在哪？

* * *

作为魔法师，有些事不能总亲力亲为，你需要**小精灵**（bash脚本）帮你做事。

所以还存在你的小精灵指南**（~/.bashrc）**  
你还可以问老大的小精灵所以有**（/etc/bashrc）**  
这些书都是**“你”** 写的，所上面的魔法（命令），你也会；当你转职（非bash）你就只能拜托小精灵帮你。

注：这一段简单说明了profile和bashrc的区别，前者是全范围涵盖的，后者是针对bash的。

平时我们用的都是bash命令，所以看起来好像是bashrc>profile,**实际上是他们有不同的关注点**。  
平时我们用的都是non-login进入的bash运行现成脚本，所以看起来bashrc更有用，而**profile仅登录能操作**

配置环境变量的方法
=========

方法1：配置临时环境变量
------------

直接在命令行输入以下命令

    export PATH=/home/sugerqube/bin:$PATH
    

`/home/bin`为要添加到环境变量的文件夹。  
`：$PATH`不可省略，他的存在是将你新的环境变量地址存到原先PATH的前面。  
有**shell**基础的会知道这里的`$`是对PATH地址的一种引用。

同理也可以放到前面：`export PATH=$PATH:/home/sugerqube/bin`

注意事项：

*   生效时间：立即生效
*   生效期限：当前终端有效，窗口关闭后无效
*   生效范围：仅对当前用户有效
*   配置的环境变量中不要忘了加上原来的配置，即$PATH部分，避免覆盖原来配置

> 包括后文的注意事项都引用自下文，ps：原文<方法一>存在错误。  
> [https://blog.csdn.net/xishining/article/details/119283522](https://blog.csdn.net/xishining/article/details/119283522)

* * *

  
  

方法2：配置用户bash环境变量（单用户最常用）
------------------------

直接在命令行输入以下命令

    cd
    vi .bash
    

最后一行输入  
`export PATH=$PATH:/home/sugerqube/bin`

注意事项：

*   生效时间：使用相同的用户打开新的终端时生效，或者手动source ~/.bashrc生效
*   生效期限：永久有效
*   生效范围：仅对当前用户有效
*   如果有后续的环境变量加载文件覆盖了PATH定义，则可能不生效

* * *

  
  

方法3：配置用户环境变量
------------

直接在命令行输入以下命令

    cd
    vi .bash_profile
    

最后一行输入  
`export PATH=$PATH:/home/sugerqube/bin`  
注意事项：同方法2，但是用户不登录也能生效（non-login 方式进入 bash 运行的命令）

* * *

  
  

方法4：配置“系统bash”环境变量（多用户最常用）
--------------------------

直接在命令行输入以下命令，需要权限 vi退出时`wq!`强制写入

    sudo vi /etc/bashrc
    

最后一行输入  
`export PATH=$PATH:/home/sugerqube/bin`

注意事项：

*   生效时间：新开终端生效，或者手动source /etc/bashrc生效
*   生效期限：永久有效
*   生效范围：对所有用户有效

* * *

  
  

方法5：配置“系统”环境变量
--------------

直接在命令行输入以下命令，需要权限 vi退出时`wq!`强制写入

    sudo vi /etc/profile
    

最后一行输入  
`export PATH=$PATH:/home/sugerqube/bin`  
注意事项：同方法4，但是用户不登录也能生效（non-login 方式进入 bash 运行的命令）

* * *

  
  

方法6：配置环境变量
----------

直接在命令行输入以下命令，需要权限 vi退出时`wq!`强制写入

    sudo vi /etc/environment
    

最后一行输入  
`export PATH=$PATH:/home/sugerqube/bin`

注意事项：通方法5。

* * *

  
  

以上就是个人对六中环境变量配置的理解