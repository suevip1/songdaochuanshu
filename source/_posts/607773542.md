---
layout: post
title: "å¯¹è±¡å­˜å‚¨ï¼ŸCRUD Boyå®ç°å¯¹æ–‡ä»¶çš„å¢åˆ æ”¹æŸ¥"
date: "2023-06-17T01:10:33.620Z"
---
å¯¹è±¡å­˜å‚¨ï¼ŸCRUD Boyå®ç°å¯¹æ–‡ä»¶çš„å¢åˆ æ”¹æŸ¥
=======================

å¤§å®¶å¥½ï¼æˆ‘æ˜¯sumå¢¨ï¼Œä¸€ä¸ªä¸€çº¿çš„åº•å±‚ç å†œï¼Œå¹³æ—¶å–œæ¬¢ç ”ç©¶å’Œæ€è€ƒä¸€äº›æŠ€æœ¯ç›¸å…³çš„é—®é¢˜å¹¶æ•´ç†æˆæ–‡ï¼Œé™äºæœ¬äººæ°´å¹³ï¼Œå¦‚æœæ–‡ç« å’Œä»£ç æœ‰è¡¨è¿°ä¸å½“ä¹‹å¤„ï¼Œè¿˜è¯·ä¸åèµæ•™ã€‚

ä»¥ä¸‹æ˜¯æ­£æ–‡ï¼

å¯¹è±¡å­˜å‚¨æ˜¯ä»€ä¹ˆï¼Ÿ
========

> å¯¹è±¡å­˜å‚¨æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå®ƒå°†æ•°æ®åˆ†å‰²æˆä¸åŒçš„å¯¹è±¡ï¼Œå¹¶ä¸ºæ¯ä¸ªå¯¹è±¡åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºè®¿é—®å’Œæ“ä½œæ•°æ®ã€‚è¿™äº›å¯¹è±¡è¢«å­˜å‚¨åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œä»¥ç¡®ä¿æ•°æ®çš„å¯é æ€§å’Œå¯ç”¨æ€§ã€‚å¯¹è±¡å­˜å‚¨é€‚åˆå­˜å‚¨å¤§é‡æ•°æ®ï¼Œå…·æœ‰å¯æ‰©å±•æ€§ã€ä½æˆæœ¬å’Œé«˜å®‰å…¨æ€§ç­‰ç‰¹ç‚¹ã€‚

è¿™æ®µè¯å¤ªä¸“ä¸šäº†ï¼Œä»¥è‡³äºæœ‰ç‚¹è®©äººçœ‹ä¸æ‡‚ã€‚ç§ä»¥ä¸ºå¯¹è±¡å­˜å‚¨å°±æ˜¯ã€åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿã€ï¼Œå¯èƒ½æ˜¯æˆ‘ä»¬åªä¼šç”¨å®ƒæ¥å­˜å‚¨å›¾ç‰‡ã€è§†é¢‘ã€æ–‡æ¡£ç­‰æ–‡ä»¶å§ğŸ˜…ï¼Œç„¶åæ•°æ®åº“(æ¯”å¦‚MySQL)åªå­˜å‚¨æ–‡ä»¶çš„è®¿é—®é“¾æ¥ã€‚ç›®å‰æ¥è§¦çš„å¯¹è±¡å­˜å‚¨æœ‰  
é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSã€å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨èåˆç‰ˆã€è‡ªå»ºå¯¹è±¡å­˜å‚¨MinIOã€‚

*   é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSS

[å¸®åŠ©æ–‡æ¡£é“¾æ¥](https://help.aliyun.com/product/31815.html)

![](https://img2023.cnblogs.com/blog/1127399/202306/1127399-20230613104049807-851980789.png)

*   å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨èåˆç‰ˆ

[å¸®åŠ©æ–‡æ¡£é“¾æ¥](https://www.ctyun.cn/document/10306929)

![](https://img2023.cnblogs.com/blog/1127399/202306/1127399-20230613103853020-685228216.png)

*   MinIOå¯¹è±¡å­˜å‚¨

[å¸®åŠ©æ–‡æ¡£é“¾æ¥](https://www.minio.org.cn/docs/cn/minio/kubernetes/upstream/)

![](https://img2023.cnblogs.com/blog/1127399/202306/1127399-20230613104200008-77256438.png)

`è¿™ä¸‰æ¬¾å¯¹è±¡å­˜å‚¨äº§å“å¯¹æ¯”å¦‚ä¸‹`

äº§å“

åŠŸèƒ½ç‰¹ç‚¹

æ˜¯å¦æ”¶è´¹

æ˜¯å¦å¼€æº

å¯¹æ¥éš¾æ˜“åº¦

é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSS

é˜¿é‡Œäº‘OSSæä¾›äº†ä¸°å¯Œçš„å­˜å‚¨ã€æ•°æ®å¤„ç†å’Œåˆ†å‘åŠŸèƒ½ï¼Œå¯ä»¥æ»¡è¶³å„ç§åœºæ™¯çš„éœ€æ±‚

æ”¶è´¹

ä¸å¼€æº

åªéœ€è¦ak/skï¼Œç„¶åçœ‹æ–‡æ¡£å³å¯

å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨èåˆç‰ˆ

å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨èåˆç‰ˆä¸»è¦é¢å‘ç§»åŠ¨äº’è”ç½‘åº”ç”¨ï¼Œæä¾›äº†æ•°æ®ç®¡ç†ã€åœ¨çº¿å¤„ç†ç­‰åŠŸèƒ½

æ”¶è´¹

ä¸å¼€æº

åªéœ€è¦ak/skï¼Œç„¶åçœ‹æ–‡æ¡£å³å¯

MinIOå¯¹è±¡å­˜å‚¨

MinIOä¸“æ³¨äºæä¾›é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚

å…è´¹

å¼€æº

åªéœ€è¦ak/skï¼Œç„¶åçœ‹æ–‡æ¡£å³å¯

**æ€»ä¹‹æœ‰é’±çš„è¯å°±ä¹°æœåŠ¡ï¼Œæ²¡é’±å°±è‡ªå·±æ­ï¼Œæ€»æœ‰åˆé€‚è‡ªå·±çš„ğŸ˜‰ã€‚**

å¯¹è±¡å­˜å‚¨å’Œæ•°æ®åº“çš„åŒºåˆ«
===========

å„ç»´åº¦å¯¹æ¯”
-----

å­˜å‚¨

æ•°æ®ç»“æ„

æ•°æ®å¤„ç†

å­˜å‚¨æ–¹å¼

å¯ä¼¸ç¼©æ€§

æ•°æ®åº“å­˜å‚¨

æ•°æ®åº“æ˜¯åŸºäºè¡¨æ ¼çš„å­˜å‚¨æ–¹å¼ï¼Œæ¯ä¸ªè¡¨æ ¼æœ‰ç‰¹å®šçš„åˆ—å’Œè¡Œã€‚

æ•°æ®åº“ä¸»è¦ç”¨äºå­˜å‚¨ç»“æ„åŒ–æ•°æ®ï¼Œå¦‚æ–‡æœ¬ã€æ•°å­—å’Œæ—¥æœŸç­‰ã€‚æ•°æ®åº“å¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„æ•°æ®å¤„ç†ï¼Œå¦‚æŸ¥è¯¢ã€è¿‡æ»¤å’Œæ’åºç­‰ã€‚

æ•°æ®åº“é€šå¸¸ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“æˆ–NoSQLæ•°æ®åº“ç­‰

æ•°æ®åº“åœ¨æ‰©å±•æ€§ä¸Šéœ€è¦æ›´å¤šçš„è¿ç»´å’Œç®¡ç†

å¯¹è±¡å­˜å‚¨

å¯¹è±¡å­˜å‚¨æ˜¯åŸºäºå¯¹è±¡çš„å­˜å‚¨æ–¹å¼ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ–‡ä»¶

å¯¹è±¡å­˜å‚¨é€šå¸¸ç”¨äºå­˜å‚¨å¤§é‡éç»“æ„åŒ–æ•°æ®ï¼Œå¦‚å›¾ç‰‡ã€è§†é¢‘å’ŒéŸ³é¢‘ç­‰

å¯¹è±¡å­˜å‚¨é€šå¸¸ä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨æŠ€æœ¯å°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š

å¯¹è±¡å­˜å‚¨å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°æ·»åŠ æ–°çš„èŠ‚ç‚¹æ¥å¤„ç†æ›´å¤šçš„æ•°æ®

é¡¹ç›®å¯¹æ¥æµç¨‹å›¾å¯¹æ¯”
---------

![](https://img2023.cnblogs.com/blog/1127399/202306/1127399-20230613143206044-1144048735.png)

CRUDä¹‹é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨
============

1\. å®‰è£…Java SDK
--------------

ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡mavenç›´æ¥å¼•å…¥

    <dependency>
        <groupId>com.aliyun.oss</groupId>
        <artifactId>aliyun-sdk-oss</artifactId>
        <version>3.15.1</version>
    </dependency>
    

2\. è·å–Client
------------

å®˜æ–¹è·å–Clientä»£ç ç¤ºä¾‹

    // yourEndpointå¡«å†™Bucketæ‰€åœ¨åœ°åŸŸå¯¹åº”çš„Endpointã€‚ä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼ŒEndpointå¡«å†™ä¸ºhttps://oss-cn-hangzhou.aliyuncs.comã€‚
    String endpoint = "yourEndpoint";
    // é˜¿é‡Œäº‘è´¦å·AccessKeyæ‹¥æœ‰æ‰€æœ‰APIçš„è®¿é—®æƒé™ï¼Œé£é™©å¾ˆé«˜ã€‚å¼ºçƒˆå»ºè®®æ‚¨åˆ›å»ºå¹¶ä½¿ç”¨RAMç”¨æˆ·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½•RAMæ§åˆ¶å°åˆ›å»ºRAMç”¨æˆ·ã€‚
    String accessKeyId = "yourAccessKeyId";
    String accessKeySecret = "yourAccessKeySecret";
    
    // åˆ›å»ºOSSClientå®ä¾‹ã€‚
    OSS ossClient = new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);
    
    // å…³é—­OSSClientã€‚
    ossClient.shutdown();                    
    

æˆ‘ä¸€èˆ¬ä¼šå°†å…¶å˜æˆä¸€ä¸ªComponent

    @Component
    public class AliyunOssClient {
    
        @Value("${oss.endpoint}")
        private String endpoint;
        @Value("${aliyun.accessKeyId}")
        private String accessKeyId;
        @Value("${aliyun.accessKeySecret}")
        private String accessKeySecret;
    
        @Bean(name = "aliyunOssClient")
        public OSS aliyunOssClient() {
            // æ„å»ºå¹¶è¿”å›OSSClient
            return new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);
        }
    }
    

3\. å¢åˆ æ”¹æŸ¥æ“ä½œ
----------

### ï¼ˆ1ï¼‰å¯¹è±¡å…¬å…±è¯»&ä¸Šä¼ å’Œè®¿é—®

[å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/84781.html)

     /**
        * ç®€å•ä¸Šä¼ -æµå¼ä¸Šä¼ -å…¬å…±è¯»
        *
        * @param bucketName  bucketåç§°
        * @param key         æ–‡ä»¶å
        * @param inputStream è¾“å…¥æµ
        * @return PutObjectResult ä¸Šä¼ ç»“æœ
        */
    public static PutObjectResult putObjectByInputStreamAndPublicRead(String bucketName, String key,
            InputStream inputStream) {
            ObjectMetadata metadata = new ObjectMetadata();
            //è®¾ç½®StorageClassä¸ºStandardå³ä¸º
            metadata.setHeader(OSSHeaders.OSS_STORAGE_CLASS, StorageClass.Standard.toString());
            //è®¾ç½®è¯»å†™ä¸ºå…¬å…±è¯»å†™
            metadata.setObjectAcl(CannedAccessControlList.PublicRead);
            // å‡†å¤‡OSSä¸Šä¼ å¯¹è±¡è¯·æ±‚
            PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, key, inputStream);
            putObjectRequest.setMetadata(metadata);
            // ä¸Šä¼ 
            return ossClient.putObject(putObjectRequest);
    }
    

**å½“è®¾ç½®æ–‡ä»¶çš„è®¿é—®æƒé™ä¸ºå…¬å…±è¯»æ—¶ï¼Œç›´æ¥æ‹¼æ¥æ–‡ä»¶çš„è®¿é—®é“¾æ¥å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚endpointä¸ºoss-cn-hangzhou.aliyuncs.comï¼Œbucketä¸ºfile-bucketï¼Œkeyä¸º/test/file/1.png**  
**é‚£ä¹ˆè®¿é—®é“¾æ¥å°±ä¸ºï¼š[https://file-bucket.oss-cn-hangzhou.aliyuncs.com/test/file/1.png](https://file-bucket.oss-cn-hangzhou.aliyuncs.com/test/file/1.png)**

### ï¼ˆ2ï¼‰å¯¹è±¡ç§æœ‰è¯»&ä¸Šä¼ å’Œè®¿é—®

[å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/84781.html)

     /**
         * ç®€å•ä¸Šä¼ -æµå¼ä¸Šä¼ -ç§æœ‰è¯»å†™
         *
         * @param bucketName  bucketåç§°
         * @param key         æ–‡ä»¶å
         * @param inputStream è¾“å…¥æµ
         * @return PutObjectResult ä¸Šä¼ ç»“æœ
         */
        public static PutObjectResult putObjectByInputStreamAndPrivate(String bucketName, String key,
            InputStream inputStream) {
            ObjectMetadata metadata = new ObjectMetadata();
            //è®¾ç½®StorageClassä¸ºStandardå³ä¸º
            metadata.setHeader(OSSHeaders.OSS_STORAGE_CLASS, StorageClass.Standard.toString());
            //è®¾ç½®è¯»å†™ä¸ºå…¬å…±è¯»å†™
            metadata.setObjectAcl(CannedAccessControlList.Private);
            // å‡†å¤‡OSSä¸Šä¼ å¯¹è±¡è¯·æ±‚
            PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, key, inputStream);
            putObjectRequest.setMetadata(metadata);
            // ä¸Šä¼ 
            return ossClient.putObject(putObjectRequest);
        }
    

**å½“è®¾ç½®æ–‡ä»¶çš„è®¿é—®æƒé™ä¸ºç§æœ‰è¯»æ—¶ï¼Œç›´æ¥æ‹¼æ¥è®¿é—®é“¾æ¥æ˜¯æ²¡æ³•è®¿é—®è¯¥æ–‡ä»¶çš„ï¼Œè®¿é—®ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š**

    <Error>
    <Code>AccessDenied</Code>
    <Message>You do not have read permission on this object.</Message>
    <RequestId>6488223453BCC63831BB3EC4</RequestId>
    <HostId>file-bucket.oss-cn-hangzhou.aliyuncs.com</HostId>
    <EC>0003-00000005</EC>
    </Error>
    

**è¿™æ—¶å°±éœ€è¦å¯¹keyè¿›è¡ŒåŠ ç­¾æ“ä½œäº†ï¼ŒåŠ ç­¾ä»£ç å¦‚ä¸‹ï¼š**

     /**
         * é€šè¿‡bucketNameã€keyã€è¿‡æœŸæ—¶é—´ç”Ÿæˆæ–‡ä»¶è®¿é—®é“¾æ¥ï¼ˆæ—¶æ•ˆæ€§ï¼‰
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         * @param expiration è¿‡æœŸæ—¶é—´
         * @return æ–‡ä»¶è®¿é—®é“¾æ¥
         */
        public static String getSignObjectUrl(String bucketName, String key, Date expiration) {
            return ossClient.generatePresignedUrl(bucketName, key, expiration).toString();
        }
    

**é‚£ä¹ˆè·å–çš„é“¾æ¥æ ¼å¼å°±æ˜¯è¿™æ ·äº†ï¼š[https://file-bucket.oss-cn-hangzhou.aliyuncs.com/test/file/test.png?Expires=xxx&OSSAccessKeyId=xxxx&Signature=xxxx](https://file-bucket.oss-cn-hangzhou.aliyuncs.com/test/file/test.png?Expires=xxx&OSSAccessKeyId=xxxx&Signature=xxxx)**

### ï¼ˆ3ï¼‰å¯¹è±¡ä¸‹è½½

[å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/84823.html)

#### ä¸‹è½½åˆ°æ–‡ä»¶

       /**
         * é€šè¿‡bucketNameã€keyã€æ–‡ä»¶è·¯å¾„ ä¸‹è½½OSSæ–‡ä»¶åˆ°æœ¬åœ°æ–‡ä»¶
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         * @param pathName   æœ¬åœ°æ–‡ä»¶è·¯å¾„
         */
        public static void getObjectToFile(String bucketName, String key, String pathName) {
            // ä¸‹è½½OSSæ–‡ä»¶åˆ°æœ¬åœ°
            ossClient.getObject(new GetObjectRequest(bucketName, key), new File(pathName));
        }
    

#### æµå¼ä¸‹è½½

     /**
         * é€šè¿‡bucketNameã€key ä¸‹è½½OSSå˜æˆå­—èŠ‚æµ
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         */
        public static void getObjectToStream(String bucketName, String key) {
            OSSObject ossObject = null;
            BufferedReader reader = null;
            try {
                ossObject = ossClient.getObject(bucketName, key);
                reader = new BufferedReader(new InputStreamReader(ossObject.getObjectContent()));
                while (true) {
                    String line = null;
                    line = reader.readLine();
                    if (line == null) { break; }
    
                    System.out.println("\n" + line);
                }
            } catch (IOException e) {
                log.error("ä¸‹è½½ossæ–‡ä»¶å¼‚å¸¸", e);
            } finally {
                try {
                    // æ•°æ®è¯»å–å®Œæˆåï¼Œè·å–çš„æµå¿…é¡»å…³é—­ï¼Œå¦åˆ™ä¼šé€ æˆè¿æ¥æ³„æ¼ï¼Œå¯¼è‡´è¯·æ±‚æ— è¿æ¥å¯ç”¨ï¼Œç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œã€‚
                    reader.close();
                    // ossObjectå¯¹è±¡ä½¿ç”¨å®Œæ¯•åå¿…é¡»å…³é—­ï¼Œå¦åˆ™ä¼šé€ æˆè¿æ¥æ³„æ¼ï¼Œå¯¼è‡´è¯·æ±‚æ— è¿æ¥å¯ç”¨ï¼Œç¨‹åºæ— æ³•æ­£å¸¸å·¥ä½œã€‚
                    ossObject.close();
                } catch (IOException e) {
                    log.error("å…³é—­æµå‘ç”Ÿå¼‚å¸¸", e);
                }
            }
        }
    

### ï¼ˆ4ï¼‰å¯¹è±¡åˆ é™¤

[å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/84842.html)

       /**
         * é€šè¿‡bucketNameã€keyåˆ é™¤æ–‡ä»¶
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         */
        public static void delObject(String bucketName, String key) {
            // åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚å¦‚æœè¦åˆ é™¤ç›®å½•ï¼Œç›®å½•å¿…é¡»ä¸ºç©ºã€‚
            ossClient.deleteObject(bucketName, key);
        }
    

### ï¼ˆ5ï¼‰å›¾ç‰‡å¤„ç†

[å®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/47505.html)  
**è¿™ä¸ªæ¥å£ç›®å‰åªæœ‰é˜¿é‡Œäº‘æœ‰å†™æ–‡æ¡£ï¼Œå…¶ä»–äº‘éƒ½æ˜¯ä¸€ç¬”å¸¦è¿‡æ²¡æœ‰è¯¦ç»†è¯´æ˜ï¼Œä½œç”¨æ˜¯å°†ä¸Šä¼ åˆ°OSSçš„åŸå§‹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€åŠ æ°´å°ç­‰æ“ä½œï¼Œéå¸¸å¥½ç”¨ï¼Œåœ¨æ­¤å¼ºçƒˆå®‰åˆ©ä¸€æ³¢ï¼ï¼ï¼**

*   å°†å›¾ç‰‡ç¼©æ”¾ä¸ºå›ºå®šå®½é«˜100 px

    // å°†å›¾ç‰‡ç¼©æ”¾ä¸ºå›ºå®šå®½é«˜100 pxã€‚
    String style = "image/resize,m_fixed,w_100,h_100";
    GetObjectRequest request = new GetObjectRequest(bucketName, objectName);
    request.setProcess(style);
    // å°†å¤„ç†åçš„å›¾ç‰‡å‘½åä¸ºexample-resize.jpgå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
    // å¡«å†™æœ¬åœ°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚D:\\localpath\\example-resize.jpgã€‚å¦‚æœæŒ‡å®šçš„æœ¬åœ°æ–‡ä»¶å­˜åœ¨ä¼šè¦†ç›–ï¼Œä¸å­˜åœ¨åˆ™æ–°å»ºã€‚
    // å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„åªå¡«å†™äº†æœ¬åœ°æ–‡ä»¶åç§°ï¼ˆä¾‹å¦‚example-resize.jpgï¼‰ï¼Œåˆ™æ–‡ä»¶é»˜è®¤ä¿å­˜åˆ°ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ã€‚
    ossClient.getObject(request, new File("D:\\localpath\\example-resize.jpg"));
    

*   ä»åæ ‡ï¼ˆ100,100ï¼‰å¼€å§‹ï¼Œå°†å›¾ç‰‡è£å‰ªä¸ºå®½é«˜100 px

    // ä»åæ ‡ï¼ˆ100,100ï¼‰å¼€å§‹ï¼Œå°†å›¾ç‰‡è£å‰ªä¸ºå®½é«˜100 pxã€‚
    style = "image/crop,w_100,h_100,x_100,y_100";
    request = new GetObjectRequest(bucketName, objectName);
    request.setProcess(style);
    // å°†å¤„ç†åçš„å›¾ç‰‡å‘½åä¸ºexample-crop.jpgå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
    ossClient.getObject(request, new File("D:\\localpath\\example-crop.jpg"));
    

*   å°†å›¾ç‰‡æ—‹è½¬90Â°

     // å°†å›¾ç‰‡æ—‹è½¬90Â°ã€‚
    style = "image/rotate,90";
    request = new GetObjectRequest(bucketName, objectName);
    request.setProcess(style);
    // å°†å¤„ç†åçš„å›¾ç‰‡å‘½åä¸ºexample-rotate.jpgå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
    ossClient.getObject(request, new File("D:\\localpath\\example-rotate.jpg"));
    

*   åœ¨å›¾ç‰‡ä¸­æ·»åŠ æ–‡å­—æ°´å°ã€‚

    // åœ¨å›¾ç‰‡ä¸­æ·»åŠ æ–‡å­—æ°´å°ã€‚
    // æ–‡å­—æ°´å°çš„æ–‡å­—å†…å®¹ç»è¿‡Base64ç¼–ç åï¼Œå†å°†ç¼–ç ç»“æœä¸­çš„åŠ å·ï¼ˆ+ï¼‰æ›¿æ¢æˆçŸ­åˆ’çº¿ï¼ˆ-ï¼‰ï¼Œæ­£æ–œçº¿ï¼ˆ/ï¼‰æ›¿æ¢æˆä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¹¶å»æ‰å°¾éƒ¨çš„ç­‰å·ï¼ˆ=ï¼‰ï¼Œä»è€Œå¾—åˆ°æ°´å°å­—ç¬¦ä¸²ã€‚
    // æŒ‡å®šæ–‡å­—æ°´å°çš„æ–‡å­—å†…å®¹ä¸ºHello Worldï¼Œæ–‡å­—å†…å®¹è¿›è¡Œç¼–ç å¤„ç†åå¾—åˆ°çš„æ°´å°å­—ç¬¦ä¸²ä¸ºSGVsbG8gV29ybGQã€‚
    style = "image/watermark,text_SGVsbG8gV29ybGQ";
    request = new GetObjectRequest(bucketName, objectName);
    request.setProcess(style);
    // å°†å¤„ç†åçš„å›¾ç‰‡å‘½åä¸ºexample-watermarktext.jpgå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
    ossClient.getObject(request, new File("D:\\localpath\\example-watermarktext.jpg"));
    
    

*   åœ¨å›¾ç‰‡ä¸­æ·»åŠ å›¾ç‰‡æ°´å°ã€‚è¯·ç¡®ä¿æ°´å°å›¾ç‰‡å·²ä¿å­˜åœ¨å›¾ç‰‡æ‰€åœ¨Bucketä¸­

    // åœ¨å›¾ç‰‡ä¸­æ·»åŠ å›¾ç‰‡æ°´å°ã€‚è¯·ç¡®ä¿æ°´å°å›¾ç‰‡å·²ä¿å­˜åœ¨å›¾ç‰‡æ‰€åœ¨Bucketä¸­ã€‚
    // æ°´å°å›¾ç‰‡çš„å®Œæ•´è·¯å¾„ç»è¿‡Base64ç¼–ç åï¼Œå†å°†ç¼–ç ç»“æœä¸­çš„åŠ å·ï¼ˆ+ï¼‰æ›¿æ¢æˆçŸ­åˆ’çº¿ï¼ˆ-ï¼‰ï¼Œæ­£æ–œçº¿ï¼ˆ/ï¼‰æ›¿æ¢æˆä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¹¶å»æ‰å°¾éƒ¨çš„ç­‰å·ï¼ˆ=ï¼‰ï¼Œä»è€Œå¾—åˆ°æ°´å°å­—ç¬¦ä¸²ã€‚
    // æŒ‡å®šæ°´å°å›¾ç‰‡çš„å®Œæ•´è·¯å¾„ä¸ºpanda.jpgï¼Œå®Œæ•´è·¯å¾„è¿›è¡Œç¼–ç å¤„ç†åå¾—åˆ°çš„æ°´å°å­—ç¬¦ä¸²ä¸ºcGFuZGEuanBnã€‚
    style = "image/watermark,image_cGFuZGEuanBn";
    request = new GetObjectRequest(bucketName, objectName);
    request.setProcess(style);
    // å°†å¤„ç†åçš„å›¾ç‰‡å‘½åä¸ºexample-watermarkimage.jpgå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚
    ossClient.getObject(request, new File("D:\\localpath\\example-watermarkimage.jpg"));
          
    

**é™¤äº†è¿™äº›ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±çœ‹æ–‡æ¡£~**  
**é¡ºä¾¿è¯´ä¸€ä¸ªæˆ‘ä»¬ä½¿ç”¨çš„æ¡ˆä¾‹**

> æˆ‘ä»¬ä¹‹å‰åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œåšäº†ä¸ªæ–‡ç« å‘å¸ƒçš„åŠŸèƒ½ï¼Œç®€å•æ¥è¯´å°±æ˜¯PCåå°ç®¡ç†ç«¯å‘å¸ƒæ–‡ç« ï¼Œç„¶ååœ¨å¾®ä¿¡å°ç¨‹åºã€H5å°ç¨‹åºç‚¹å‡»æŸ¥çœ‹ã€‚æ–‡ç« çš„å†…å®¹æ˜¯åŒ…æ‹¬å›¾æ–‡çš„ï¼Œæœ‰äº›æ–‡ç« å›¾ç‰‡ä¸Šä¼ çš„æ˜¯åŸå›¾ï¼Œä¸€å¼ å¥½å‡ å…†å¤§å°ï¼Œç”¨æˆ·åœ¨æ‰‹æœºç«¯æŸ¥çœ‹æ–‡ç« æ—¶åŠ è½½æ…¢ä¸è¯´ï¼Œé‚£æµé‡æ›´æ˜¯è·‘å¾—é£èµ·ã€‚æˆ‘ä»¬å°±æ˜¯ç”¨è¿™ä¸ªåŠŸèƒ½å¯¹å›¾ç‰‡è¿›è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œæ§åˆ¶å›¾ç‰‡å¤§å°æ¥è§£å†³çš„ã€‚

> å½“æ—¶æˆ‘ä»¬ä½¿ç”¨å¯Œæ–‡æœ¬æ¡†å†™çš„æ–‡ç« ï¼Œè¿™ç§æ–‡ç« ä¼šæŠŠå›¾ç‰‡ã€æ–‡å­—å’Œdomå…ƒç´ æ··åœ¨ä¸€èµ·ï¼Œè€Œä¸”æ¯å¼ å›¾ç‰‡å¤§å°ã€åˆ†è¾¨ç‡éƒ½ä¸åŒï¼Œè¿™ç§æƒ…å†µä¸‹åç«¯æ˜¯æ²¡æ³•å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†çš„ï¼Œèƒ½å¤„ç†å›¾ç‰‡çš„åªæœ‰å‰ç«¯ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé˜¿é‡Œäº‘OSSæä¾›äº†ä¸€ä¸ªå‚æ•°ï¼š`x-oss-process`ã€‚å…·ä½“æ•ˆæœï¼Œæˆ‘ä»¬ç›´æ¥çœ‹å¯¹æ¯”å›¾ï¼š

![](https://img2023.cnblogs.com/blog/1127399/202306/1127399-20230615151123496-274433456.png)

> ä»ä¸Šå›¾çœ‹ï¼ŒåŠ äº†å‚æ•°åï¼Œå›¾ç‰‡ç›´æ¥å˜å°ï¼Œä½†ä¹Ÿæ¨¡ç³Šäº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ç‰‡æ ¹æœ¬ä¸éœ€è¦åç«¯å¤„ç†ï¼Œå‰ç«¯è‡ªå·±æ‹¼æ¥å‚æ•°å°±å¯ä»¥å¤„ç†å›¾ç‰‡äº†ï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œè€Œä¸”åŸå›¾é“¾æ¥ä¹Ÿåœ¨å‰ç«¯ï¼Œè¿˜å¯ä»¥åšé•¿æŒ‰æŸ¥çœ‹åŸå›¾åŠŸèƒ½ã€‚

CRUDä¹‹å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨
============

1\. å®‰è£…Java SDK
--------------

åŒæ ·éƒ½æ˜¯é€šè¿‡mavenç›´æ¥å¼•å…¥ï¼Œä½†æ˜¯å¤šäº†å¥½å‡ ä¸ªä¾èµ–ï¼Œæ¯•ç«Ÿä¸æ˜¯è‡ªç ”çš„ã€‚

    <!-- å¤©ç¿¼äº‘ -->
    <dependency>
      <groupId>cn.chinatelecom</groupId>
      <artifactId>oss-java-sdk</artifactId>
    <version>2.0.3</version>
    </dependency>
    <dependency>
      <groupId>com.amazonaws</groupId>
      <artifactId>aws-java-sdk-s3</artifactId>
    <version>1.11.336</version>
    </dependency>
    <!-- ä½¿ç”¨stsæœåŠ¡éœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ– -->
    <dependency>
      <groupId>com.amazonaws</groupId>
      <artifactId>aws-java-sdk-sts</artifactId>
      <version>1.11.336</version>
    </dependency>
    <dependency>
      <groupId>joda-time</groupId>
      <artifactId>joda-time</artifactId>
      <version>2.10.3</version>
    </dependency>
    

2\. è·å–Client
------------

æˆ‘è¿˜æ˜¯å°†å…¶å˜æˆä¸€ä¸ªComponent

    @Component
    public class TianyiyunOssClient {
    
        @Value("${oss.endpoint}")
        private String endpoint;
        @Value("${tianyiyun.accessKeyId}")
        private String accessKeyId;
        @Value("${tianyiyun.accessKeySecret}")
        private String accessKeySecret;
    
        @Bean
        public AmazonS3 getOssClient() {
            BasicAWSCredentials credentials = new BasicAWSCredentials(accessKeyId, accessKeySecret);
            ClientConfiguration clientConfiguration = new ClientConfiguration();
            EndpointConfiguration endpointConfiguration = new EndpointConfiguration(
                endpoint, Regions.DEFAULT_REGION.getName());
            return AmazonS3ClientBuilder.standard()
                //å®¢æˆ·ç«¯è®¾ç½®
                .withClientConfiguration(clientConfiguration)
                //å‡­è¯è®¾ç½®
                .withCredentials(new AWSStaticCredentialsProvider(credentials))
                //endpointè®¾ç½®
                .withEndpointConfiguration(endpointConfiguration)
                .build();
        }
    }
    

3\. å¢åˆ æ”¹æŸ¥æ“ä½œ
----------

### ï¼ˆ1ï¼‰ä¸Šä¼ å¯¹è±¡

[å®˜æ–¹æ–‡æ¡£](https://console.xstore.ctyun.cn/doc/store/sdk/java/objectOperation/putObject.html)

        /**
         * ç®€å•ä¸Šä¼ -æµå¼ä¸Šä¼ -å…¬å…±è¯»
         *
         * @param bucketName  bucketåç§°
         * @param key         æ–‡ä»¶å
         * @param inputStream è¾“å…¥æµ
         * @return PutObjectResult ä¸Šä¼ ç»“æœ
         */
        public static PutObjectResult putObjectByInputStream(String bucketName, String key, InputStream inputStream) {
            ObjectMetadata metadata = new ObjectMetadata();
            metadata.setHeader(OSSHeaders.OSS_STORAGE_CLASS, StorageClass.Standard.toString());
            // å‡†å¤‡OSSä¸Šä¼ å¯¹è±¡è¯·æ±‚
            PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, key, inputStream, metadata);
            putObjectRequest.setMetadata(metadata);
            //è®¾ç½®ä¸Šä¼ å¯¹è±¡çš„Aclä¸ºå…¬å…±è¯»ï¼Œç§æœ‰å†™
            putObjectRequest.setCannedAcl(CannedAccessControlList.PublicRead);
            // ä¸Šä¼ 
            return tianyiyunOssClient.putObject(putObjectRequest);
        }
    

**åŸºæœ¬å’Œé˜¿é‡Œäº‘ä¸€æ¨¡ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°æ€ä¹ˆå®ç°å…¬å…±è¯»å’Œç§æœ‰è¯»äº†ï¼Œæ ¸å¿ƒå°±æ˜¯è®¾ç½®setCannedAclã€‚**

### ï¼ˆ2ï¼‰è·å–å¯¹è±¡è®¿é—®é“¾æ¥

[å®˜æ–¹æ–‡æ¡£](https://console.xstore.ctyun.cn/doc/store/sdk/java/objectOperation/generatePresignedUrl.html)

    
        /**
         * ç”Ÿæˆé¢„ç­¾åä¸‹è½½é“¾æ¥
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         * @param expiration è¿‡æœŸæ—¶é—´
         * @return æ–‡ä»¶è®¿é—®é“¾æ¥
         */
        public static String getObjectUrl(String bucketName, String key, Date expiration) {
            GeneratePresignedUrlRequest request = new GeneratePresignedUrlRequest(bucketName, key)
                .withMethod(HttpMethod.GET)
                .withExpiration(expiration);
            return tianyiyunOssClient.generatePresignedUrl(request).toString();
        }
    

**è¿™é‡Œç¨å¾®å’Œé˜¿é‡Œäº‘ä¸å¤ªä¸€æ ·ï¼Œè™½ç„¶GeneratePresignedUrlRequestä¹Ÿæœ‰setExpirationæ–¹æ³•ï¼Œä½†å¥½åƒä¸ç”Ÿæ•ˆï¼Œå¿…é¡»è¦ä½¿ç”¨ä¸Šé¢è¿™ç§å½¢å¼æ‰å¯ä»¥åŠ ç­¾ï¼Œå¥‡æ€ªğŸ¤”ã€‚**

### ï¼ˆ3ï¼‰åˆ é™¤å¯¹è±¡

[å®˜æ–¹æ–‡æ¡£](https://console.xstore.ctyun.cn/doc/store/sdk/java/objectOperation/deleteObject.html)

    /**
         * é€šè¿‡bucketNameã€keyåˆ é™¤æ–‡ä»¶
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         */
        public static void delObject(String bucketName, String key) {
            // åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚å¦‚æœè¦åˆ é™¤ç›®å½•ï¼Œç›®å½•å¿…é¡»ä¸ºç©ºã€‚
            tianyiyunOssClient.deleteObject(bucketName, key);
        }
    

### ï¼ˆ4ï¼‰å›¾ç‰‡å¤„ç†

[å®˜æ–¹æ–‡æ¡£](https://console.xstore.ctyun.cn/doc/store/sdk/java/objectOperation/generatePresignedUrl.html)  
**è¿™é‡Œå¤©ç¿¼äº‘çš„æ–‡æ¡£æ²¡æœ‰è¯¦ç»†è¯´æ˜ï¼Œä½†æˆ‘è¿˜æ˜¯æ‰¾åˆ°äº†å¤©ç¿¼äº‘å¯¹è±¡å­˜å‚¨æ˜¯æ€ä¹ˆå¤„ç†å›¾ç‰‡çš„ã€‚åŒé˜¿é‡Œäº‘çš„`x-oss-process`ï¼Œå¤©ç¿¼äº‘çš„å¤„ç†å‚æ•°ä¸º`x-amz-process`ã€‚ç”¨æ³•ä¹Ÿå’Œé˜¿é‡Œäº‘çš„ä¸€æ ·ï¼Œç›´æ¥æŠŠå‚æ•°æ‹¼æ¥åœ¨urlåé¢å³å¯ã€‚**

    try {
        GeneratePresignedUrlRequest request = new GeneratePresignedUrlRequest(bucketName, objectKey)
                .withMethod(HttpMethod.GET)
                .withExpiration(expiration);
        // åœ¨URLä¸­æ·»åŠ é¢å¤–å‚æ•°
        request.addRequestParameter("x-amz-limit", String.format("rate=%d", 100));
        request.addRequestParameter("x-amz-process", "image/watermark,text_12345678");
        URL url = s3.generatePresignedUrl(request);
    } catch (AmazonServiceException e) {
        System.err.println(e.getErrorMessage());
    }
    

CRUDä¹‹MinIOå¯¹è±¡å­˜å‚¨
==============

1\. å®‰è£…Java SDK
--------------

åŒä¸Š

         <dependency>
                <groupId>io.minio</groupId>
                <artifactId>minio</artifactId>
                <version>8.4.5</version>
            </dependency>
    

2\. è·å–Client
------------

åŒä¸Šï¼Œæ³¨å†Œä¸ºComponent

    @Component
    public class MinioOssClient {
    
        @Value("${minio.endpoint}")
        private String endpoint;
        @Value("${minio.accessKey}")
        private String accessKey;
        @Value("${minio.secretKey}")
        private String secretKey;
    
        /**
         * æ³¨å…¥minio å®¢æˆ·ç«¯
         *
         * @return å®¢æˆ·ç«¯
         */
        @Bean
        public MinioClient minioClient() {
            return MinioClient.builder()
                .endpoint(endpoint)
                .credentials(accessKey, secretKey)
                .httpClient(getUnsafeOkHttpClient())
                .build();
        }
    
        private OkHttpClient getUnsafeOkHttpClient() {
            try {
                final TrustManager[] trustAllCerts = new TrustManager[] {
                    new X509TrustManager() {
                        @Override
                        public void checkClientTrusted(X509Certificate[] x509Certificates, String s) throws
                            CertificateException {
                        }
    
                        @Override
                        public void checkServerTrusted(X509Certificate[] x509Certificates, String s)
                            throws CertificateException {
                        }
    
                        @Override
                        public X509Certificate[] getAcceptedIssuers() {
                            return new X509Certificate[] {};
                        }
                    }
                };
    
                X509TrustManager x509TrustManager = (X509TrustManager)trustAllCerts[0];
                final SSLContext sslContext = SSLContext.getInstance("SSL");
                sslContext.init(null, trustAllCerts, new SecureRandom());
                final SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();
                OkHttpClient.Builder builder = new OkHttpClient.Builder();
                builder.sslSocketFactory(sslSocketFactory, x509TrustManager);
    
                builder.hostnameVerifier(new HostnameVerifier() {
                    @Override
                    public boolean verify(String s, SSLSession sslSession) {
                        return true;
                    }
                });
                return builder.build();
    
            } catch (NoSuchAlgorithmException | KeyManagementException e) {
                throw new RuntimeException(e);
            }
        }
    
    }
    

**è¿™é‡Œå¤šäº†ä¸€ä¸ªæ–¹æ³•`getUnsafeOkHttpClient`æ–¹æ³•ï¼ŒåŸå› æ˜¯MinIOæ˜¯æˆ‘ä»¬è‡ªå»ºçš„ï¼Œä½¿ç”¨çš„https://ip:portçš„æ–¹å¼å»è°ƒç”¨ï¼Œè€Œä¸æ˜¯åŸŸåæ–¹å¼ã€‚å¯¹æ¥è¿‡è¿™ç§åœ°å€çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œå¦‚æœä¸å¤„ç†ä¸€ä¸‹httpsçš„å®‰å…¨è¯ä¹¦ï¼Œè°ƒç”¨çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚è¯¥æ–¹æ³•æ˜¯ä¸ºäº†è§£å†³SSLè¯ä¹¦éªŒè¯å¼‚å¸¸ï¼Œå³å½“è¯·æ±‚çš„URLä½¿ç”¨çš„æ˜¯HTTPSåè®®æ—¶ï¼Œå¦‚æœè¯ä¹¦æ— æ•ˆæˆ–ä¸è¢«ä¿¡ä»»ï¼Œä¼šæŠ›å‡ºSSLHandshakeExceptionå¼‚å¸¸ï¼Œé€šè¿‡è‡ªå®šä¹‰TrustManagerå’ŒSSLSocketFactoryæ¥å®ç°å¿½ç•¥è¯ä¹¦çš„éªŒè¯ï¼Œä»è€Œé¿å…SSLå¼‚å¸¸ã€‚**

3\. å¢åˆ æ”¹æŸ¥æ“ä½œ
----------

### ï¼ˆ1ï¼‰ä¸Šä¼ å¯¹è±¡

     /**
         * ç®€å•ä¸Šä¼ -æµå¼ä¸Šä¼ 
         *
         * @param bucketName  bucketåç§°
         * @param key         æ–‡ä»¶å
         * @param inputStream è¾“å…¥æµ
         * @return ObjectWriteResponse ä¸Šä¼ ç»“æœ
         */
        public static ObjectWriteResponse uploadInputStream(String bucketName, String key, InputStream inputStream)
            throws Exception {
            //è®¾ç½®æƒé™
            Map<String, String> userMetadata = new HashMap<>();
            //è®¾ç½®ä¸ºå…¬æœ‰è¯»
            userMetadata.put("access-control", "public-read");
            //è®¾ç½®ä¸ºç§æœ‰è¯»
            // userMetadata.put("access-control", "private");
            // å‡†å¤‡OSSä¸Šä¼ å¯¹è±¡è¯·æ±‚
            PutObjectArgs putObjectArgs = PutObjectArgs.builder()
                // bucketName
                .bucket(bucketName)
                // æ–‡ä»¶åç§°
                .object(key)
                //è®¾ç½®æ–‡ä»¶æƒé™
                .userMetadata(userMetadata)
                .stream(inputStream, inputStream.available(), -1)
                .build();
            // ä¸Šä¼ æ–‡ä»¶
            return minioClient.putObject(putObjectArgs);
        }
    

### ï¼ˆ2ï¼‰è·å–å¯¹è±¡è®¿é—®é“¾æ¥

      /**
         * è·å–æ–‡ä»¶åœ°å€
         *
         * @param bucketName bucketName
         * @param key        æ–‡ä»¶åç§°
         * @param duration   è¿‡æœŸæ—¶é•¿
         * @param unit       è¿‡æœŸæ—¶é•¿å•ä½
         * @return æ–‡ä»¶åœ°å€
         */
        public static String getObjectUrl(String bucketName, String fileName, int duration, TimeUnit unit)
            throws Exception {
            // æŸ¥çœ‹æ–‡ä»¶åœ°å€
            return minioClient.getPresignedObjectUrl(GetPresignedObjectUrlArgs.builder()
                // bucketName
                .bucket(bucketName)
                // æ–‡ä»¶åç§°
                .object(fileName)
                // è¿‡æœŸå‚æ•°
                .expiry(duration, unit)
                // è¯·æ±‚æ–¹å¼
                .method(Method.GET)
                // æ„å»ºå‚æ•°
                .build()
            );
        }
    

### ï¼ˆ3ï¼‰åˆ é™¤å¯¹è±¡

        /**
         * é€šè¿‡bucketNameã€keyåˆ é™¤æ–‡ä»¶
         *
         * @param bucketName bucketåç§°
         * @param key        æ–‡ä»¶å
         */
        public static void delObject(String bucketName, String key) throws Exception {
            minioClient.removeObject(
                RemoveObjectArgs.builder()
                    .bucket(bucketName)
                    .object(key)
                    .build());
        }
    

### ï¼ˆ4ï¼‰å›¾ç‰‡å¤„ç†

å¾ˆå¯æƒœï¼ŒMinIOæ²¡æœ‰å›¾ç‰‡å¤„ç†çš„åŠŸèƒ½ã€‚

æ€»ç»“ä¸€ä¸‹
====

è¿™ä¸‰ç§å¯¹è±¡å­˜å‚¨å·¥å…·éƒ½æ˜¯æˆ‘åœ¨çœŸå®é¡¹ç›®ä¸­ä½¿ç”¨è¿‡çš„ï¼Œå®ƒä»¬çš„ä½¿ç”¨æµç¨‹ç›¸ä¼¼ï¼Œæ¥å£åç§°ä¹Ÿå·®ä¸å¤šï¼Œä½†æ˜¯åœ¨ä¸€äº›ç»†èŠ‚ä¸Šè¿˜æ˜¯æœ‰äº›ä¸åŒçš„åœ°æ–¹ã€‚ä¸ºäº†è®©å¤§å®¶æ›´å¥½åœ°äº†è§£å®ƒä»¬ï¼Œæˆ‘åœ¨æ–‡ç« ä¸­éƒ½æœ‰æ ‡æ˜åŒºåˆ«ã€‚é˜¿é‡Œäº‘å’Œå¤©ç¿¼äº‘ä½¿ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œåªéœ€è¦è´­ä¹°æœåŠ¡å°±å¯ä»¥äº†ã€‚è€ŒMinIOå°±æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦è‡ªå·±æ­å»ºä¸€ä¸ªæœåŠ¡å™¨ç¯å¢ƒï¼Œå¹¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ»¡è¶³ä¸»å¤‡ã€è¯ä¹¦ç­‰æ–¹é¢çš„è¦æ±‚ï¼Œè¿™ä¹Ÿè®©æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¸©äº†ä¸å°‘å‘ã€‚ä¸è¿‡ï¼Œæˆ‘ä¼šåœ¨æ–°çš„æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»å¦‚ä½•æ­å»ºMinIOæœåŠ¡å™¨ä»¥åŠå¦‚ä½•è§£å†³å®ƒçš„é—®é¢˜ã€‚