---
layout: post
title: "å¸¦ä½ èµ°è¿‡åŠ¨æ€è¡¨å•çš„é‚£äº›å‘"
date: "2023-07-13T01:26:04.111Z"
---
å¸¦ä½ èµ°è¿‡åŠ¨æ€è¡¨å•çš„é‚£äº›å‘
============

æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬çš„è¡¨å•éœ€è¦åšæˆå¯é…ç½®è¡¨å•ï¼Œæ ¹æ®ç®¡ç†å‘˜é…ç½®å¥½çš„è¡¨å•ä¿¡æ¯æ¥åŠ¨æ€ç”Ÿæˆè¡¨å•ï¼Œæ¯”å¦‚ä¸šåŠ¡å‘˜å°±åªèƒ½å¡«å†™ä¸šåŠ¡ç±»å‹çš„è¡¨å•ä¿¡æ¯ï¼Œè¿è¥äººå‘˜å¯ä»¥é…ç½®æ´»åŠ¨ç±»å‹çš„è¡¨å•ä¿¡æ¯ï¼Œç±»ä¼¼äºè¡¨å•çš„æƒé™æ§åˆ¶ã€‚

> é¢„è§ˆåŠ¨æ€è¡¨å•æ•ˆæœåœ¨æ–‡ç« æœ€å

* * *

### åŠ¨æ€è¡¨å•æ ¡éªŒ

        <el-form
          ref="ruleForm"
          :rules="ruleArr"
          :model="ruleForm"
          label-width="80px"
        >
          <div v-for="(item, index) in formArr">
            <div v-if="item.isShow == 1 && item.type == 1">
              <el-form-item
                :label="item.label"
                :prop="item.isRule ? item.name : ''"
              >
                <el-input
                  v-model="ruleForm[item.name]"
                  :placeholder="`è¯·è¾“å…¥${item.label}`"
                ></el-input>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 2">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-select v-model="ruleForm[item.name]" :placeholder="item.rules">
                  <el-option label="åŒºåŸŸä¸€" value="shanghai"></el-option>
                  <el-option label="åŒºåŸŸäºŒ" value="beijing"></el-option>
                </el-select>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 3">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-date-picker
                  v-model="ruleForm[item.name]"
                  type="daterange"
                  format="yyyy-MM-dd"
                  value-format="yyyy-MM-dd"
                  range-separator="è‡³"
                  start-placeholder="å¼€å§‹æ—¥æœŸ"
                  end-placeholder="ç»“æŸæ—¥æœŸ"
                >
                </el-date-picker>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 4">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-switch v-model="ruleForm[item.name]"></el-switch>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 5">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-checkbox-group v-model="ruleForm[item.name]">
                  <el-checkbox label="ç¾é£Ÿ/é¤å…çº¿ä¸Šæ´»åŠ¨" name="type"></el-checkbox>
                  <el-checkbox label="åœ°æ¨æ´»åŠ¨" name="type"></el-checkbox>
                  <el-checkbox label="çº¿ä¸‹ä¸»é¢˜æ´»åŠ¨" name="type"></el-checkbox>
                  <el-checkbox label="å•çº¯å“ç‰Œæ›å…‰" name="type"></el-checkbox>
                </el-checkbox-group>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 6">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-radio-group v-model="ruleForm[item.name]">
                  <el-radio label="çº¿ä¸Šå“ç‰Œå•†èµåŠ©"></el-radio>
                  <el-radio label="çº¿ä¸‹åœºåœ°å…è´¹"></el-radio>
                </el-radio-group>
              </el-form-item>
            </div>
    
            <div v-if="item.isShow == 1 && item.type == 7">
              <el-form-item :label="item.label" :prop="item.isRule ? item.name : ''">
                <el-input
                  :placeholder="`è¯·è¾“å…¥${item.label}`"
                  type="textarea"
                  v-model="ruleForm[item.name]"
                ></el-input>
              </el-form-item>
            </div>
          </div>
          <el-form-item>
            <el-button type="primary" @click="submitForm('ruleForm')"
              >ç«‹å³åˆ›å»º</el-button
            >
            <el-button @click="resetForm('ruleForm')">é‡ç½®</el-button>
            <el-button @click="backData">å›æ˜¾</el-button>
          </el-form-item>
        </el-form>
    

* * *

### 1ã€å¤„ç†æ¥å£è¿”å›çš„æ•°æ®ã€è¡¨å•çš„è¾“å…¥æ¡†ç±»å‹

è¡¨å•çš„è¾“å…¥æ¡†æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼šè¾“å…¥æ¡†ã€ä¸‹æ‹‰é€‰æ‹©æ¡†ã€æ—¶é—´é€‰æ‹©å™¨ã€å•é€‰å™¨ã€å¤šé€‰å™¨ã€`switch`å¼€å…³ã€æ–‡æœ¬åŸŸç­‰ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡`type`ç±»å‹æ¥åˆ¤æ–­æ˜¯å…¶ä¸­çš„å“ªä¸€ä¸ªç±»å‹ï¼Œä¾‹å¦‚ï¼š`type === 1` ä»£è¡¨è¾“å…¥æ¡†

    ruleForm: {}, // è¾“å…¥çš„ç»‘å®šè¡¨å•
    formArr: [], // å±•ç¤ºçš„è¡¨å•
    ruleArr: {}, // æ ¡éªŒè§„åˆ™
    // éœ€è¦åŠ¨æ€å±•ç¤ºçš„æ•°æ®
    /* 
     1 è¾“å…¥
     2 ä¸‹æ‹‰é€‰æ‹©
     3 æ—¥æœŸé€‰æ‹©
     4 å¼€å…³switch
     5 å¤šé€‰
     6 å•é€‰
     7 æ–‡æœ¬åŸŸ
    */
    obj = [
            {
              name: "name",
              label: "æ´»åŠ¨åç§°",
              type: 1,   // ç±»å‹ï¼šè¾“å…¥ã€ä¸‹æ‹‰ã€æ—¥æœŸ....
              isShow: 1, // 1æ˜¾ç¤º 0ä¸æ˜¾ç¤º
              isRule: 1, // 1æ ¡éªŒ 0ä¸æ ¡éªŒ
            },
            {
              name: "region",
              label: "æ´»åŠ¨åŒºåŸŸ",
              type: 2,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "date1",
              label: "æ´»åŠ¨æ—¶é—´",
              type: 3,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "delivery",
              label: "å³æ—¶é…é€",
              type: 4,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "type",
              label: "æ´»åŠ¨æ€§è´¨",
              type: 5,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "resource",
              label: "ç‰¹æ®Šèµ„æº",
              type: 6,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "desc",
              label: "æ´»åŠ¨å½¢å¼",
              type: 7,
              isShow: 1,
              isRule: 1,
            },
            {
              name: "name2",
              label: "è¾“å…¥æ¡†2",
              type: 1,
              isShow: 0,
              isRule: 0,
            },
            {
              name: "name3",
              label: "é€‰æ‹©æ¡†2",
              type: 2,
              isShow: 0,
              isRule: 0,
            },
    ];
    

* * *

### 2ã€è¡¨å•çš„è¾“å…¥æ¡†æ•°æ®é‡ç»„å’Œè¡¨å•çš„æ ¡éªŒ

ç”±äºè¡¨å•å­—æ®µæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸ç¡®å®šé‚£äº›è¾“å…¥æ¡†æ˜¯éœ€è¦æ ¡éªŒçš„ï¼Œè¿™é‡Œä¹Ÿæ˜¯æ ¹æ®ç±»å‹æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ ¡éªŒï¼Œä¾‹å¦‚ï¼š`isRule == 1` ä»£è¡¨éœ€è¦æ ¡éªŒï¼Œæ­¤æ—¶æ ¡éªŒçš„å€¼ `:prop` å¿…é¡»ç­‰äº è¡¨å•çš„ `K` å¦åˆ™ä¼šæ— æ³•æ ¡éªŒï¼Œç”±äºéœ€è¦å¯¹å…¶`Key`ï¼Œéœ€è¦åç«¯è¿”å›æˆ–è€…å‰ç«¯åœ¨å‰æœŸæŠŠæ•°æ®å¤„ç†å¥½ã€‚

        formGroup() {
          this.ruleArr = {};  // è°ƒç”¨ä¹‹å‰å…ˆé‡ç½®æ ¡éªŒè§„åˆ™
          obj.forEach((el) => {
            if (el.isShow == 1 && el.type == 5) {
              // 5 å¤šé€‰æ¡†ï¼Œæ•°æ®å¿…é¡»æ˜¯æ•°ç»„,å› ä¸ºvue2æ“ä½œæ•°ç»„ä¼šå¤±å»åŒå‘ç»‘å®šï¼Œéœ€è¦ç”¨$set
              this.$set(this.ruleForm, el.name, []);
            } else if (el.isShow == 1 && el.type == 3) {
              this.$set(this.ruleForm, el.name, []);
            } else if (el.isShow == 1 && el.type != 3 && el.type != 5) {
              // éœ€è¦æŠŠ K èµ‹å€¼ç»™formï¼Œç”¨äºå›æ˜¾
              this.$set(this.ruleForm,el.name,null);
            }
            // æ·»åŠ æ ¡éªŒè§„åˆ™
            this.ruleArr[el.name] = [
              { required: true, message: `è¯·è¾“å…¥${el.label}`, trigger: "blur" },
            ];
          });
          // é¡µé¢éå†è¯¥æ•°ç»„ç”Ÿæˆè¡¨å•
          this.formArr.push(...obj);
        }
    

åˆ°è¿™é‡Œæˆ‘ä»¬çš„åŠ¨æ€è¡¨å•å°±åˆ›å»ºå¥½äº†  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/7d952f1d554446f589359afc0335efc2.png)  
æˆ‘ä»¬åªéœ€è¦æ ¹æ®æ¥å£è¿”å›çš„æ•°æ®æ¸²æŸ“è¡¨å•å³å¯ï¼Œæ¯”å¦‚æˆ‘åœ¨è¿™é‡Œæ–°å¢ä¸¤æ¡æ•°æ®

    obj= [
      // ...
            {
              name: "name2",
              label: "è¾“å…¥æ¡†2",
              type: 1,
              isShow: 1, // æ˜¾ç¤º
              isRule: 0, // ä¸æ ¡éªŒ
            },
            {
              name: "name3",
              label: "é€‰æ‹©æ¡†2",
              type: 2,
              isShow: 1, // æ˜¾ç¤º
              isRule: 0, // ä¸æ ¡éªŒ
            }
     ]
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/55dd901d687b4b21acc9549c119a5ce4.png)  
æ­¤å¤„å°±åŠ¨æ€ç”Ÿæˆäº†ä¸¤æ¡è¾“å…¥æ¡†ï¼Œå¹¶ä¸”æ ¹æ®ç±»å‹åˆ¤æ–­æ˜¯å¦æ˜¯é€‰æ‹©æ¡†ä»¥åŠè¾“å…¥æ¡†æ˜¯å¦æ ¡éªŒã€‚

* * *

### 3ã€æäº¤

æ­£å¸¸æäº¤å³å¯ï¼Œå¦‚æœå°è£…æˆç»„ä»¶ï¼Œè¿™é‡Œåªéœ€è¦æŠŠå€¼ä¼ å‡ºå»å°±`ok`äº†ã€‚

        // æäº¤
        submitForm(formName) {
          this.$refs[formName].validate((valid) => {
            if (valid) {
              alert("submit!");
              console.log("æäº¤æ•°æ®", this.ruleForm);
            } else {
              console.log("error submit!!");
              return false;
            }
          });
        }
    

* * *

### 4ã€è¡¨å•çš„é‡ç½®

è¡¨å•é‡ç½®åˆ©ç”¨`element`æä¾›çš„`reset`ä¸æ˜¯ä¸€ä¸ªä¿é™©çš„æ–¹æ³•ï¼Œå› ä¸º`reset`å‡½æ•°ç»‘å®šçš„æ˜¯`prop`ï¼Œå¦‚æœè¡¨å•æœªç»‘å®š`prop`åˆ™ä¸ä¼šé‡ç½®è¯¥æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æŠŠæ•°æ®éå†å¤„ç†ä¸€ä¸‹ï¼Œå¹¶ä¸”ï¼Œéƒ¨åˆ†è¾“å…¥æ¡†ï¼ˆå¤šé€‰ï¼‰ç»‘å®šçš„æ˜¯æ•°ç»„ï¼Œ`vue2`å¯¹æ•°ç»„çš„å¤„ç†æ˜¯æœ‰ç¼ºé™·çš„ï¼Œç›´æ¥é‡ç½®ä¼šå¯¼è‡´å¤±å»åŒå‘ç»‘å®šï¼Œå¯¹äºæ•°ç»„çš„å¤„ç†éœ€è¦ä½¿ç”¨ `$set`ã€‚

        // é‡ç½®
        resetForm(formName) {
          this.$refs[formName].resetFields();
          // é‡ç½®å…³è”çš„æ˜¯propï¼Œä¸ºäº†é˜²æ­¢éƒ¨åˆ†æ•°æ®æœªé‡ç½®ï¼Œéœ€è¦éå†é‡ç½®ä¸€ä¸‹
          for (let [k, v] of Object.entries(this.ruleForm)) {
            if (v instanceof Array) {
              // æ•°ç»„éœ€è¦ç”¨$setå¦åˆ™ä¼šå¤±å»åŒå‘ç»‘å®š
              this.$set(this.ruleForm, k, []);
            } else {
              // é‡ç½®éæ•°ç»„æ•°æ®
              this.ruleForm[k] = null;
            }
          }
        }
    

* * *

### 5ã€å…³äºæ•°æ®å›æ˜¾çš„é—®é¢˜

*   éœ€è¦åŒºåˆ†æ˜¯å¦éœ€è¦æ•°ç»„
*   æ—¶é—´æ ¼å¼é—®é¢˜
*   æ•°æ®åŒå‘ç»‘å®šé—®é¢˜

1ã€å¤šé€‰çš„æ ¼å¼å¿…é¡»æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­å¯¹åº”çš„æ ¼å¼æ˜¯å¦ä¸ºæ•°ç»„ã€‚

2ã€éœ€è¦æ¯”å¯¹é¡µé¢æ¸²æŸ“çš„æ—¶é—´æ ¼å¼ï¼Œå¦‚æœæ˜¯æ—¶é—´æˆ³åˆ™è½¬æˆæ—¶é—´æˆ³ï¼Œéœ€è¦å­—ç¬¦ä¸²åˆ™è½¬æˆå­—ç¬¦ä¸²ï¼Œæ­¤å¤„çš„æ—¥æœŸé€‰æ‹©å™¨ä¸ºèµ·å§‹å’Œç»“æŸé€‰æ‹©å™¨ï¼Œæ ¼å¼ç»‘å®šä¸ºæ•°ç»„ã€‚

3ã€å›æ˜¾çš„å€¼èµ‹å€¼åˆ°é¡µé¢ä¸Šä¼šå‡ºç°å¤±å»åŒå‘ç»‘å®šçš„é—®é¢˜ï¼Œç‚¹å‡»æäº¤çš„æ—¶å€™æ ¡éªŒæ— æ³•é€šè¿‡ï¼Œéœ€è¦ç”¨`$set`è®©æ•°æ®å˜æˆåŒå‘ç»‘å®šçš„çŠ¶æ€ã€‚

        // å›æ˜¾
        backData() {
          let data = {
            name: "DCodes",
            region: "æ­¦æ±‰",
            delivery: true,
            date1: ["2023-07-12", "2023-07-15"],
            type: "çº¿ä¸‹ä¸»é¢˜æ´»åŠ¨",
            resource: "çº¿ä¸Šå“ç‰Œå•†èµåŠ©",
            desc: "æŠ€æœ¯åˆ†äº«",
          };
          for (let [k, v] of Object.entries(data)) {
            Object.keys(this.ruleForm).forEach((el) => {
              if (el == k) {
                if (k == "type") {
                  this.$set(this.ruleForm,k,[v])
                } else if (k == "date1") {
                  let date = [v[0],v[1]]
                  this.$set(this.ruleForm,k,date)
                } else {
                  this.ruleForm[k] = v;
                }
              }
            });
          }
        }
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/9cc27922c54a41d2a6d2ff0a41acfc10.gif#pic_center)

* * *

[csså®ç°ç‚«é…·å……ç”µåŠ¨ç”»](https://blog.csdn.net/qq_44793507/article/details/129567385) ï¼ˆğŸ‘ˆç‚¹å‡»ç›´è¾¾ï¼‰  
[å†ä¹Ÿä¸ç”¨æ‹…å¿ƒç»„ä»¶è·¨å±‚çº§çš„æ•°æ®å…±äº«å’Œæ–¹æ³•é©±åŠ¨äº†](https://blog.csdn.net/qq_44793507/article/details/131155590) ï¼ˆğŸ‘ˆç‚¹å‡»ç›´è¾¾ï¼‰  
[cssç»˜åˆ¶ä¸€ä¸ªPiniaå°è è](https://blog.csdn.net/qq_44793507/article/details/129734290)ï¼ˆğŸ‘ˆç‚¹å‡»ç›´è¾¾ï¼‰  
[element tableåˆ—è¡¨æ ¹æ®æ•°æ®è®¾ç½®èƒŒæ™¯è‰²](https://blog.csdn.net/qq_44793507/article/details/131599110) ï¼ˆğŸ‘ˆç‚¹å‡»ç›´è¾¾ï¼‰  
[vue3ä½¿ç”¨ç™¾åº¦åœ°å›¾](https://blog.csdn.net/qq_44793507/article/details/130554864)ï¼ˆğŸ‘ˆç‚¹å‡»ç›´è¾¾ï¼‰

å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµğŸ‘ã€æ”¶è—ğŸ’–ã€è½¬å‘âœ¨å“¦~